if (self.CavalryLogger) { CavalryLogger.start_js(["JHuSc"]); }

__d("PinnedConversationNubsActionTaken",[],(function a(b,c,d,e,f,g){f.exports={TAB_CLOSED_BY_USER:0,COMMENT_ADDED:1}}),null);
__d("AppsDivebarDisplayController",["cx","AppsDivebarConfigData","AsyncRequest","Arbiter","CSS","UIPagelet","$"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=171,j={isVisible:function k(){if(this._visible!==undefined)return this._visible;this._visible=!c("AppsDivebarConfigData").hidden;return this._visible},showApps:function k(){this._visible=true;var l={fb_source_category:"sidebar"};c("UIPagelet").loadFromEndpoint("GamesDivebarPagelet","pagelet_canvas_nav_content",l);c("CSS").show(c("$")("apps_gripper"));c("CSS").show(c("$")("pagelet_canvas_nav_content"));c("CSS").addClass(c("$")("pagelet_canvas_nav_content"),"_4woj");c("Arbiter").inform("AppsDivebar/show-apps");new(c("AsyncRequest"))("/ajax/feed/apps/resize").setData({height:""+i,menu:true}).setMethod("POST").send()},hideApps:function k(){this._visible=false;c("CSS").hide(c("$")("pagelet_canvas_nav_content"));c("CSS").hide(c("$")("apps_gripper"));c("Arbiter").inform("AppsDivebar/hide-apps");new(c("AsyncRequest"))("/ajax/feed/apps/resize").setData({height:"1",menu:true}).setMethod("POST").send()}};f.exports=j}),null);
__d("ChannelConnection",["Arbiter","ChannelConstants","ChannelManager","JSLogger","Run","SystemEvents","Visibility","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("JSLogger").create("channel_connection"),i=null,j=null,k=null,l=null,m=0;c("ChannelManager").startChannelManager();var n=Object.assign(new(c("Arbiter"))(),{CONNECTED:"chat-connection/connected",RECONNECTING:"chat-connection/reconnecting",SHUTDOWN:"chat-connection/shutdown",MUTE_WARNING:"chat-connection/mute",UNMUTE_WARNING:"chat-connection/unmute"});c("Run").onBeforeUnload(function(){});function o(){if(j){clearTimeout(j);j=null}}function p(){o();h.log("unmute_warning");n.inform(n.UNMUTE_WARNING)}function q(v){o();j=c("setTimeoutAcrossTransitions")(p,v);h.log("mute_warning",{time:v});n.inform(n.MUTE_WARNING)}function r(){if(k){clearTimeout(k);k=null}}function s(v,w){__p&&__p();r();if(v===c("ChannelConstants").ON_ENTER_STATE&&(w.nextState||w.state)==="pull"){if(l!==n.CONNECTED){h.log("connected");var x=!l;l=n.CONNECTED;m=0;n.inform(n.CONNECTED,{init:x})}}else if(v===c("ChannelConstants").ON_ENTER_STATE&&((w.nextState||w.state)==="ping"||!w.nextState&&w.state==="idle"))k=c("setTimeoutAcrossTransitions")(function(){__p&&__p();var y=null;if(!(w.state==="idle"&&!w.nextState))y=w.delay||0;h.log("reconnecting",{delay:y});if(n.disconnected())h.log("reconnecting_ui",{delay:y});l=n.RECONNECTING;w.state==="idle"&&m++;if(m>1)n.inform(n.RECONNECTING,y);else if(!w.nextState&&w.state==="idle")s(v,w)},500);else if(v===c("ChannelConstants").ON_SHUTDOWN){h.log("shutdown",{reason:w.reason});l=n.SHUTDOWN;m=0;n.inform(n.SHUTDOWN,w.reason)}}function t(){if(c("ChannelManager").isShutdown())s(c("ChannelConstants").ON_SHUTDOWN,c("ChannelManager")._shutdownHint);else s(c("ChannelConstants").ON_ENTER_STATE,{state:c("ChannelManager").state,nextState:c("ChannelManager").nextState,delay:0});c("Visibility").addListener(c("Visibility").VISIBLE,n.reconnect)}c("Run").onAfterLoad(t);Object.assign(n,{disconnected:function v(){return l===n.SHUTDOWN||l===n.RECONNECTING&&!j&&m>1},isShutdown:function v(){return l===n.SHUTDOWN},reconnect:function v(w){__p&&__p();if(c("ChannelManager").state==="ping"||c("ChannelManager").state==="pull"||c("ChannelManager").isShutdown())return;h.log("reconnect",{now:w});n.inform(n.RECONNECTING,0);if(!!w){if(i!==null){clearTimeout(i);i=null}c("ChannelManager").enterState("ping!")}else if(!i)i=c("setTimeoutAcrossTransitions")(function(){c("ChannelManager").enterState("ping!");i=null},c("ChannelConstants").CHANNEL_MANUAL_RECONNECT_DEFER_MSEC);c("ChannelManager").resetDelay()},unmuteWarning:p});function u(){c("Arbiter").subscribe([c("ChannelConstants").ON_ENTER_STATE,c("ChannelConstants").ON_SHUTDOWN],s);c("Arbiter").subscribe(c("ChannelConstants").ATTEMPT_RECONNECT,function(){if(n.disconnected())n.reconnect()});c("SystemEvents").subscribe(c("SystemEvents").TIME_TRAVEL,function(){n.reconnect();q(c("ChannelConstants").MUTE_WARNING_TIME_MSEC)});c("Run").onBeforeUnload(r,false)}c("Run").onAfterLoad(u);n.mockAfterLoad=function(){t();u()};c("Arbiter").subscribe(c("JSLogger").DUMP_EVENT,function(v,w){w.channel_connected=!n.disconnected()});f.exports=n}),3);
__d("MessengerSearchFunnelLoggerConstants",[],(function a(b,c,d,e,f,g){"use strict";f.exports={NAME:"WWW_MESSENGER_SEARCH_SESSION_FUNNEL",FETCHED_STATE_IMPRESSION_LIST:"fetched_state_impression_list",LOADING_STATE_IMPRESSION_LIST:"loading_state_impression_list",SEND_SERVER_REQUEST:"send_server_request",WWW_SIDEBAR_TAG:"www",MESSENGER_DOT_COM:"messenger_dot_com",UNIVERSAL_SEARCH:"universal_search",USER_CONTACT:"user_contact",USER_NON_CONTACT:"user_non_contact",GROUP:"group",PAGE:"page",GAME:"game",TINCAN:"tincan",SMS:"sms",SMS_GROUP:"sms_group",COWORKER:"coworker",OTHER:"other"}}),null);
__d("ChatSearchSource",["requireWeak","AbstractSearchSource","AsyncRequest","Bootloader","CurrentUser","MercuryConfig","MercuryParticipantTypes","MessengerSearchFunnelLoggerConstants","SearchableEntry","SearchSourceCallbackManager","ShortProfiles","TokenizeUtil","debounce","emptyFunction","isValidUniqueID"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=null;c("requireWeak")("OrderedFriendsList",function(l){j=l});h=babelHelpers.inherits(k,c("AbstractSearchSource"));i=h&&h.prototype;function k(l){i.constructor.call(this);this.$ChatSearchSource1=new(c("SearchSourceCallbackManager"))({parseFn:c("TokenizeUtil").parse,matchFn:c("TokenizeUtil").isQueryMatch,indexFn:l.indexFn});this.$ChatSearchSource2=l.queryRequests||[];this.$ChatSearchSource3=l.searchType||"";this.$ChatSearchSource4=false;this.$ChatSearchSource5=c("debounce")(this.$ChatSearchSource5,100,this);this.$ChatSearchSource6=l.excludeMemorializedUsers||false;this.$ChatSearchSource7=""}k.prototype.bootstrapImpl=function(l){c("ShortProfiles").fetchAll().done(function(){this.$ChatSearchSource4=true;this.$ChatSearchSource8();l()}.bind(this))};k.prototype.searchImpl=function(l,m,n){__p&&__p();var o=null,p={},q=n&&n.onQueryFinished,r=n&&n.onQueryStarted;r&&r(l);var s=this.$ChatSearchSource1.search(l,function(v){__p&&__p();if(!o){o=v;o.forEach(function(w){return p[w.getUniqueID()]=true})}else v.forEach(function(w){var x=w.getUniqueID();if(!p[x]){o.push(w);p[x]=true}});m(o,l);if(l.length===1&&this.$ChatSearchSource4)q&&q(l)}.bind(this),n);if(!s||!this.$ChatSearchSource2||!this.$ChatSearchSource2.length||l.length===0){q&&q(l);return}if(l.length===1){if(this.$ChatSearchSource4)q&&q(l);return}var t={value:l,existing_ids:o&&o.map(function(v){return v.getUniqueID()}).join(","),limit:n&&n.threadLimit,exclude_memorialized_users:this.$ChatSearchSource6},u=this.$ChatSearchSource2.length;this.$ChatSearchSource2.forEach(function(v){this.$ChatSearchSource5(t,v,function(w){this.$ChatSearchSource9(this.$ChatSearchSource10(this.$ChatSearchSource11(w)).filter(function(x){return!!x}),l);u--;if(u===0){this.$ChatSearchSource1.setQueryStringAsExhausted(l);q&&q(l)}}.bind(this))}.bind(this),this)};k.prototype.getAllEntriesMap=function(){return this.$ChatSearchSource1.getAllEntries()};k.prototype.$ChatSearchSource8=function(){var l=c("ShortProfiles").getCachedProfileIDs(),m=l.filter(function(o){var p=c("ShortProfiles").getNow(o);return o==c("CurrentUser").getID()||p.type===c("MercuryParticipantTypes").FRIEND||p.type===c("MercuryParticipantTypes").FB4C||p.type===c("MercuryParticipantTypes").PAGE&&c("MercuryConfig").LinkedAgents&&c("MercuryConfig").LinkedAgents.indexOf(o.toString())>-1}),n=m.map(this.$ChatSearchSource12);if(n.length)this.$ChatSearchSource1.addLocalEntries(n)};k.prototype.$ChatSearchSource10=function(l){return l.map(this.$ChatSearchSource13,this)};k.prototype.$ChatSearchSource13=function(l,m){__p&&__p();if(l.mercury_thread){if(!j)return null;return j.normalizeThreadEntry(l,m)}var n=l.text,o=l.uid;if(!n||!c("isValidUniqueID")(o))return null;var p=j?j.getActiveRank(o):0;if(j&&!j.contains(o))p+=m;return new(c("SearchableEntry"))({uniqueID:o,title:n,order:p,subtitle:l.subtext,type:l.render_type||l.type,photo:l.photo,uri:l.path,auxiliaryData:{isMessengerUser:l.is_messenger_user,alias:l.alias}})};k.prototype.$ChatSearchSource11=function(l){var m=l.getPayload();if(Array.isArray(m))return m;else if(m&&m.entries)return m.entries;else return[]};k.prototype.$ChatSearchSource12=function(l){var m=c("ShortProfiles").getNow(l),n=l==c("CurrentUser").getID()?c("MercuryParticipantTypes").FRIEND:m.type,o=[m.additionalName,m.alternateName].concat(m.searchTokens||[]).join(" "),p=m.name,q=null;return new(c("SearchableEntry"))({uniqueID:l,title:p,order:j?j.getActiveRank(l):0,subtitle:q,keywordString:o,type:n,photo:m.thumbSrc,uri:m.uri,auxiliaryData:{isMessengerUser:m.is_messenger_user,alias:m.alias}})};k.prototype.$ChatSearchSource5=function(l,m,n,o){if(this.$ChatSearchSource3===c("MessengerSearchFunnelLoggerConstants").WWW_SIDEBAR_TAG&&l.value!==this.$ChatSearchSource7){c("Bootloader").loadModules(["MessengerSearchFunnelLogger"],function(p){p.logStartQuery(c("MessengerSearchFunnelLoggerConstants").NAME,l.value)},"ChatSearchSource");this.$ChatSearchSource7=l.value}new(c("AsyncRequest"))(m.uri).setData(babelHelpers["extends"]({},l,m.data)).setMethod("GET").setReadOnly(true).setHandler(n).setErrorHandler(o||c("emptyFunction")).setAllowCrossPageTransition(true).send()};k.prototype.$ChatSearchSource9=function(l,m){if(l.length)this.$ChatSearchSource1.addQueryEntries(l,m)};k.prototype.addLocalEntries=function(l){this.$ChatSearchSource1.addLocalEntries(l)};k.prototype.refreshData=function(){c("ShortProfiles").fetchAll()};f.exports=k}),null);
__d("MercuryFolders",["MercuryFoldersConfig","MessagingTag"],(function a(b,c,d,e,f,g){__p&&__p();var h=[c("MessagingTag").INBOX,c("MessagingTag").PENDING,c("MessagingTag").OTHER,c("MessagingTag").ACTION_ARCHIVED],i={getSupportedFolders:function j(){return h.filter(function(k){if(k===c("MessagingTag").PENDING)return!c("MercuryFoldersConfig").hide_message_filtered;else if(k===c("MessagingTag").OTHER)return!c("MercuryFoldersConfig").hide_message_requests;return true}).concat()},getFromMeta:function j(k){var l=k.folder;if(k.is_archived)l=c("MessagingTag").ACTION_ARCHIVED;return l}};f.exports=i}),null);
__d("MercuryUnreadState",["invariant","MercuryFolders","LogHistory","KeyedCallbackManager","MercuryActionType","MercuryConfig","MercuryDispatcher","MercuryGlobalActionType","MercurySingletonProvider","MercuryThreadlistConstants","MercuryThreadIDMap","MessagingTag","MercuryServerRequests","MercuryThreadInformer","MercuryThreads","createObjectFrom"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=(c("MercuryFolders").getSupportedFolders()||[]).filter(function(p){return p!==c("MessagingTag").ACTION_ARCHIVED}),j="unread_thread_hash",k="unseen_thread_list",l=c("MercuryThreadlistConstants").MAX_UNREAD_COUNT,m=c("LogHistory").getInstance("mercury_unread_state");n.getForFBID=function(p){return o.getForFBID(p)};n.get=function(){return o.get()};function n(p){__p&&__p();this.$MercuryUnreadState1=p;this.$MercuryUnreadState2=c("MercuryServerRequests").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState3=c("MercuryThreadIDMap").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState4=c("MercuryThreadInformer").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState5=c("MercuryThreads").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState6=c("MercuryDispatcher").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState7={};this.$MercuryUnreadState8={};this.$MercuryUnreadState9={};this.$MercuryUnreadState10={};this.$MercuryUnreadState11={};i.forEach(function(q){this.$MercuryUnreadState9[q]=0;this.$MercuryUnreadState10[q]=false;this.$MercuryUnreadState11[q]=new(c("KeyedCallbackManager"))()}.bind(this));this.$MercuryUnreadState6.subscribe("update-unread",this.$MercuryUnreadState12.bind(this));this.$MercuryUnreadState6.subscribe("update-thread-ids",function(q,r){this.$MercuryUnreadState13(r)}.bind(this))}n.prototype.getUnreadCount=function(p){if(this.exceedsMaxCount(p)){m.error("unguarded_unread_count_fetch","{}");return 0}return this.$MercuryUnreadState14(p)};n.prototype.exceedsMaxCount=function(p){return this.$MercuryUnreadState10[p]||this.$MercuryUnreadState14(p)>l};n.prototype.markFolderAsRead=function(p){if(this.$MercuryUnreadState10[p]||this.$MercuryUnreadState14(p)>0)this.$MercuryUnreadState2.markFolderAsRead(p);if(c("MercuryConfig").MessengerInboxRequests&&p===c("MessagingTag").INBOX&&this.$MercuryUnreadState14(c("MessagingTag").PENDING)>0)this.$MercuryUnreadState2.markFolderAsRead(c("MessagingTag").PENDING)};n.prototype.getIsThreadUnread=function(p,q){var r=q||c("MessagingTag").INBOX,s=this.$MercuryUnreadState15(r);return!!(s&&s[p])};n.prototype.$MercuryUnreadState16=function(p,q){this.$MercuryUnreadState11[p].setResource(j,q);this.$MercuryUnreadState11[p].setResource(k,Object.keys(q))};n.prototype.$MercuryUnreadState17=function(p,q){var r=this.$MercuryUnreadState11[p].executeOrEnqueue(j,q),s=this.$MercuryUnreadState11[p].getUnavailableResources(r);if(s.length)this.$MercuryUnreadState2.fetchUnreadThreadIDs(p)};n.prototype.$MercuryUnreadState15=function(p){return this.$MercuryUnreadState11[p].getResource(j)};n.prototype.$MercuryUnreadState14=function(p){var q=this.$MercuryUnreadState11[p].getResource(k);if(q)return q.length;else return this.$MercuryUnreadState9[p]};n.prototype.$MercuryUnreadState12=function(p,q){__p&&__p();var r=void 0;(q.unread_thread_fbids||[]).forEach(function(s){__p&&__p();r=s.folder;if(!this.$MercuryUnreadState18(r))return;var t=s.thread_fbids||[];t=t.concat(s.other_user_fbids||[]);var u=this.$MercuryUnreadState19(t);this.$MercuryUnreadState16(r,c("createObjectFrom")(u,true));if(u.length>l)this.$MercuryUnreadState10[r]=true;this.$MercuryUnreadState4.updatedUnreadState()}.bind(this));(q.message_counts||[]).forEach(function(s){__p&&__p();if(s.unread_count===undefined)return;r=s.folder;if(s.unread_count>l){this.$MercuryUnreadState10[r]=true;this.$MercuryUnreadState16(r,{});this.$MercuryUnreadState4.updatedUnreadState()}else{this.$MercuryUnreadState9[r]=s.unread_count;if(this.$MercuryUnreadState9[r]===0)this.$MercuryUnreadState16(r,{});this.$MercuryUnreadState4.updatedUnreadState()}}.bind(this));(q.global_actions||[]).forEach(function(s){if(s.action_type===c("MercuryGlobalActionType").MARK_ALL_READ)this.$MercuryUnreadState20(s.folder,s.timestamp)}.bind(this));(q.actions||[]).forEach(function(s){__p&&__p();var t=c("MercuryActionType"),u=s.other_user_fbid?s.other_user_fbid:s.thread_fbid,v=s.thread_id?s.thread_id:u;if(s.action_type==t.DELETE_THREAD)i.forEach(function(x){this.$MercuryUnreadState21(x,v)}.bind(this));else if(s.action_type==t.CHANGE_ARCHIVED_STATUS||s.action_type==t.CHANGE_FOLDER){var w=this.$MercuryUnreadState5.getThreadMetaNow(s.thread_id);!!w||h(0);r=c("MercuryFolders").getFromMeta(w);if(this.$MercuryUnreadState18(r)&&w.unread_count>0)this.$MercuryUnreadState22(r,v);i.forEach(function(x){if(x!=r)this.$MercuryUnreadState21(x,v)}.bind(this))}else{r=this.$MercuryUnreadState23(s);if(!this.$MercuryUnreadState18(r))return;if(s.action_type==t.CHANGE_READ_STATUS)if(s.mark_as_read)this.$MercuryUnreadState21(r,v,s.timestamp);else this.$MercuryUnreadState22(r,v,s.timestamp);else if(s.action_type==t.USER_GENERATED_MESSAGE||s.action_type==t.LOG_MESSAGE)if(s.is_unread)this.$MercuryUnreadState22(r,v,s.timestamp)}}.bind(this))};n.prototype.$MercuryUnreadState22=function(p,q,r){if(this.$MercuryUnreadState10[p])return;this.$MercuryUnreadState17(p,function(s){var t=this.$MercuryUnreadState7[p]||0,u=this.$MercuryUnreadState8[q]||0,v=r||Number.POSITIVE_INFINITY;if(v>=t&&v>=u&&!s[q]){s[q]=r||0;this.$MercuryUnreadState16(p,s);this.$MercuryUnreadState4.updatedUnreadState()}}.bind(this))};n.prototype.$MercuryUnreadState21=function(p,q,r){__p&&__p();if(this.$MercuryUnreadState10[p])return;this.$MercuryUnreadState17(p,function(s){__p&&__p();if(r){var t=this.$MercuryUnreadState8[q];if(!t||t<r)this.$MercuryUnreadState8[q]=r}var u=s[q];if(r&&typeof u=="number"&&r<u)return;if(q in s){delete s[q];this.$MercuryUnreadState16(p,s);this.$MercuryUnreadState4.updatedUnreadState()}}.bind(this))};n.prototype.$MercuryUnreadState20=function(p,q){this.$MercuryUnreadState10[p]=false;this.$MercuryUnreadState16(p,{});this.$MercuryUnreadState7[p]=Math.max(this.$MercuryUnreadState7[p]||0,q||0);this.$MercuryUnreadState4.updatedUnreadState()};n.prototype.$MercuryUnreadState19=function(p){return p.map(this.$MercuryUnreadState3.convertThreadIDIfAvailable,this.$MercuryUnreadState3)};n.prototype.$MercuryUnreadState13=function(p){__p&&__p();i.forEach(function(q){__p&&__p();var r=this.$MercuryUnreadState15(q);if(!r)return;for(var s in p){var t=p[s];if(r[s]){r[t]=r[s];delete r[s]}}this.$MercuryUnreadState16(q,r)}.bind(this))};n.prototype.$MercuryUnreadState23=function(p){var q=p.thread_id?this.$MercuryUnreadState5.getThreadMetaNow(p.thread_id):null;return q?c("MercuryFolders").getFromMeta(q):p.folder?p.folder:""};n.prototype.$MercuryUnreadState18=function(p){return!!p&&i.includes(p)};var o=new(c("MercurySingletonProvider"))(n);f.exports=n}),null);
__d("isInFocusMode",["WorkFocusModeController"],(function a(b,c,d,e,f,g){var h=c("WorkFocusModeController").WorkFocusMode,i=function i(j){return!!(h&&h.currentViewerInFocusMode(j))};f.exports=i}),null);
__d("ChatUnreadCount",["ChatConfig","ChatDispatcher","ChatUnreadCountActionTypes","Map","MercuryIDs","MercurySingletonProvider","MercuryThreadInformer","MercuryThreads","MercuryUnreadState","isInFocusMode"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};function h(j){this.$ChatUnreadCount1=j;this.$ChatUnreadCount2=c("MercuryThreadInformer").getForFBID(j);this.$ChatUnreadCount3=c("MercuryThreads").getForFBID(j);this.$ChatUnreadCount4=new(c("Map"))();this.$ChatUnreadCount5=c("MercuryUnreadState").getForFBID(j);this.setupSubscriptions()}h.prototype.getUnreadCountForUID=function(j){__p&&__p();if(!j)return null;var k=c("MercuryIDs").getThreadIDFromUserID(j);if(!this.$ChatUnreadCount5.getIsThreadUnread(k)&&!c("ChatConfig").get("unread_count_fix")){this.$ChatUnreadCount4["delete"](j);return 0}var l=this.$ChatUnreadCount3.getOrFetch(k),m=l&&l.unread_count;if(!m&&c("ChatConfig").get("unread_count_fix"))this.$ChatUnreadCount4["delete"](j);else this.$ChatUnreadCount4.set(j,m);if(c("isInFocusMode")(k))return 0;return m};h.prototype.setupSubscriptions=function(){__p&&__p();this.$ChatUnreadCount2.subscribe("threads-updated",function(j,k){var l=Object.keys(k).some(function(m){var n=c("MercuryIDs").getUserIDFromThreadID(m);if(!n)return false;var o=this.getUnreadCountForUID(n),p=this.$ChatUnreadCount4.get(n)||0;return o!==p}.bind(this));if(l)c("ChatDispatcher").dispatch({type:c("ChatUnreadCountActionTypes").COUNT_UPDATED})}.bind(this));this.$ChatUnreadCount2.subscribe("unread-updated",function(){return c("ChatDispatcher").dispatch({type:c("ChatUnreadCountActionTypes").COUNT_UPDATED})})};var i=new(c("MercurySingletonProvider"))(h);f.exports=h}),null);
__d("ChatTypeaheadConstants",[],(function a(b,c,d,e,f,g){var h=Object.freeze({USER_TYPE:"user",THREAD_TYPE:"thread",FRIEND_TYPE:"friend",NON_FRIEND_TYPE:"non_friend",FB4C_TYPE:"fb4c",PAGE_TYPE:"page",MEETING_ROOM_PAGE_TYPE:"meeting_room_page",COMMERCE_PAGE_TYPE:"commerce_page",HEADER_TYPE:"header",INTERNAL_BOT_PAGE_TYPE:"internal_bot_page",GAME_TYPE:"game"});f.exports=h}),null);
__d("ChatSidebarComposeLink.react",["fbt","ChatOpenTabEventLogger","FantaTabActions","Link.react","MercuryThreads","React","TooltipData"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("MercuryThreads").get();i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(m){j.constructor.call(this,m)}l.prototype.render=function(){var m=h._("\uc0c8 \uba54\uc2dc\uc9c0");return c("React").createElement(c("Link.react"),babelHelpers["extends"]({className:this.props.className,href:"#",onClick:this.$ChatSidebarComposeLink1},c("TooltipData").propsFor(m,"below")))};l.prototype.$ChatSidebarComposeLink1=function(m){var n=k.createNewLocalThreadGenerateID();c("FantaTabActions").openTab(n,"compose_link");c("ChatOpenTabEventLogger").logClickOpen("sidebar",n);m.preventDefault()};f.exports=l}),null);
__d("ChatSidebarDropdownConstants",[],(function a(b,c,d,e,f,g){var h=Object.freeze({SOUND:"sound",ADVANCED_SETTINGS:"advanced_settings",BLOCK_SETTINGS:"block_settings",TURN_OFF_DIALOG:"turn_off_dialog",CLOSE_ALL_TABS:"close_all_tabs",LOWER_ALL_TABS:"lower_all_tabs",TOGGLE_DISCOVER_BOTS:"toggle_discover_bots",SIDEBAR:"sidebar",HIDE_GROUPS:"hide_groups",ONLINE:"online",VIDEOCALL_ON:"videoon",VIDEOCALL_OFF:"videooff",PAUSE:"pause",SHOW_APPS:"show_apps",HIDE_APPS:"hide_apps",SHOW_TICKER:"show_ticker",HIDE_TICKER:"hide_ticker",HIDE_ADMINED_PAGES:"hide_admined_pages",HIDE_BUSINESSES:"hide_businesses",EMOJI_SETTINGS:"emoji_settings"});f.exports=h}),null);
__d("ConversationNubTabStateListStorage",[],(function a(b,c,d,e,f,g){"use strict";function h(){this.$ConversationNubTabStateListStorage1=[]}h.prototype.modify=function(i){this.$ConversationNubTabStateListStorage1=i(this.$ConversationNubTabStateListStorage1)};h.prototype.getData=function(){return this.$ConversationNubTabStateListStorage1};f.exports=h}),null);
__d("differenceSets",["filterSet"],(function a(b,c,d,e,f,g){"use strict";function h(i){for(var j=arguments.length,k=Array(j>1?j-1:0),l=1;l<j;l++)k[l-1]=arguments[l];return c("filterSet")(i,function(m){return!k.some(function(n){return n.has(m)})})}f.exports=h}),null);
__d("ConversationNubTabStateList",["invariant","ConversationNubTabStateListStorage","Set","differenceSets"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(){this.$ConversationNubTabStateList2=new(c("Set"))();this.$ConversationNubTabStateList1=new(c("ConversationNubTabStateListStorage"))()}i.prototype.modifyTabState=function(j,k){this.modifyTabs(function(l){var m=l.findIndex(function(n){return n.tabID===j});m!==-1||h(0);k(l[m]);return l})};i.prototype.$ConversationNubTabStateList3=function(j){return new(c("Set"))(j.map(function(k){return k.tabID}))};i.prototype.modifyTabs=function(j){try{this.$ConversationNubTabStateList1.modify(function(k){var l=this.$ConversationNubTabStateList3(k),m=j(k),n=this.$ConversationNubTabStateList3(m);this.$ConversationNubTabStateList2=c("differenceSets")(l,n);return m}.bind(this))}finally{this.$ConversationNubTabStateList2=new(c("Set"))()}};i.prototype.getTabs=function(){return this.$ConversationNubTabStateList1.getData()};i.prototype.getTabState=function(j){var k=this.getTabStateIfExists(j);k||h(0);return k};i.prototype.getTabStateIfExists=function(j){return this.getTabs().find(function(k){return k.tabID===j})};i.prototype.push=function(){for(var j=arguments.length,k=Array(j),l=0;l<j;l++)k[l]=arguments[l];this.modifyTabs(function(m){k.forEach(function(n){if(m.find(function(o){return o.tabID===n.tabID}))h(0);else m.push(n)});return m})};i.prototype.remove=function(j){this.modifyTabs(function(k){var l=k.findIndex(function(m){return m.tabID===j});if(l!==-1)k.splice(l,1);return k})};f.exports=i}),null);
__d("ConversationNubTabState",["invariant","ConversationNubTabStateList"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=12;function j(){this.$ConversationNubTabStateClass1=Object.create(null);this.$ConversationNubTabStateClass2=new(c("ConversationNubTabStateList"))();this.$ConversationNubTabStateClass3=Infinity}j.prototype.anyTabHasFocus=function(){return this.getUnsortedLoadedTabs().some(function(k){return k.getIsFocused()})};j.prototype.anyTabHasText=function(){return this.getUnsortedLoadedTabs().some(function(k){return k.getHasText()})};j.prototype.getTabState=function(k){return this.$ConversationNubTabStateClass2.getTabState(k)};j.prototype.getTabStateIfExists=function(k){return this.$ConversationNubTabStateClass2.getTabStateIfExists(k)};j.prototype.getUnloadedTabs=function(){var k=this.$ConversationNubTabStateClass2.getTabs().filter(function(l){return!this.getLoadedTab(l.tabID)}.bind(this));return k};j.prototype.setMaxDockTabs=function(k){this.$ConversationNubTabStateClass3=k};j.prototype.getNumDockTabs=function(){var k=this.$ConversationNubTabStateClass3,l=this.getTotalTabCount();return Math.min(k,l)};j.prototype.getNumMenuTabs=function(){return this.getTotalTabCount()-this.getNumDockTabs()};j.prototype.addTabState=function(k){this.$ConversationNubTabStateClass2.push(k)};j.prototype.addLoadedTab=function(k,l){var m=this.getTabState(k);if(!m)return;var n=this.getLoadedTab(k);if(n)return;this.$ConversationNubTabStateClass1[k]=l;this.$ConversationNubTabStateClass4()};j.prototype.getLoadedTab=function(k){return this.$ConversationNubTabStateClass1[k]};j.prototype.getLoadedTabByFeedbackTarget=function(k){return this.getLoadedTabs().find(function(l){return l.getPersistentState().ftID===k})};j.prototype.isTabInDock=function(k){var l=this.getLoadedTab(k);if(!l)return false;var m=this.$ConversationNubTabStateClass5(l);return 0<=m&&m<this.getNumDockTabs()};j.prototype.clearTabNotifications=function(k){this.$ConversationNubTabStateClass2.modifyTabState(k,function(l){l.unseenCommentsSinceLastCleared={};l.hasFakeInitBadge=false;l.badgeCount=0;l.isBlinkingUnread=false})};j.prototype.deleteTab=function(k){var l=this.getLoadedTab(k);if(l){delete this.$ConversationNubTabStateClass1[k];l.destroy()}this.$ConversationNubTabStateClass2.remove(k);return Boolean(l)};j.prototype.deleteAllTabs=function(){this.getUnsortedLoadedTabs().forEach(function(k){return this.deleteTab(k.getTabID())}.bind(this))};j.prototype.modifyTabState=function(k,l){return this.$ConversationNubTabStateClass2.modifyTabState(k,l)};j.prototype.moveTabToDockLeft=function(k){__p&&__p();var l=this.getLoadedTab(k);if(!l)return;this.$ConversationNubTabStateClass2.modifyTabs(function(m){__p&&__p();var n=m.findIndex(function(l){return l.tabID===k});n!==-1||h(0);var o=m[n],p=this.$ConversationNubTabStateClass5(l),q=this.getLoadedTabs().length,r=this.getNumDockTabs();if(p<0||q===0)return m;else if(r===0){if(p!==0){m.splice(n,1);m.unshift(o)}return m}var s=r-1;if(p===s)return m;m.splice(n,1);if(p<s)s-=1;var t=this.getLoadedTabs()[s],u=this.getTabState(t.getTabID());u||h(0);var v=m.findIndex(function(l){return l.tabID===u.tabID});m.splice(v,0,o);return m}.bind(this))};j.prototype.getLoadedTabs=function(){var k=this.$ConversationNubTabStateClass2.getTabs().map(function(l){return this.getLoadedTab(l.tabID)}.bind(this)).filter(Boolean);return k};j.prototype.getUnsortedLoadedTabs=function(){var k=Object.values(this.$ConversationNubTabStateClass1);return k};j.prototype.getTotalTabCount=function(){return this.getUnsortedLoadedTabs().length};j.prototype.getTabsForDockOldestFirst=function(){return this.getLoadedTabs().slice(0,this.getNumDockTabs())};j.prototype.getTabsForDockNewestFirst=function(){return this.getTabsForDockOldestFirst().slice().reverse()};j.prototype.getTabsForMenuOldestFirst=function(){return this.getLoadedTabs().slice(this.getNumDockTabs())};j.prototype.getTabsForMenuNewestFirst=function(){return this.getLoadedTabs().slice(this.getNumDockTabs()).reverse()};j.prototype.$ConversationNubTabStateClass4=function(){var k=this.getLoadedTabs().length;if(k>i){var l=k-i,m=this.getTabsForMenuOldestFirst().slice(0,l);m.map(function(n){return n.getTabID()}).forEach(function(n){return this.deleteTab(n)}.bind(this))}};j.prototype.$ConversationNubTabStateClass5=function(k){return this.getLoadedTabs().indexOf(k)};f.exports=new j()}),null);
__d("ConversationNub",["csx","cx","Arbiter","ConversationNubHeader","ConversationNubTabState","ConversationNubTabsUpdateEventController","ConversationNubUtils","CSS","DOM","EventListener","NotificationUserActions","SubscriptionsHandler","UFIComposerIsTypingStore","URI","containsNode","debounce","guid"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ConversationNubTabsUpdateEventController").minimizeAndInformTabUpdate,k=c("ConversationNubTabsUpdateEventController").popOutAndInformTabUpdate,l=c("ConversationNubTabState"),m=10,n=500,o=100;p.createDefaultState=function(q,r,s,t,u,v){return{tabID:q,permalinkURI:r?new(c("URI"))(r):null,ftID:s,notifAlertID:t,notificationType:u,title:v,keepAtBottom:false,isTabRaised:false,isBlinkingUnread:false,badgeCount:0,allSeenNewComments:{},unseenCommentsSinceLastCleared:{},hasFakeInitBadge:false}};function p(q,r,s,t){__p&&__p();var u=arguments.length<=4||arguments[4]===undefined?false:arguments[4],v=arguments.length<=5||arguments[5]===undefined?false:arguments[5];this.$ConversationNub13=false;this.$ConversationNub14=false;this.$ConversationNub1=q;this.$ConversationNub12=r;this.$ConversationNub5=c("guid")();this.$ConversationNub7=null;this.$ConversationNub8=false;this.$ConversationNub9=null;this.$ConversationNub10=u;this.$ConversationNub11=v;this.$ConversationNub15=t;this.$ConversationNub6=new(c("SubscriptionsHandler"))();this.$ConversationNub16();this.$ConversationNub17();if(s!=null)l.modifyTabState(this.$ConversationNub12,function(w){if(s)w.hasFakeInitBadge=false;else{w.hasFakeInitBadge=true;this.$ConversationNub18(1);this.$ConversationNub19(true)}}.bind(this));this.$ConversationNub20()}p.prototype.$ConversationNub20=function(){this.$ConversationNub21();this.$ConversationNub22();c("ConversationNubUtils").informShouldRecheckTabVisibility(this);this.forceReflow()};p.prototype.getPersistentState=function(){return l.getTabState(this.$ConversationNub12)};p.prototype.getPersistentStateIfExists=function(){return l.getTabStateIfExists(this.$ConversationNub12)};p.prototype.$ConversationNub16=function(){__p&&__p();var q=this.$ConversationNub23();if(q){this.$ConversationNub6.addSubscriptions(c("EventListener").listen(q,"click",this.$ConversationNub24.bind(this)),c("EventListener").listen(q,"mouseenter",this.$ConversationNub25.bind(this)),c("EventListener").listen(q,"mouseleave",this.$ConversationNub26.bind(this)));var r=c("ConversationNubUtils").getCloseButtonElem(q);if(r)c("ConversationNubUtils").addCloseButtonListeners(r,this.$ConversationNub6,this.$ConversationNub27.bind(this))}var s=this.$ConversationNub28();if(s){l.modifyTabState(this.$ConversationNub12,function(u){u.keepAtBottom=true});this.$ConversationNub6.addSubscriptions(c("EventListener").listen(s,"scroll",c("debounce")(this.$ConversationNub29.bind(this),o)),c("Arbiter").subscribe("reflow",this.$ConversationNub30.bind(this)))}var t=this.$ConversationNub31();if(t)this.$ConversationNub6.addSubscriptions(c("EventListener").listen(t,"focusin",this.$ConversationNub32.bind(this,true)),c("EventListener").listen(t,"focusout",this.$ConversationNub32.bind(this,false)))};p.prototype.$ConversationNub17=function(){__p&&__p();var q=this.$ConversationNub33();if(!q){this.$ConversationNub2=null;return}var r=function(){var t=this.getPersistentState();return{permalinkURI:t.permalinkURI,ftID:t.ftID,tabID:t.tabID}}.bind(this),s=new(c("ConversationNubHeader"))(q,r);this.$ConversationNub6.addSubscriptions(s.subscribe("closeButton",this.$ConversationNub27.bind(this)),s.subscribe("showMenu",this.$ConversationNub34.bind(this)),s.subscribe("hideMenu",this.$ConversationNub35.bind(this)),s.subscribe("minimizeButton",this.$ConversationNub36.bind(this,true)),s.subscribe("clickHeader",this.$ConversationNub36.bind(this,true)),s.subscribe("menuPermalinkClick",this.$ConversationNub36.bind(this,false)),c("UFIComposerIsTypingStore").addListener(function(){var t=this.getPersistentStateIfExists();if(!t)return;var u=this.$ConversationNub14,v=c("UFIComposerIsTypingStore").getValueFor(t.ftID);this.$ConversationNub14=v===true;if(u!==this.$ConversationNub14)c("ConversationNubTabsUpdateEventController").informTabsUpdated()}.bind(this)));this.$ConversationNub2=s};p.prototype.$ConversationNub33=function(){return this.$ConversationNub1&&c("DOM").scry(this.$ConversationNub1,".fbNubFlyoutTitlebar")[0]};p.prototype.$ConversationNub23=function(){return this.$ConversationNub1&&c("DOM").scry(this.$ConversationNub1,".fbNubButton")[0]};p.prototype.$ConversationNub28=function(){if(!this.$ConversationNub3&&this.$ConversationNub1)this.$ConversationNub3=c("DOM").scry(this.$ConversationNub1,".uiScrollableAreaWrap")[0];return this.$ConversationNub3};p.prototype.$ConversationNub31=function(){if(!this.$ConversationNub4&&this.$ConversationNub1)this.$ConversationNub4=c("DOM").scry(this.$ConversationNub1,".fbNubFlyoutBodyContent")[0];return this.$ConversationNub4};p.prototype.$ConversationNub37=function(){var q=this.$ConversationNub23();if(q)return c("DOM").scry(q,"._37op")[0];return null};p.prototype.$ConversationNub27=function(){c("ConversationNubUtils").informShouldCloseTab(this.$ConversationNub12,this.getFeedbackTargetID(),c("ConversationNubUtils").CLOSE_REASON_TAB_X_OUT)};p.prototype.$ConversationNub36=function(q){j(this,q)};p.prototype.$ConversationNub34=function(){this.$ConversationNub1&&c("CSS").addClass(this.$ConversationNub1,"_1uw3")};p.prototype.$ConversationNub35=function(){this.$ConversationNub1&&c("CSS").removeClass(this.$ConversationNub1,"_1uw3")};p.prototype.$ConversationNub24=function(){if(this.getPersistentState().isTabRaised)j(this,true);else k(this,true)};p.prototype.$ConversationNub25=function(){if(this.getPersistentState().isBlinkingUnread)this.$ConversationNub9=new Date()};p.prototype.$ConversationNub26=function(){var q=this.$ConversationNub9;if(q&&this.getPersistentState().isBlinkingUnread){var r=new Date();if(r-q>=n)this.$ConversationNub19(false)}this.$ConversationNub9=null};p.prototype.$ConversationNub38=function(){var q=this.$ConversationNub28();if(q){var r=q.scrollHeight;if(r>0&&!this.$ConversationNub39(q)){this.$ConversationNub8=true;q.scrollTop=r}}};p.prototype.$ConversationNub39=function(q){q=q||this.$ConversationNub28();return!!(q&&q.scrollTop>=q.scrollHeight-q.clientHeight-m)};p.prototype.$ConversationNub29=function(){if(!l.getTabStateIfExists(this.$ConversationNub12)||!this.getPersistentState().isTabRaised)return;l.modifyTabState(this.$ConversationNub12,function(q){q.keepAtBottom=this.$ConversationNub39();c("ConversationNubUtils").informShouldRecheckTabVisibility(this)}.bind(this));if(!this.$ConversationNub8)this.clearJewelNotifications();this.$ConversationNub8=false};p.prototype.$ConversationNub32=function(q){if(this.$ConversationNub13===q)return;this.$ConversationNub13=q;if(this.$ConversationNub13)this.clearJewelNotifications();c("ConversationNubTabsUpdateEventController").informTabsUpdated()};p.prototype.getIsFocused=function(){return this.$ConversationNub13};p.prototype.getPageID=function(){return this.$ConversationNub15};p.prototype.getHasText=function(){return this.$ConversationNub14};p.prototype.$ConversationNub30=function(){__p&&__p();var q=this.getPersistentState();if(!q.isTabRaised)return;if(q.keepAtBottom){this.$ConversationNub38();this.$ConversationNub7&&clearTimeout(this.$ConversationNub7);this.$ConversationNub7=setTimeout(function(){if(q.keepAtBottom)this.$ConversationNub38()}.bind(this),100)}};p.prototype.$ConversationNub18=function(q){l.modifyTabState(this.$ConversationNub12,function(r){r.badgeCount=q;this.$ConversationNub21()}.bind(this))};p.prototype.$ConversationNub19=function(q){l.modifyTabState(this.$ConversationNub12,function(r){r.isBlinkingUnread=q;this.$ConversationNub22()}.bind(this))};p.prototype.$ConversationNub21=function(){__p&&__p();var q=this.$ConversationNub37();if(!q)return;var r=this.getPersistentState().badgeCount,s=r>0;if(s){c("DOM").setContent(q,r);c("CSS").show(q)}else{c("CSS").hide(q);c("DOM").setContent(q,r)}};p.prototype.$ConversationNub22=function(){if(this.$ConversationNub1){var q=this.getPersistentState().isBlinkingUnread;if(this.$ConversationNub1)c("CSS").conditionClass(this.$ConversationNub1,"_53tf",q)}};p.prototype.getRootDOM=function(){return this.$ConversationNub1};p.prototype.getShouldShowIntroNux=function(){return this.$ConversationNub10};p.prototype.getShouldShowHideNux=function(){return this.$ConversationNub11};p.prototype.getTabID=function(){return this.$ConversationNub12};p.prototype.getNotificationPayloadAlertID=function(){return this.getPersistentState().notifAlertID};p.prototype.getNotificationType=function(){return this.getPersistentState().notificationType};p.prototype.setNotificationType=function(q){l.modifyTabState(this.$ConversationNub12,function(r){r.notificationType=q})};p.prototype.getFeedbackTargetID=function(){return this.getPersistentState().ftID};p.prototype.getPermalinkURI=function(){return this.getPersistentState().permalinkURI};p.prototype.getTitle=function(){return this.getPersistentState().title};p.prototype.getBadgeCount=function(){return this.getPersistentState().badgeCount};p.prototype.getIsRaised=function(){return this.getPersistentState().isTabRaised};p.prototype.getSessionID=function(){return this.$ConversationNub5};p.prototype.markCommentsAsSeenWithoutBadging=function(q){l.modifyTabState(this.$ConversationNub12,function(r){q.forEach(function(s){r.allSeenNewComments[s]=true})})};p.prototype.attemptAddNewCommentsToBadge=function(q){__p&&__p();l.modifyTabState(this.$ConversationNub12,function(r){__p&&__p();q.forEach(function(u){if(r.allSeenNewComments[u])return;r.allSeenNewComments[u]=true;r.unseenCommentsSinceLastCleared[u]=true});var s=Object.keys(r.unseenCommentsSinceLastCleared).length;if(r.hasFakeInitBadge)s+=1;var t=r.badgeCount;this.$ConversationNub18(s);this.$ConversationNub19(s>0&&s>t)}.bind(this))};p.prototype.clearBadge=function(){l.clearTabNotifications(this.$ConversationNub12);this.$ConversationNub21();this.$ConversationNub22()};p.prototype.clearJewelNotifications=function(){var q=this.getNotificationPayloadAlertID();if(q)c("NotificationUserActions").markNotificationsAsRead([q])};p.prototype.popOutAndInformTabUpdate=function(){this.popOut();c("ConversationNubTabsUpdateEventController").informTabsUpdated()};p.prototype.popOut=function(){l.modifyTabState(this.$ConversationNub12,function(q){if(this.$ConversationNub1)c("CSS").addClass(this.$ConversationNub1,"_5r93");q.isTabRaised=true;this.clearBadge();if(q.keepAtBottom)this.$ConversationNub38()}.bind(this))};p.prototype.minimize=function(){l.modifyTabState(this.$ConversationNub12,function(q){if(this.$ConversationNub1)c("CSS").removeClass(this.$ConversationNub1,"_5r93");q.isTabRaised=false;this.$ConversationNub2&&this.$ConversationNub2.hideMenu();this.clearBadge()}.bind(this))};p.prototype.forceReflow=function(){this.$ConversationNub30()};p.prototype.isFormForThisUFI=function(q){return this.$ConversationNub1&&c("containsNode")(this.$ConversationNub1,q)};p.prototype.destroy=function(){__p&&__p();this.$ConversationNub6.release();this.$ConversationNub2&&this.$ConversationNub2.destroy();this.$ConversationNub2=null;this.$ConversationNub7&&clearTimeout(this.$ConversationNub7);this.minimize();if(this.$ConversationNub1){c("DOM").remove(this.$ConversationNub1);c("Arbiter").inform("ConversationNub/destroy",{root:this.$ConversationNub1});this.$ConversationNub1=null}};f.exports=p}),null);
__d("ConversationNubAddCommentSubscription",["Arbiter","ConversationNubTabState","UFIUIEvents"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){return c("Arbiter").subscribe(c("UFIUIEvents").Comment,function(j,k){var l=k.ft_id,m=k.form;if(!l||!m)return;var n=c("ConversationNubTabState").getLoadedTabByFeedbackTarget(l);if(n&&n.isFormForThisUFI(m))i(n,l)})}f.exports={subscribe:h}}),null);
__d("XConversationNubActionTakenController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/conversation/nub_story/action_taken/",{})}),null);
__d("ConversationNubActionTakenReporter",["Arbiter","AsyncRequest","ConversationNubAddCommentSubscription","ConversationNubUtils","PinnedConversationNubsActionTaken","SubscriptionsHandler","XConversationNubActionTakenController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.$ConversationNubActionTakenReporter2=function(i,j){this.$ConversationNubActionTakenReporter4(j,c("PinnedConversationNubsActionTaken").COMMENT_ADDED)}.bind(this);this.$ConversationNubActionTakenReporter3=function(event,i){var j=i.tabID,k=i.ftID,l=i.tabState,m=i.sessionID,n=i.reason;if(n===c("ConversationNubUtils").CLOSE_REASON_TAB_X_OUT||n===c("ConversationNubUtils").CLOSE_REASON_OVERFLOW_X_OUT||n===c("ConversationNubUtils").CLOSE_REASON_UNPIN)this.$ConversationNubActionTakenReporter4(k,c("PinnedConversationNubsActionTaken").TAB_CLOSED_BY_USER)}.bind(this);this.$ConversationNubActionTakenReporter1=new(c("SubscriptionsHandler"))(c("ConversationNubAddCommentSubscription").subscribe(this.$ConversationNubActionTakenReporter2),c("Arbiter").subscribe(c("ConversationNubUtils").CLOSE_TAB_EVENT,this.$ConversationNubActionTakenReporter3))}h.prototype.destroy=function(){this.$ConversationNubActionTakenReporter1.release()};h.prototype.$ConversationNubActionTakenReporter4=function(i,j){var k=c("XConversationNubActionTakenController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(k).setMethod("POST").setData({ft_id:i,action:j}).setAllowCrossPageTransition(true).send()};f.exports=h}),null);
__d("ConversationNubHeader",["csx","ArbiterMixin","Bootloader","ConversationNubUtils","DOM","Event","EventListener","Keys","SubscriptionsHandler","ifRequired","mixin"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;function k(m,n){return c("EventListener").listen(m,"keydown",function(o){if(c("Event").getKeyCode(o)===c("Keys").RETURN)n(o)})}i=babelHelpers.inherits(l,c("mixin")(c("ArbiterMixin")));j=i&&i.prototype;function l(m,n){j.constructor.call(this);this.$ConversationNubHeader6=false;this.$ConversationNubHeader1=m;this.$ConversationNubHeader3=n;this.$ConversationNubHeader4=null;this.$ConversationNubHeader5=false;this.$ConversationNubHeader2=new(c("SubscriptionsHandler"))();this.$ConversationNubHeader7()}l.prototype.$ConversationNubHeader7=function(){__p&&__p();var m=this.$ConversationNubHeader1;this.$ConversationNubHeader2.addSubscriptions(c("EventListener").listen(m,"click",this.$ConversationNubHeader8.bind(this)));var n=c("ConversationNubUtils").getCloseButtonElem(m);if(n)c("ConversationNubUtils").addCloseButtonListeners(n,this.$ConversationNubHeader2,this.$ConversationNubHeader9.bind(this));var o=this.$ConversationNubHeader10();if(o)this.$ConversationNubHeader2.addSubscriptions(c("EventListener").listen(o,"click",this.$ConversationNubHeader11.bind(this)),k(o,this.$ConversationNubHeader11.bind(this)));var p=this.$ConversationNubHeader12();if(p)this.$ConversationNubHeader2.addSubscriptions(c("EventListener").listen(p,"click",this.$ConversationNubHeader13.bind(this)),c("EventListener").listen(p,"mouseover",this.$ConversationNubHeader14.bind(this)),c("EventListener").listen(p,"focus",this.$ConversationNubHeader15.bind(this)),k(p,this.$ConversationNubHeader16.bind(this)))};l.prototype.$ConversationNubHeader12=function(){return c("DOM").scry(this.$ConversationNubHeader1,"._1rf1")[0]};l.prototype.$ConversationNubHeader10=function(){return c("DOM").scry(this.$ConversationNubHeader1,"._4a56")[0]};l.prototype.$ConversationNubHeader17=function(){return c("ConversationNubUtils").getCloseButtonElem(this.$ConversationNubHeader1)};l.prototype.$ConversationNubHeader9=function(){this.inform("closeButton")};l.prototype.$ConversationNubHeader11=function(m){if(m.type==="click")m.kill();this.inform("minimizeButton")};l.prototype.$ConversationNubHeader8=function(){this.inform("clickHeader")};l.prototype.$ConversationNubHeader18=function(){this.inform("showMenu")};l.prototype.$ConversationNubHeader19=function(){this.inform("hideMenu");var m=this.$ConversationNubHeader12();m&&m.blur()};l.prototype.$ConversationNubHeader20=function(){this.inform("menuPermalinkClick")};l.prototype.$ConversationNubHeader21=function(m){__p&&__p();if(this.$ConversationNubHeader4)return;var n=this.$ConversationNubHeader12();if(!n)return;if(m)this.$ConversationNubHeader5=true;c("Bootloader").loadModules(["React","ReactDOM","ConversationNubHeaderMenu.react"],function(o,p,q){if(this.$ConversationNubHeader6)return;var r=babelHelpers["extends"]({},this.$ConversationNubHeader3(),{onMenuShow:this.$ConversationNubHeader18.bind(this),onMenuHide:this.$ConversationNubHeader19.bind(this),onPermalinkClick:this.$ConversationNubHeader20.bind(this),showOnMount:this.$ConversationNubHeader5});this.$ConversationNubHeader4=p.render(o.createElement(q,r),n)}.bind(this),"ConversationNubHeader")};l.prototype.$ConversationNubHeader13=function(m){m.kill();this.$ConversationNubHeader21(true)};l.prototype.$ConversationNubHeader14=function(){this.$ConversationNubHeader21(false)};l.prototype.$ConversationNubHeader15=function(){this.$ConversationNubHeader21(false)};l.prototype.$ConversationNubHeader16=function(){if(this.$ConversationNubHeader4)this.$ConversationNubHeader4.toggle();else this.$ConversationNubHeader21(true)};l.prototype.hideMenu=function(){this.$ConversationNubHeader4&&this.$ConversationNubHeader4.hide()};l.prototype.destroy=function(){this.$ConversationNubHeader6=true;var m=this.$ConversationNubHeader12();if(m&&this.$ConversationNubHeader4)c("ifRequired")("ReactDOM",function(n){n.unmountComponentAtNode(m)});this.$ConversationNubHeader2.release()};f.exports=l}),null);
__d("ConversationNubTabsUpdateEventController",["Arbiter","ConversationNubUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="ConversationNub/tabsUpdated",i="ConversationNub/minimizedByUser",j="ConversationNub/maximizedByUser",k=false;function l(p){if(!k)c("Arbiter").inform(h,p)}function m(p){return c("Arbiter").subscribe(h,function(q,r){k=true;p(r);k=false})}function n(p,q){q&&c("Arbiter").inform(i,{tab:p});p.minimize();l()}function o(p,q){if(!q&&!c("ConversationNubUtils").allowProgrammaticPopOut())return;q&&c("Arbiter").inform(j,{tab:p});p.popOut();l()}f.exports={TAB_MINIMIZED_BY_USER_EVENT:i,TAB_MAXIMIZED_BY_USER_EVENT:j,informTabsUpdated:l,subscribeToTabsUpdated:m,minimizeAndInformTabUpdate:n,popOutAndInformTabUpdate:o}}),null);
__d("XConversationNubTogglePinController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/conversation/nub_story/toggle_pin/",{ft_id:{type:"String"},pin:{type:"Bool",defaultValue:false},with_render:{type:"Bool",defaultValue:false},notif_setting:{type:"Enum",enumType:1}})}),null);
__d("XConversationsToggleController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/conversation/toggle_feature/",{turn_conversations_on:{type:"Bool",defaultValue:false}})}),null);
__d("isBusinessURI",["isFacebookURI"],(function a(b,c,d,e,f,g){"use strict";function h(i){return c("isFacebookURI")(i)&&i.getSubdomain()==="business"}f.exports=h}),null);
__d("isGamesURI",["isFacebookURI"],(function a(b,c,d,e,f,g){"use strict";function h(i){return c("isFacebookURI")(i)&&i.getPath().startsWith("/games")}f.exports=h}),null);
__d("ConversationNubUtils",["csx","Arbiter","AsyncRequest","ConversationNubTabState","DOM","Event","EventListener","Keys","NotificationConversationController","URI","XConversationNubTogglePinController","XConversationsToggleController","isBusinessURI","isCanvasAppURI","isGamesURI"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ConversationNubTabState"),j=Object.freeze({DISABLE:"disable",ENABLE:"enable"}),k="ConversationNubUtils/closeTab",l="ConversationNubUtils/unpinnedFromHeader",m="ConversationNubUtils/recheckTabVisibility",n="ConversationNubUtils/openPermalinkFromHeader",o="ConversationNubUtils/turnOff",p="ConversationNubUtils/turnOn",q="tab-x-out",r="browser-tab-sync",s="overflow-x-out",t="unpin";function u(O){var P=Object.values(j);return P.find(function(Q){return Q===O})||null}function v(O,P,Q,R){var S=R||{},T=S.notif_setting,U=c("XConversationNubTogglePinController").getURIBuilder().setString("ft_id",String(O)).setBool("pin",P);if(T)U.setEnum("notif_setting",T);var V=U.getURI(),W=new(c("AsyncRequest"))().setURI(V).setMethod("POST");if(Q)W.setAllowCrossPageTransition(true);W.send()}function w(E){var O=c("XConversationsToggleController").getURIBuilder().setBool("turn_conversations_on",E).getURI();E?N():M();var P=new(c("AsyncRequest"))().setURI(O).setAllowCrossPageTransition(true).setHandler(function(Q){if(Q.getPayload().conversationsStatus)N();else M()}).setErrorHandler(function(Q){E?M():N()}).setMethod("POST");P.send()}function x(O,P,Q){v(O,true,P,Q)}function y(O,P,Q){v(O,false,P,Q)}function z(O,P){x(O,false,P)}function A(O,P){y(O,false,P)}function B(O,P){x(O,true,P)}function C(O,P){y(O,true,P)}function D(){w(false);c("NotificationConversationController").deleteAllTabs()}function E(){w(true)}function F(O){return c("DOM").scry(O,"._4iz6")[0]}function G(O,P,Q){var R=function R(){Q()};P.addSubscriptions(c("EventListener").listen(O,"click",R),c("EventListener").listen(O,"keydown",function(S){if(c("Event").getKeyCode(S)===c("Keys").RETURN)R()}))}function H(){var O=c("URI").getRequestURI();return!c("isCanvasAppURI")(O)&&!c("isBusinessURI")(O)&&!c("isGamesURI")(O)}function I(O,P,Q){var R=i.getLoadedTab(O);if(!R)return;var S=R.getPersistentState(),T=R.getSessionID(),U=R.getPageID();c("Arbiter").inform(k,{tabID:O,ftID:P,tabState:S,sessionID:T,reason:Q,pageID:U})}function J(O){var P=i.getLoadedTab(O);if(!P)return;c("Arbiter").inform(l,{tab:P})}function K(O){c("Arbiter").inform(m,{tab:O})}function L(O){var P=i.getLoadedTab(O);if(!P)return;c("Arbiter").inform(n,{tab:P})}function M(){c("Arbiter").inform(o,{})}function N(){c("Arbiter").inform(p,{})}f.exports={CLOSE_TAB_EVENT:k,UNPIN_FROM_HEADER_EVENT:l,OPEN_PERMALINK_FROM_HEADER_EVENT:n,TURN_CONVERSATIONS_OFF_EVENT:o,TURN_CONVERSATIONS_ON_EVENT:p,CLOSE_REASON_TAB_X_OUT:q,CLOSE_REASON_SYNCHRONIZED_FROM_OTHER_TAB:r,CLOSE_REASON_OVERFLOW_X_OUT:s,CLOSE_REASON_UNPIN:t,coerceToPinRequestNotifSetting:u,sendPinRequest:z,sendUnpinRequest:A,sendPinRequestAcrossTransitions:B,sendUnpinRequestAcrossTransitions:C,getCloseButtonElem:F,addCloseButtonListeners:G,informShouldCloseTab:I,informDidUnpinFromHeaderMenu:J,informShouldRecheckTabVisibility:K,informOpenPermalinkFromHeader:L,allowProgrammaticPopOut:H,turnConversationsOff:D,turnConversationsOn:E}}),null);
__d("ConversationNubPermalinkUtils",["URI","isFacebookURI"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(l){return l.substr(-1)==="/"?l.slice(0,-1):l}function i(l,m){var n=l.getPath(),o=m.getPath();return h(n)===h(o)}function j(l,m,n){var o=l.getQueryData(),p=m.getQueryData(),q=o[n],r=p[n];if(q==null&&r==null)return true;return q===r}function k(l){var m=new(c("URI"))(window.location.href);return m&&l&&c("isFacebookURI")(m)&&c("isFacebookURI")(l)&&i(m,l)&&j(m,l,"fbid")&&j(m,l,"story_fbid")}f.exports={isOnPermalink:k}}),null);
__d("Dock",["csx","Event","shield","Arbiter","ArbiterMixin","BlueBar","ChatQuietLinks","CSS","DataStore","DOM","Parent","Scroll","Style","Toggler","Vector","emptyFunction"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(){}Object.assign(i,c("ArbiterMixin"),{MIN_HEIGHT:140,INITIAL_FLYOUT_HEIGHT_OFFSET:10,init:function j(k){__p&&__p();this.init=c("emptyFunction");this.rootEl=k;this.calculateViewportDimensions();c("ChatQuietLinks").removeEmptyHrefs(this.rootEl);c("Event").listen(k,"click",this._onClick.bind(this));c("Event").listen(window,"resize",this._onWindowResize.bind(this));c("Toggler").subscribe(["show","hide"],function(l,m){__p&&__p();var n=m.getActive();if(!c("DOM").contains(k,n))return;if(c("CSS").hasClass(n,"fbNub")){this.notifyNub(n,l);if(l==="show")this._resizeNubFlyout(n)}else{var o=c("Parent").byClass(n,"fbNubFlyout");if(o)c("CSS").conditionClass(o,"menuOpened",l==="show")}}.bind(this));this.inform("init",{},c("Arbiter").BEHAVIOR_PERSISTENT)},calculateViewportDimensions:function j(){return this.viewportDimensions=c("Vector").getViewportDimensions()},getFlyoutHeightOffset:function j(){if(this.flyoutHeightOffset)return this.flyoutHeightOffset;this.flyoutHeightOffset=this.INITIAL_FLYOUT_HEIGHT_OFFSET+c("Vector").getElementDimensions(this.rootEl).y;var k=c("BlueBar").getBar();if(k){var l=c("Style").isFixed(k)?"viewport":"document";this.flyoutHeightOffset+=c("Vector").getElementPosition(k,l).y+c("Vector").getElementDimensions(k).y}return this.flyoutHeightOffset},toggle:function j(k){var l=this._findFlyout(k);if(!l)return;this.subscribe("init",function(){c("Toggler").toggle(k)})},show:function j(k){this.subscribe("init",function(){c("Toggler").show(k)})},showNub:function j(k){c("CSS").show(k)},hide:function j(k){this.subscribe("init",function(){var l=c("Toggler").getInstance(k);c("DOM").contains(k,l.getActive())&&l.hide()})},hideNub:function j(k){c("CSS").hide(k);this.hide(k)},setUseMaxHeight:function j(k,l){c("CSS").conditionClass(k,"maxHeight",l!==false);this._resizeNubFlyout(k)},_resizeNubFlyout:function j(k){__p&&__p();var l=this._findFlyout(k);if(!l||c("CSS").hasClass(k,"placeholder")||!(c("CSS").hasClass(k,"openToggler")||c("CSS").hasClass(k,"opened")))return;var m=c("DOM").find(l,"div.fbNubFlyoutOuter"),n=c("DOM").find(m,"div.fbNubFlyoutInner"),o=c("DOM").find(n,"div.fbNubFlyoutBody"),p=c("CSS").hasClass(k,"canBeCompactTab"),q=c("Scroll").getTop(o),r=o.offsetHeight;c("Style").set(o,"height","auto");var s=c("Vector").getElementDimensions(l),t=c("Vector").getElementDimensions(o),u=this.getMaxFlyoutHeight(k);c("Style").set(l,"max-height",u+"px");c("Style").set(m,"max-height",u+"px");s=c("Vector").getElementDimensions(l);var v=c("Vector").getElementDimensions(n),w=v.y-t.y,x=s.y-w,y=parseInt(o.style.height||o.clientHeight,10),z=x!==y;if(s.y>w&&z&&!p)c("Style").set(o,"height",x+"px");c("CSS").removeClass(l,"swapDirection");var A=c("Vector").getElementPosition(l).x;c("CSS").conditionClass(l,"swapDirection",function(){if(A<0)return true;if(!s||!this.viewportDimensions)return false;return A+s.x>this.viewportDimensions.x}.bind(this)());if(z&&q+r>=t.y)c("Scroll").setTop(o,o.scrollHeight);else c("Scroll").setTop(o,q);this.notifyNub(k,"resize")},getMaxFlyoutHeight:function j(k){var l=this._findFlyout(k),m=c("Vector").getElementPosition(l,"viewport"),n=c("Vector").getElementDimensions(l);if(!this.viewportDimensions||!m)return 0;var o=Math.max(this.MIN_HEIGHT,this.viewportDimensions.y-this.getFlyoutHeightOffset())-(this.viewportDimensions.y-m.y-n.y);return Math.max(o,0)},resizeAllFlyouts:function j(){var k=this._getAllNubs(),l=k.length;while(l--)this._resizeNubFlyout(k[l])},_getAllNubs:function j(){var k=c("DOM").scry(this.rootEl,"div._50-v.openToggler:not(._s0f)");return k.concat(c("DOM").scry(this.rootEl,"div._50-v.opened:not(._s0f)"))},_onClick:function j(event){__p&&__p();var k=event.getTarget(),l=c("Parent").byClass(k,"fbNub");if(l){if(c("Parent").byClass(k,"fbNubFlyoutTitlebar")){var m=c("Parent").byTag(k,"a"),n=k.nodeName=="INPUT"&&k.getAttribute("type")=="submit";if(!m&&!n){this.hide(l);return false}}this.notifyNub(l,"click")}},_onWindowResize:function j(event){this.calculateViewportDimensions();this.resizeAllFlyouts()},_findFlyout:function j(k){return c("CSS").hasClass(k,"fbNubFlyout")?k:c("DOM").scry(k,"div.fbNubFlyout")[0]||null},registerNubController:function j(k,l){c("DataStore").set(k,"dock:nub:controller",l);l.subscribe("nub/button/content-changed",c("shield")(this.inform,this,"resize",k));l.subscribe("nub/flyout/content-changed",c("shield")(this._resizeNubFlyout,this,k))},unregisterNubController:function j(k){c("DataStore").remove(k,"dock:nub:controller")},notifyNub:function j(k,l,m){var n=c("DataStore").get(k,"dock:nub:controller");n&&n.inform(l,m)}});f.exports=b.Dock||i}),null);
__d("DockTabsViewportFantaTabUtils",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=269;function i(){return h+1}function j(m){return Math.floor(m/h)}function k(m){if(!m)return null;var n=m.fantaTabModelStateGetter;return n?n():null}function l(m){return m?m.size:0}f.exports={getTabCountToFitWidth:j,getMinRequiredWidthForFirstFantaTab:i,getFantaTabModelFromCallbacks:k,getNumFantaTabsFromModel:l}}),null);
__d("DockTabsViewportPinnedConversationTabUtils",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=496+9+2,i=210+9+2,j=52;function k(){return h}function l(){return i}function m(){return j}function n(r){return r.getIsRaised()?k():l()}function o(){return k()+j}function p(r){var s=r||{},t=s.pinnedConvoTabStateGetter;return t?t():null}function q(r){return r?r.getTotalTabCount():0}f.exports={getRaisedPinnedConvoTabWidth:k,getLoweredPinnedConvoTabWidth:l,getPinnedConvoSelectorWidth:m,getPinnedConvoTabWidth:n,getMinRequiredWidthForFirstConvoTab:o,getPinnedConvoTabsStateFromCallbacks:p,getNumPinnedConvoTabsFromModel:q}}),null);
__d("DockTabsViewportCalculator",["csx","Arbiter","DataStore","Dock","DockTabsViewportFantaTabUtils","DockTabsViewportPinnedConversationTabUtils","DOM","Event","FullScreen","SubscriptionsHandler","Vector","ViewportBounds","ge","getViewportDimensions","setImmediate"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=50,j=35,k=j,l="dock-tab-viewport-inst",m=c("DockTabsViewportFantaTabUtils").getMinRequiredWidthForFirstFantaTab,n=c("DockTabsViewportFantaTabUtils").getFantaTabModelFromCallbacks,o=c("DockTabsViewportFantaTabUtils").getNumFantaTabsFromModel,p=c("DockTabsViewportPinnedConversationTabUtils").getMinRequiredWidthForFirstConvoTab,q=c("DockTabsViewportPinnedConversationTabUtils").getNumPinnedConvoTabsFromModel,r=c("DockTabsViewportPinnedConversationTabUtils").getPinnedConvoTabsStateFromCallbacks;function s(u){return u?c("Vector").getElementDimensions(u).x:0}function t(u){__p&&__p();this.$DockTabsViewportCalculatorImpl1=u;this.$DockTabsViewportCalculatorImpl3=0;this.$DockTabsViewportCalculatorImpl4=0;this.$DockTabsViewportCalculatorImpl5=null;this.$DockTabsViewportCalculatorImpl6=null;this.$DockTabsViewportCalculatorImpl7=false;this.$DockTabsViewportCalculatorImpl8=false;this.$DockTabsViewportCalculatorImpl9=false;this.$DockTabsViewportCalculatorImpl2=new(c("SubscriptionsHandler"))();this.$DockTabsViewportCalculatorImpl10();this.$DockTabsViewportCalculatorImpl11()}t.prototype.$DockTabsViewportCalculatorImpl10=function(){__p&&__p();var u=this.$DockTabsViewportCalculatorImpl12.bind(this);this.$DockTabsViewportCalculatorImpl2.addSubscriptions(c("Event").listen(window,"resize",u),c("Dock").subscribe("resize",u),c("Arbiter").subscribeOnce("sidebar/initialized",u,c("Arbiter").SUBSCRIBE_NEW),c("FullScreen").subscribe("changed",function(){__p&&__p();if(c("FullScreen").isFullScreen()){this.$DockTabsViewportCalculatorImpl7=true;this.$DockTabsViewportCalculatorImpl8=false}else{this.$DockTabsViewportCalculatorImpl7=false;if(this.$DockTabsViewportCalculatorImpl8){c("setImmediate")(function(){u()});this.$DockTabsViewportCalculatorImpl8=false}}}.bind(this)))};t.prototype.registerFantaTabCallbacks=function(u){this.$DockTabsViewportCalculatorImpl5=u};t.prototype.registerPinnedConvoTabCallbacks=function(u){this.$DockTabsViewportCalculatorImpl6=u};t.prototype.forceRecalculateFBDockWidth=function(){this.$DockTabsViewportCalculatorImpl11();this.$DockTabsViewportCalculatorImpl13({forceRecalculateChatTabs:false,pinnedConvoUpdateData:null})};t.prototype.forceRecalculateChatTabs=function(){this.$DockTabsViewportCalculatorImpl13({forceRecalculateChatTabs:true,pinnedConvoUpdateData:null})};t.prototype.forceRecalculatePinnedConvoTabs=function(u){this.$DockTabsViewportCalculatorImpl13({forceRecalculateChatTabs:true,pinnedConvoUpdateData:u})};t.prototype.$DockTabsViewportCalculatorImpl12=function(){if(c("FullScreen").isFullScreen()||this.$DockTabsViewportCalculatorImpl7){this.$DockTabsViewportCalculatorImpl8=true;return}this.forceRecalculateFBDockWidth()};t.prototype.$DockTabsViewportCalculatorImpl13=function(u){var v=u.forceRecalculateChatTabs,w=u.pinnedConvoUpdateData,x=this.$DockTabsViewportCalculatorImpl14(),y=x.chatTabAvailableWidth,z=x.pinnedConvoTabAvailableWidth;this.$DockTabsViewportCalculatorImpl15(y,!!v);this.$DockTabsViewportCalculatorImpl16(z,w)};t.prototype.$DockTabsViewportCalculatorImpl16=function(u,v){var w=this.$DockTabsViewportCalculatorImpl6||{},x=w.onAvailableWidthChanged;x&&x(u,v)};t.prototype.$DockTabsViewportCalculatorImpl15=function(u,v){var w=this.$DockTabsViewportCalculatorImpl5||{},x=w.onAvailableWidthChanged;x&&x(u)};t.prototype.$DockTabsViewportCalculatorImpl17=function(){var u=n(this.$DockTabsViewportCalculatorImpl5);return o(u)};t.prototype.$DockTabsViewportCalculatorImpl18=function(){return m()};t.prototype.$DockTabsViewportCalculatorImpl14=function(){__p&&__p();var u=this.$DockTabsViewportCalculatorImpl3,v={chatTabAvailableWidth:u,pinnedConvoTabAvailableWidth:0},w={chatTabAvailableWidth:0,pinnedConvoTabAvailableWidth:u},x=this.$DockTabsViewportCalculatorImpl17(),y=r(this.$DockTabsViewportCalculatorImpl6),z=q(y);if(!y||z===0)return v;else if(x===0)return w;var A=this.$DockTabsViewportCalculatorImpl18();if(u<=A)return v;var B=p(),C=u-A,D=0;if(C<B)return v;else D=B;var E=D,F=Math.max(A,u-D);return{chatTabAvailableWidth:F,pinnedConvoTabAvailableWidth:E}};t.prototype.$DockTabsViewportCalculatorImpl11=function(){this.$DockTabsViewportCalculatorImpl3=this.$DockTabsViewportCalculatorImpl19();this.$DockTabsViewportCalculatorImpl20("DockTabsViewportCalculator/recalcTotalDock_FOR_TEST_ONLY")};t.prototype.$DockTabsViewportCalculatorImpl21=function(){var u=this.$DockTabsViewportCalculatorImpl1;if(!u)return{buddyListNubWidth:0,employeeNubsWidth:0};var v=s(u),w=s(c("DOM").find(u,"._56ox")),x=s(c("DOM").scry(u,"._56oy")[0]),y=s(c("DOM").scry(u,"._ph1")[0]),z=Math.max(v-w-x-y,0);return{buddyListNubWidth:w,employeeNubsWidth:z}};t.prototype.$DockTabsViewportCalculatorImpl19=function(){var u=c("getViewportDimensions").withoutScrollbars().width;u-=c("ViewportBounds").getLeft()+c("ViewportBounds").getRight();u-=i;var v=this.$DockTabsViewportCalculatorImpl21(),w=v.buddyListNubWidth,x=v.employeeNubsWidth;u-=w;this.$DockTabsViewportCalculatorImpl4=Math.max(this.$DockTabsViewportCalculatorImpl4,x);u-=this.$DockTabsViewportCalculatorImpl4;u-=k;return Math.max(u,0)};t.prototype.enableTestInforms_FOR_TEST_ONLY=function(){this.$DockTabsViewportCalculatorImpl9=true};t.prototype.$DockTabsViewportCalculatorImpl20=function(u){if(this.$DockTabsViewportCalculatorImpl9)c("Arbiter").inform(u)};t.prototype.getChatTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$DockTabsViewportCalculatorImpl14().chatTabAvailableWidth};t.prototype.getPinnedConvoTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$DockTabsViewportCalculatorImpl14().pinnedConvoTabAvailableWidth};t.prototype.getAvailableTotalWidth_FOR_TEST_ONLY=function(){return this.$DockTabsViewportCalculatorImpl3};f.exports={getInstance:function u(v){__p&&__p();var w=c("ge")("pagelet_dock");if(!w||!c("DOM").contains(w,v))return null;var x=c("DataStore").get(w,l);if(x instanceof t)return x;var y=c("DOM").scry(w,".fbDockWrapperRight .fbDock")[0];x=new t(y);c("DataStore").set(w,l,x);return x}}}),null);
__d("ConversationNubViewportManager",["DockTabsViewportCalculator","DockTabsViewportPinnedConversationTabUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("DockTabsViewportPinnedConversationTabUtils").getMinRequiredWidthForFirstConvoTab;function i(j,k,l){this.$ConversationNubViewportManager1=j;this.$ConversationNubViewportManager3=k;this.$ConversationNubViewportManager2=c("DockTabsViewportCalculator").getInstance(this.$ConversationNubViewportManager1);this.$ConversationNubViewportManager2&&this.$ConversationNubViewportManager2.registerPinnedConvoTabCallbacks(babelHelpers["extends"]({},l,{pinnedConvoTabStateGetter:function(){return this.$ConversationNubViewportManager3}.bind(this)}))}i.prototype.getNumDockTabsToShow=function(j){return this.getCouldFitAtLeastOneDockTab(j)?1:0};i.prototype.getCouldFitAtLeastOneDockTab=function(j){var k=h();return k<=j};i.prototype.forceRecalculatePinnedConvoTabs=function(j){this.$ConversationNubViewportManager2&&this.$ConversationNubViewportManager2.forceRecalculatePinnedConvoTabs(j)};f.exports=i}),null);
__d("ConversationNubVisibilityDedupeUtils",["Bootloader","emptyFunction","ifRequired"],(function a(b,c,d,e,f,g){"use strict";function h(j){c("Bootloader").loadModules(["UFICommentVisibilityStore"],j,"ConversationNubVisibilityDedupeUtils")}function i(j){return c("ifRequired")("UFICommentVisibilityStore",function(k){return k.isFeedbackTargetVisible(j)},c("emptyFunction").thatReturnsFalse)}f.exports={bootloadUFIVisibilityModule:h,isFeedbackTargetVisible:i}}),null);
__d("XNotificationNubStoryController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/conversation/nub_story/",{notif_alert_id:{type:"String"},notif_id:{type:"Int"},ft_id:{type:"String"},force_minimized:{type:"Bool",defaultValue:false}})}),null);
__d("NotificationConversationController",["csx","cx","Arbiter","AsyncRequest","Bootloader","ConversationNub","ConversationNubActionTakenReporter","ConversationNubPermalinkUtils","ConversationNubTabState","ConversationNubTabsUpdateEventController","ConversationNubUtils","ConversationNubViewportManager","ConversationNubVisibilityDedupeUtils","CSS","DOM","PinnedConversationNubsConfig","SubscriptionsHandler","URI","XNotificationNubStoryController","ge","ifRequired","nullthrows"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ConversationNubVisibilityDedupeUtils").isFeedbackTargetVisible,k=1,l=c("ConversationNubTabState"),m=Object.create(null),n=null,o=null,p=null,q=null,r=null,s=null,t=false,u=null,v=null,w=null,x=null,y=Object.create(null);function z(){if(!o)o=c("DOM").scry(c("ge")("pagelet_dock"),"._1mw-")[0];return o}function A(){if(!p){var D=z();if(D)p=c("DOM").scry(D,"._1tvj")[0]}return p}function B(){if(!q){var D=z();if(D)q=c("DOM").scry(D,"._2ikx .fbNubButton")[0]}return q}C.prototype.init=function(){__p&&__p();if(t)return;t=true;var D=new(c("SubscriptionsHandler"))();D.addSubscriptions(c("ConversationNubTabsUpdateEventController").subscribeToTabsUpdated(this.$NotificationConversationController2.bind(this)),c("Arbiter").subscribe(c("ConversationNubUtils").CLOSE_TAB_EVENT,function(E,F){var G=F||{},H=G.tabID;if(H)this.$NotificationConversationController3(H)}.bind(this)));this.$NotificationConversationController1=new(c("ConversationNubActionTakenReporter"))();u=D};C.prototype.$NotificationConversationController4=function(D){var E=n?n.getNumDockTabsToShow(D):k;l.setMaxDockTabs(E)};C.prototype.$NotificationConversationController5=function(D,E){this.$NotificationConversationController4(D);if(E){var F=E.tabToPromote,G=E.tabToOpenIfInDock;if(F&&!l.isTabInDock(F.getTabID()))l.moveTabToDockLeft(F.getTabID());if(c("ConversationNubUtils").allowProgrammaticPopOut()&&G&&l.isTabInDock(G.getTabID()))G.popOut()}this.$NotificationConversationController6(D)};C.prototype.$NotificationConversationController2=function(D){n&&n.forceRecalculatePinnedConvoTabs(D)};C.prototype.$NotificationConversationController6=function(D){__p&&__p();var E=l.getTotalTabCount(),F=l.getNumDockTabs(),G=n?n.getCouldFitAtLeastOneDockTab(D):false,H=E>0&&G,I=F<E&&H,J=z();if(J){c("CSS").conditionClass(J,"_1tvf",H);c("CSS").conditionClass(J,"_1dex",I);c("CSS").conditionClass(J,"_1tvi",I)}var K=c("PinnedConversationNubsConfig").pinnedToLeft?l.getTabsForDockOldestFirst():l.getTabsForDockNewestFirst();K.forEach(function(M){if(M.getIsRaised())M.clearBadge()});var L=l.getTabsForMenuNewestFirst();this.$NotificationConversationController7(K);this.$NotificationConversationController8(L)};C.prototype.handleNotificationsRead=function(D){__p&&__p();this.init();l.getUnsortedLoadedTabs().forEach(function(F){var G=F.getNotificationPayloadAlertID();if(G&&D[G])F.clearBadge()});l.getUnloadedTabs().forEach(function(F){if(F.notifAlertID&&D[F.notifAlertID])l.clearTabNotifications(F.tabID)});var E=l.getTabsForMenuNewestFirst();this.$NotificationConversationController8(E)};C.prototype.handleNewNotificationFromGraphQL=function(D,E){this.init();var F=c("nullthrows")(D),G=F.tab_id,H=F.notification,I=F.feedback_target_id,J=F.permalink_uri,K=c("nullthrows")(H),L=K.notif_id,M=K.alert_id,N=K.notif_type;this.$NotificationConversationController9(c("nullthrows")(G),c("nullthrows")(L),c("nullthrows")(I),c("nullthrows")(M),J?new(c("URI"))(J):null,E,N)};C.prototype.handleNewNotificationsFromChannel=function(D,E){this.init();D.forEach(function(F){var G=F.alert_id,H=F.pinnedConvoConfig,I=F.tracking,J=F.notif_type;if(!H)return;var K=H.tab_id,L=H.ft_id,M=H.permalink_uri,N=JSON.parse(I),O=M?new(c("URI"))(M):null;this.$NotificationConversationController9(K,N.alert_id,L,G,O,E,J)}.bind(this))};C.prototype.$NotificationConversationController9=function(D,E,F,G,H,I,J){var K=c("XNotificationNubStoryController").getURIBuilder().setString("notif_alert_id",G).setInt("notif_id",E);this.$NotificationConversationController10(F,I);this.$NotificationConversationController11(D,F,J,H,K)};C.prototype.$NotificationConversationController10=function(D,E){if(!y[D])y[D]=E};C.prototype.$NotificationConversationController11=function(D,E,F,G,H){__p&&__p();if(m[D])return;var I=l.getLoadedTab(D);if(I){if(F)I.setNotificationType(F);return}if(c("ConversationNubPermalinkUtils").isOnPermalink(G)||j(E))H.setBool("force_minimized",true);m[D]=true;new(c("AsyncRequest"))().setURI(H.getURI()).setAllowCrossPageTransition(true).setFinallyHandler(function(){delete m[D]}).send()};C.prototype.$NotificationConversationController12=function(D){__p&&__p();var E=true;l.getUnsortedLoadedTabs().forEach(function(F){__p&&__p();var G=F.getFeedbackTargetID(),H=D[G],I=H?Object.keys(H):[];if(I.length){var J=F.getBadgeCount();if(j(G)){F.markCommentsAsSeenWithoutBadging(I);F.clearBadge()}else F.attemptAddNewCommentsToBadge(I);var K=F.getBadgeCount();if(J!==K)E=true}});if(E)c("ConversationNubTabsUpdateEventController").informTabsUpdated()};C.prototype.$NotificationConversationController13=function(D){if(x)return;c("Bootloader").loadModules(["ConversationNubSurveys"],function(E){if(!x)x=new E(D)},"NotificationConversationController")};C.prototype.$NotificationConversationController14=function(D,E,F){__p&&__p();if(w){w.addTab(D,F);delete y[D.getPersistentState().ftID];return}c("Bootloader").loadModules(["ConversationNubLogger"],function(G){if(!w)w=new G(E);w.addTab(D,F);delete y[D.getPersistentState().ftID]},"NotificationConversationController")};C.prototype.$NotificationConversationController15=function(){if(v)return;c("Bootloader").loadModules(["ConversationNubUFICentralUpdateManager"],function(D){if(v)return;v=new D(this.$NotificationConversationController12.bind(this))}.bind(this),"NotificationConversationController")};C.prototype.$NotificationConversationController7=function(D){var E=A();if(!E)return;c("Bootloader").loadModules(["React","ReactDOM","ConversationNubDockedTabGroup.react"],function(F,G,H){s=G.render(F.createElement(H,{dockTabs:D}),E)},"NotificationConversationController")};C.prototype.$NotificationConversationController16=function(D){D.popOut();c("ConversationNubTabsUpdateEventController").informTabsUpdated({tabToPromote:D})};C.prototype.$NotificationConversationController8=function(D){var E=B();if(!E)return;c("Bootloader").loadModules(["React","ReactDOM","ConversationNubCollapsedSelectorMenu.react"],function(F,G,H){r=G.render(F.createElement(H,{menuTabs:D,onTabSelected:this.$NotificationConversationController16}),E)}.bind(this),"NotificationConversationController")};C.prototype.$NotificationConversationController17=function(){if(!n){var D=z();if(D){var E={onAvailableWidthChanged:this.$NotificationConversationController5.bind(this)};n=new(c("ConversationNubViewportManager"))(D,l,E)}}};C.prototype.storyFromServer=function(D,E){__p&&__p();if(!t)this.init();var F=E.attempt_open_on_init,G=E.ft_id,H=E.init_without_badge,I=E.notif_alert_id,J=E.notification_type,K=E.permalink_uri,L=E.promote_on_init,M=E.tab_add_source,N=E.tab_id,O=E.title,P=E.should_show_intro_nux,Q=E.should_show_hide_nux,R=E.page_id,S=l.getLoadedTab(N);if(S){if(L||F)c("ConversationNubTabsUpdateEventController").informTabsUpdated({tabToPromote:L?S:null,tabToOpenIfInDock:F?S:null});return}H=H||j(G);var T=l.getTabStateIfExists(N);if(T)H=null;else{var U=c("ConversationNub").createDefaultState(N,K,G,I,J,O);l.addTabState(U)}var V=new(c("ConversationNub"))(D,N,H,R,Boolean(P),Boolean(Q));l.addLoadedTab(N,V);F=F||V.getPersistentState().isTabRaised;this.$NotificationConversationController15();this.$NotificationConversationController17();c("ConversationNubTabsUpdateEventController").informTabsUpdated({tabToPromote:L?V:null,tabToOpenIfInDock:F?V:null});this.$NotificationConversationController13(l);var W=y[G]||M||"unknown";this.$NotificationConversationController14(V,l,W)};C.prototype.deleteAllTabs=function(){l.deleteAllTabs();c("ConversationNubTabsUpdateEventController").informTabsUpdated()};C.prototype.$NotificationConversationController3=function(D){var E=l.deleteTab(D);if(E)c("ConversationNubTabsUpdateEventController").informTabsUpdated()};C.prototype.unsubscribe=function(){__p&&__p();u&&u.release();u=null;w&&w.destroy();w=null;x&&x.destroy();x=null;v&&v.destroy();v=null;this.$NotificationConversationController1.destroy();c("ifRequired")("ReactDOM",function(D){var E=B();if(r&&E)D.unmountComponentAtNode(E);var F=A();if(s&&F)D.unmountComponentAtNode(F)})};function C(){}f.exports=new C()}),null);
__d("XChatEmojiSettingsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/chat/emoji_settings/",{__asyncDialog:{type:"Int"}})}),null);
__d("ChatSidebarDropdown.react",["cx","fbt","AppsDivebarDisplayController","Arbiter","AsyncRequest","ChatConfig","ChatOptions","ChatSidebarBotsActions","ChatSidebarBotsStore","ChatSidebarDropdownConstants","ChatVisibility","ContextualDialogArrow","ContextualLayerAutoFlip","ConversationNubUtils","CurrentUser","FantaTabActions","FBRTCCallBlockingStore","FBRTCSupport","LayerHideOnBlur","Link.react","LogHistory","MenuSeparator.react","PinnedConversationNubsConfig","PopoverMenu.react","PresencePrivacy","PresenceState","React","ReactXUIMenu","SidebarType","SubscriptionsHandler","TrackingNodes","URI","XChatEmojiSettingsController","emptyFunction","ge","gkx","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("ChatSidebarBotsActions").module,m=c("ChatSidebarBotsStore").module,n=c("ReactXUIMenu").SelectableItem,o=c("ReactXUIMenu").SelectableMenu,p=c("ReactXUIMenu").Item,q=c("React").PropTypes,r=c("LogHistory").getInstance("blackbird");j=babelHelpers.inherits(s,c("React").PureComponent);k=j&&j.prototype;function s(){var t,u;for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return u=(t=k.constructor).call.apply(t,[this].concat(w)),this.$ChatSidebarDropdown6=function(y,z){var A=z.item.getValue(),B=z.item.isSelected&&z.item.isSelected();this.$ChatSidebarDropdown5(A,!!B)}.bind(this),this.state={appsVisible:c("AppsDivebarDisplayController").isVisible(),isConversationsEnabled:c("PinnedConversationNubsConfig").isEnabled,isDiscoverBotsHidden:m?m.getState().isHidden:true,isOnline:c("ChatVisibility").isOnline(),isTickerVisible:this.$ChatSidebarDropdown2(),isCallBlocked:c("FBRTCCallBlockingStore").getBlockingStatus(),pendingChange:false},u}s.prototype.componentDidMount=function(){__p&&__p();this.$ChatSidebarDropdown1=new(c("SubscriptionsHandler"))();this.$ChatSidebarDropdown1.addSubscriptions(c("Arbiter").subscribe(["Ticker/resized","ticker/show"],function(){this.setState({isTickerVisible:this.$ChatSidebarDropdown2()})}.bind(this)),c("Arbiter").subscribe(["AppsDivebar/show-apps","AppsDivebar/hide-apps"],function(){this.setState({appsVisible:c("AppsDivebarDisplayController").isVisible()})}.bind(this)),c("PresencePrivacy").subscribe("privacy-user-presence-changed",function(){this.setState({isOnline:c("ChatVisibility").isOnline()})}.bind(this)),c("Arbiter").subscribe("buddylist/hide",function(){this.refs.menu.hidePopover()}.bind(this)),c("Arbiter").subscribe("sidebar/visibility",function(t,u){if(!u)this.refs.menu.hidePopover()}.bind(this)),c("FBRTCCallBlockingStore").addListener(function(){this.setState({isCallBlocked:c("FBRTCCallBlockingStore").getBlockingStatus()})}.bind(this)));if(m)this.$ChatSidebarDropdown1.addSubscriptions(m.addListener(function(){this.setState({isDiscoverBotsHidden:m.getState().isHidden})}.bind(this)));if(c("PinnedConversationNubsConfig").userSettingsIsEnabled)this.$ChatSidebarDropdown1.addSubscriptions(c("Arbiter").subscribe(c("ConversationNubUtils").TURN_CONVERSATIONS_OFF_EVENT,function(){this.setState({isConversationsEnabled:false})}.bind(this)),c("Arbiter").subscribe(c("ConversationNubUtils").TURN_CONVERSATIONS_ON_EVENT,function(){this.setState({isConversationsEnabled:true})}.bind(this)))};s.prototype.componentWillUnmount=function(){this.$ChatSidebarDropdown1&&this.$ChatSidebarDropdown1.release()};s.prototype.$ChatSidebarDropdown2=function(){var t=c("ge")("pagelet_ticker");return!!(t&&t.offsetHeight!==0)};s.prototype.$ChatSidebarDropdown3=function(t,u){var v=u?"sidebar_dropdown_visibility_error":"sidebar_dropdown_set_visibility";r.debug(v,JSON.stringify({action:t}))};s.prototype.$ChatSidebarDropdown4=function(t,u){if(this.state.pendingChange)return;this.setState({pendingChange:true});var v={};v[t]=!u;c("ChatOptions").setSetting(t,!u,"mini_sidebar_menu");new(c("AsyncRequest"))("/ajax/chat/settings.php").setHandler(c("PresenceState").doSync).setErrorHandler(function(){return c("ChatOptions").setSetting(t,u,"mini_sidebar_menu_error")}).setFinallyHandler(function(){return this.setState({pendingChange:false})}.bind(this)).setData(v).setAllowCrossPageTransition(true).send()};s.prototype.$ChatSidebarDropdown5=function(t,u){__p&&__p();var v=true;switch(t){case c("ChatSidebarDropdownConstants").SOUND:this.$ChatSidebarDropdown4(t,u);break;case c("ChatSidebarDropdownConstants").ADVANCED_SETTINGS:case c("ChatSidebarDropdownConstants").TURN_OFF_DIALOG:this.$ChatSidebarDropdown3(t,false);break;case c("ChatSidebarDropdownConstants").LOWER_ALL_TABS:c("FantaTabActions").minimizeAllTabs();break;case c("ChatSidebarDropdownConstants").CLOSE_ALL_TABS:c("FantaTabActions").closeAllTabs();this.$ChatSidebarDropdown3(t,false);break;case c("ChatSidebarDropdownConstants").HIDE_GROUPS:this.$ChatSidebarDropdown4(t,u);break;case c("ChatSidebarDropdownConstants").TOGGLE_DISCOVER_BOTS:if(l)l.saveSettings({isHidden:!this.state.isDiscoverBotsHidden});break;case c("ChatSidebarDropdownConstants").SIDEBAR:this.props.onToggleSidebar();v=false;break;case c("ChatSidebarDropdownConstants").ONLINE:!this.state.isOnline?c("ChatVisibility").goOnline():this.$ChatSidebarDropdown3(t,true);break;case c("ChatSidebarDropdownConstants").VIDEOCALL_ON:c("FBRTCCallBlockingStore").turnOnVideoCalling();break;case c("ChatSidebarDropdownConstants").VIDEOCALL_OFF:break;case c("ChatSidebarDropdownConstants").PAUSE:break;case c("ChatSidebarDropdownConstants").SHOW_TICKER:c("Arbiter").inform("ChatSidebarDropdown/openTicker");break;case c("ChatSidebarDropdownConstants").HIDE_TICKER:c("Arbiter").inform("ChatSidebarDropdown/closeTicker");break;case c("ConversationNubUtils").TURN_CONVERSATIONS_OFF_EVENT:c("ConversationNubUtils").turnConversationsOff();break;case c("ConversationNubUtils").TURN_CONVERSATIONS_ON_EVENT:c("ConversationNubUtils").turnConversationsOn();break;case c("ChatSidebarDropdownConstants").SHOW_APPS:c("AppsDivebarDisplayController").showApps();break;case c("ChatSidebarDropdownConstants").HIDE_APPS:c("AppsDivebarDisplayController").hideApps();break;case c("ChatSidebarDropdownConstants").HIDE_ADMINED_PAGES:this.$ChatSidebarDropdown4(t,u);break;case c("ChatSidebarDropdownConstants").HIDE_BUSINESSES:this.$ChatSidebarDropdown4(t,u);break}if(v&&this.refs.menu)this.refs.menu.hidePopover()};s.prototype.$ChatSidebarDropdown7=function(){return c("React").createElement(n,{value:c("ChatSidebarDropdownConstants").SOUND,selected:c("ChatOptions").getSetting(c("ChatSidebarDropdownConstants").SOUND)},i._("\ucc44\ud305 \uc74c\ud5a5"))};s.prototype.$ChatSidebarDropdown8=function(){var t=c("XChatEmojiSettingsController").getURIBuilder().getURI();return c("React").createElement(p,{href:t,rel:"dialog",value:c("ChatSidebarDropdownConstants").EMOJI_SETTINGS},i._("\uc774\ubaa8\ud2f0\ucf58"))};s.prototype.$ChatSidebarDropdown9=function(){if(c("CurrentUser").isWorkUser())return null;return c("React").createElement(p,{href:new(c("URI"))("/settings?tab=blocking"),value:c("ChatSidebarDropdownConstants").BLOCK_SETTINGS},i._("\ucc28\ub2e8 \uc124\uc815"))};s.prototype.$ChatSidebarDropdown10=function(){return c("React").createElement(p,{href:new(c("URI"))("/ajax/chat/privacy/settings_dialog.php"),rel:"dialog",value:c("ChatSidebarDropdownConstants").ADVANCED_SETTINGS},i._("\uc138\ubd80 \uc124\uc815"))};s.prototype.$ChatSidebarDropdown11=function(){return c("React").createElement(p,{value:c("ChatSidebarDropdownConstants").LOWER_ALL_TABS},i._("\ubaa8\ub4e0 \ucc44\ud305 \ud0ed \uc228\uae30\uae30"))};s.prototype.$ChatSidebarDropdown12=function(){return c("React").createElement(p,{value:c("ChatSidebarDropdownConstants").CLOSE_ALL_TABS},i._("\ubaa8\ub4e0 \ucc44\ud305 \ucc3d \ub2eb\uae30"))};s.prototype.$ChatSidebarDropdown13=function(){return c("React").createElement(p,{className:"_4kqp",value:c("ChatSidebarDropdownConstants").SIDEBAR},i._("\uc0ac\uc774\ub4dc\ubc14 \uc228\uae30\uae30"))};s.prototype.$ChatSidebarDropdown14=function(){if(this.props.sidebarType===c("SidebarType").BUDDYLIST_NUB||!c("ChatConfig").get("show_admined_pages"))return null;return c("React").createElement(n,{className:"_4kqp",value:c("ChatSidebarDropdownConstants").HIDE_ADMINED_PAGES,selected:c("ChatOptions").getSetting(c("ChatSidebarDropdownConstants").HIDE_ADMINED_PAGES)},i._("\uad00\ub9ac\ud558\ub294 \ud398\uc774\uc9c0 \uc228\uae30\uae30"))};s.prototype.$ChatSidebarDropdown15=function(){if(this.props.sidebarType===c("SidebarType").BUDDYLIST_NUB||!c("ChatConfig").get("show_businesses"))return null;return c("React").createElement(n,{className:"_4kqp",value:c("ChatSidebarDropdownConstants").HIDE_BUSINESSES,selected:c("ChatOptions").getSetting(c("ChatSidebarDropdownConstants").HIDE_BUSINESSES)},i._("\uc5f0\ub77d\ud560 \ud398\uc774\uc9c0 \uc228\uae30\uae30"))};s.prototype.$ChatSidebarDropdown16=function(){if(this.props.sidebarType===c("SidebarType").BUDDYLIST_NUB)return null;return c("React").createElement(n,{value:c("ChatSidebarDropdownConstants").HIDE_GROUPS,selected:c("ChatOptions").getSetting(c("ChatSidebarDropdownConstants").HIDE_GROUPS)},i._("\uadf8\ub8f9 \uc228\uae30\uae30"))};s.prototype.$ChatSidebarDropdown17=function(){var t=c("ChatVisibility").isOnline(),u=t?new(c("URI"))("/ajax/chat/privacy/settings_dialog.php").addQueryData("dialog_type","turn_off_dialog"):"#",v="";if(c("gkx")("AT69r4Tjj4qkJ_vN9jQ6gElERSeEr7u62xiMa_cx47RRkJ105PHueucCfKn05FryjNTRlgeKhVV5K6cdO6mpY_4fixxY2c-NmAOkc0BTwRAPmw"))v=t?i._("Turn Off Chat (Advanced Settings)"):i._("\ucc44\ud305 \ucf1c\uae30");else v=t?i._("\ucc44\ud305 \ub044\uae30"):i._("\ucc44\ud305 \ucf1c\uae30");var w=t?c("ChatSidebarDropdownConstants").TURN_OFF_DIALOG:c("ChatSidebarDropdownConstants").ONLINE;return c("React").createElement(p,{href:u,rel:t?"dialog":"",value:w},v)};s.prototype.$ChatSidebarDropdown18=function(){if(!c("FBRTCSupport").isVideoCallBlockingSupported())return null;var t=this.state.isCallBlocked,u=t?"#":new(c("URI"))("/videocall/off/"),v=t?i._("\uc601\uc0c1\/\uc74c\uc131 \ud1b5\ud654 \ucf1c\uae30"):i._("\uc601\uc0c1\/\uc74c\uc131 \ud1b5\ud654 \ub044\uae30"),w=t?c("ChatSidebarDropdownConstants").VIDEOCALL_ON:c("ChatSidebarDropdownConstants").VIDEOCALL_OFF;return c("React").createElement(p,{href:u,rel:t?"":"dialog",value:w},v)};s.prototype.$ChatSidebarDropdown19=function(){var t=m?m.getState().bots:[];if(!l||t.length===0)return null;var u=this.state.isDiscoverBotsHidden?i._("\ubd07 \ub458\ub7ec\ubcf4\uae30 \ud45c\uc2dc"):i._("\ubd07 \ub458\ub7ec\ubcf4\uae30 \uc228\uae30\uae30");return c("React").createElement(p,{value:c("ChatSidebarDropdownConstants").TOGGLE_DISCOVER_BOTS},u)};s.prototype.$ChatSidebarDropdown20=function(){if(!c("PinnedConversationNubsConfig").userSettingsIsEnabled)return null;var t=this.state.isConversationsEnabled,u=t?i._("\uac8c\uc2dc\ubb3c \ud0ed \ud574\uc81c"):i._("\uac8c\uc2dc\ubb3c \ud0ed \uc124\uc815"),v=t?c("ConversationNubUtils").TURN_CONVERSATIONS_OFF_EVENT:c("ConversationNubUtils").TURN_CONVERSATIONS_ON_EVENT;return c("React").createElement(p,{value:v},u)};s.prototype.$ChatSidebarDropdown21=function(){if(!c("ChatConfig").get("has_apps_option")||this.props.sidebarType!==c("SidebarType").SIDEBAR)return null;var t=this.state.appsVisible,u=t?i._("\uac8c\uc784 \uc228\uae30\uae30"):i._("\uac8c\uc784 \ud45c\uc2dc"),v=t?c("ChatSidebarDropdownConstants").HIDE_APPS:c("ChatSidebarDropdownConstants").SHOW_APPS;return[c("React").createElement(c("MenuSeparator.react"),{key:"apps_separator"}),c("React").createElement(p,{value:v,key:"apps_menu"},u)]};s.prototype.$ChatSidebarDropdown22=function(){if(!c("ChatConfig").get("has_ticker_toggle_option")||this.props.sidebarType!==c("SidebarType").SIDEBAR)return null;var t=this.state.isTickerVisible,u=t?i._("\uc9c0\uae08 \uc774 \uc21c\uac04 \uc228\uae30\uae30"):i._("\uc9c0\uae08 \uc774 \uc21c\uac04 \ud45c\uc2dc\ud558\uae30"),v=t?c("ChatSidebarDropdownConstants").HIDE_TICKER:c("ChatSidebarDropdownConstants").SHOW_TICKER;return[c("React").createElement(c("MenuSeparator.react"),{key:"ticker_separator"}),c("React").createElement(p,{value:v,key:"ticker_menu"},u)]};s.prototype.$ChatSidebarDropdown23=function(){return c("React").createElement(o,{className:"fbChatSidebarDropdown/PopoverMenu",multiple:true,onItemClick:this.$ChatSidebarDropdown6},this.$ChatSidebarDropdown7(),this.$ChatSidebarDropdown8(),this.$ChatSidebarDropdown9(),this.$ChatSidebarDropdown10(),c("React").createElement(c("MenuSeparator.react"),null),this.$ChatSidebarDropdown11(),this.$ChatSidebarDropdown12(),this.$ChatSidebarDropdown19(),this.$ChatSidebarDropdown13(),this.$ChatSidebarDropdown14(),this.$ChatSidebarDropdown15(),this.$ChatSidebarDropdown16(),this.$ChatSidebarDropdown17(),this.$ChatSidebarDropdown18(),this.$ChatSidebarDropdown20(),this.$ChatSidebarDropdown21(),this.$ChatSidebarDropdown22())};s.prototype.render=function(){var t=i._("\uc635\uc158"),u=c("joinClasses")(this.props.className,"_5qth _5vm9"+(!c("ChatVisibility").isOnline()?" _5vma":"")),v=c("TrackingNodes").getTrackingInfo(c("TrackingNodes").types.DROPDOWN_BUTTON);return c("React").createElement(c("PopoverMenu.react"),{alignh:"right",alignv:"top",className:u,layerBehaviors:[c("ContextualLayerAutoFlip"),c("ContextualDialogArrow"),c("LayerHideOnBlur")],menu:this.$ChatSidebarDropdown23(),onHide:this.props.onHide,onShow:this.props.onShow,ref:"menu"},c("React").createElement(c("Link.react"),{"aria-label":t,className:"_5vmb button","data-ft":v,"data-hover":"tooltip","data-tooltip-content":t,"data-tooltip-position":"below",href:"#"}))};s.propTypes={className:q.string,onHide:q.func,onShow:q.func,onToggleSidebar:q.func.isRequired,sidebarType:q.string.isRequired};s.defaultProps={className:"",onHide:c("emptyFunction"),onShow:c("emptyFunction")};f.exports=s}),null);
__d("ChatSidebarSheetChatOffline.react",["fbt","Link.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){return c("React").createElement("div",null,h._("\ucc44\ud305\ud560 \uc218 \uc788\ub294 \uce5c\uad6c\ub4e4\uc744 \ubcf4\ub824\uba74 {=Go online}.",[h.param("=Go online",c("React").createElement(c("Link.react"),{className:"fbChatGoOnlineLink",onClick:this.props.onGoOnlineClick},h._("\ucc44\ud305 \ucf1c\uae30")))]))};function l(){i.apply(this,arguments)}l.propTypes={onGoOnlineClick:k.func.isRequired};f.exports=l}),null);
__d("ImageReact.bs",["Image.react","ReasonReact.bs","bs_js_null_undefined"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o,p){return c("ReasonReact.bs").wrapJsForReason(c("Image.react"),{className:c("bs_js_null_undefined").from_opt(i),alt:c("bs_js_null_undefined").from_opt(j),src:c("bs_js_null_undefined").from_opt(k),height:c("bs_js_null_undefined").from_opt(l),title:c("bs_js_null_undefined").from_opt(m),width:c("bs_js_null_undefined").from_opt(n),style:c("bs_js_null_undefined").from_opt(o)},p)}g.make=h}),null);
__d("MessengerSpinnerReact.bs",["cx","ix","fbt","React","ImageReact.bs","ReasonReact.bs","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=i("86853"),l=i("86857"),m=i("86854"),n=c("ReasonReact.bs").statelessComponent("MessengerSpinnerReact");function o(s,t,u,v){__p&&__p();var w=s?s[0]:"",x=t?t[0]:"blue",y=u?u[0]:24,z=function z(){var B=+(y===24);if(B!==0){var C=+(x==="blue");if(C!==0)return k;else return l}else return m},A=n.slice();A[9]=function(){return c("React").cloneElement(c("ReasonReact.bs").element(0,0,c("ImageReact.bs").make([c("joinClasses")(w,"_3u55 _3qh2")],0,[z(0)],[y],0,[y],0,[])),{"aria-label":j._("\uc77d\uc5b4\ub4e4\uc774\ub294 \uc911..."),"aria-busy":true})};return A}var p=c("ReasonReact.bs").wrapReasonForJs(n,function(s){var t=s.className,u=s.color,v=s.size;return o([t==null?"":t],[u==null?"blue":u],[v==null?24:v],[])}),q=32,r=24;g.large_size=q;g.medium_size=r;g.blue_src=k;g.grey_src=l;g.large_blue_src=m;g.component=n;g.make=o;g.jsComponent=p}),null);
__d("MessengerSpinner.react",["MessengerSpinnerReact.bs"],(function a(b,c,d,e,f,g){f.exports=c("MessengerSpinnerReact.bs").jsComponent;f.exports.large_size=c("MessengerSpinnerReact.bs").large_size;f.exports.medium_size=c("MessengerSpinnerReact.bs").medium_size}),null);
__d("ChatSidebarSheetChatReconnectMsg.react",["fbt","ChannelConstants","Link.react","MessengerSpinner.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.isMessenger,o=m.msecs,p=c("React").createElement(c("Link.react"),{className:"fbChatReconnectLink",onClick:this.props.onManuallyConnectClick},h._("\uc778\ud130\ub137\uc5d0 \uc5f0\uacb0\ub418\uc9c0 \uc54a\uc74c"));if(o==null||false===navigator.onLine)return n?p:c("React").createElement("div",null,h._("\ucc44\ud305 \uc5f0\uacb0\uc744 \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uc778\ud130\ub137 \uc5f0\uacb0 \uc0c1\ud0dc\ub97c \ud655\uc778\ud574\uc8fc\uc138\uc694."));else if(o>c("ChannelConstants").WARNING_COUNTDOWN_THRESHOLD_MSEC)return n?p:c("React").createElement("div",null,h._("\ucc44\ud305 \uc5f0\uacb0\uc744 \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. {try-again-link}",[h.param("try-again-link",c("React").createElement(c("Link.react"),{className:"fbChatReconnectLink",onClick:this.props.onManuallyConnectClick},h._("\ub2e4\uc2dc \uc5f0\uacb0\ud558\uae30")))]));else if(o>1e3)return n?p:c("React").createElement("div",null,h._("\ucc44\ud305 \uc5f0\uacb0\uc744 \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. {seconds}\ucd08 \ud6c4 \ub2e4\uc2dc \uc5f0\uacb0\ud569\ub2c8\ub2e4.",[h.param("seconds",Math.floor(o/1e3))]));else return n?c("React").createElement("div",null,c("React").createElement(c("MessengerSpinner.react"),{color:"grey"}),h._("\uc5f0\uacb0 \uc911...")):c("React").createElement("div",null,h._("\ucc44\ud305 \uc5f0\uacb0\uc744 \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc5f0\uacb0\ud558\ub294 \uc911..."))};function l(){i.apply(this,arguments)}l.propTypes={isMessenger:k.bool,msecs:k.number,onManuallyConnectClick:k.func};f.exports=l}),null);
__d("ChatSidebarSheetChatShutdownMsg.react",["fbt","ChannelConstants","CurrentUser","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.hint,o=m.isMessenger;switch(n){case c("ChannelConstants").HINT_AUTH:return c("React").createElement("div",null,h._("\uc138\uc158 \uc2dc\uac04\uc774 \ub9cc\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud558\uc138\uc694."));case c("ChannelConstants").HINT_MAINT:return o?c("React").createElement("div",null,h._("Messenger\uac00 \ud604\uc7ac \uc810\uac80 \uc911\uc785\ub2c8\ub2e4.")):c("React").createElement("div",null,h._("{Chat} \ucc44\ud305\uc774 \ud604\uc7ac \uc810\uac80 \uc911\uc785\ub2c8\ub2e4.",[h.param("Chat",h._("\ucc44\ud305"))]));case c("ChannelConstants").HINT_CONN:default:if(!o)return c("React").createElement("div",null,h._("\ud604\uc7ac {Chat} \ucc44\ud305\uc744 \uc774\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",[h.param("Chat",h._("\ucc44\ud305"))]));else if(c("CurrentUser").isWorkUser())return c("React").createElement("div",null,h._("\ud604\uc7ac Workplace \ucc44\ud305\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."));else return c("React").createElement("div",null,h._("\ud604\uc7ac Messenger\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))}};function l(){i.apply(this,arguments)}l.propTypes={hint:k.string,isMessenger:k.bool};f.exports=l}),null);
__d("ChatSidebarSheet.react",["fbt","Arbiter","ChannelConnection","ChatBehavior","ChatSidebarSheetChatOffline.react","ChatSidebarSheetChatReconnectMsg.react","ChatSidebarSheetChatShutdownMsg.react","ChatVisibility","MercuryConfig","MessengerEnvironment","CSS","JSLogger","LogHistory","MercurySyncConstants","PresencePrivacy","React","SubscriptionsHandler","emptyFunction","joinClasses","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("JSLogger").create("sidebar_sheet"),l=c("LogHistory").getInstance("sidebar_sheet"),m=c("React").PropTypes;i=babelHelpers.inherits(n,c("React").PureComponent);j=i&&i.prototype;function n(o){j.constructor.call(this,o);this.$ChatSidebarSheet3=function(p,q){this.setState({channelStatus:p,channelData:q});this.$ChatSidebarSheet4()}.bind(this);this.$ChatSidebarSheet4=function(){this.setState({isConnected:!c("ChannelConnection").disconnected(),isOnline:c("ChatVisibility").isOnline(),notifiesUserMessages:c("ChatBehavior").notifiesUserMessages()})}.bind(this);this.state={channelStatus:null,channelData:null,isConnected:!c("ChannelConnection").disconnected(),isOnline:c("ChatVisibility").isOnline(),notifiesUserMessages:c("ChatBehavior").notifiesUserMessages(),syncStateInvalid:false,syncStateReconnecting:false}}n.prototype.componentDidMount=function(){this.$ChatSidebarSheet1=new(c("SubscriptionsHandler"))();this.$ChatSidebarSheet1.addSubscriptions(c("ChannelConnection").subscribe([c("ChannelConnection").CONNECTED,c("ChannelConnection").SHUTDOWN,c("ChannelConnection").RECONNECTING],this.$ChatSidebarSheet3),c("ChannelConnection").subscribe([c("ChannelConnection").MUTE_WARNING,c("ChannelConnection").UNMUTE_WARNING],this.$ChatSidebarSheet4),c("PresencePrivacy").subscribe("privacy-user-presence-changed",this.$ChatSidebarSheet4),c("ChatBehavior").subscribe(c("ChatBehavior").ON_CHANGED,this.$ChatSidebarSheet4),c("Arbiter").subscribe(c("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE,function(){l.log("invalid state fatal","{}");this.setState({syncStateInvalid:true,syncStateReconnecting:false})}.bind(this)),c("Arbiter").subscribe(c("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RETRY,function(){l.log("retry from invalid state","{}");this.$ChatSidebarSheet5()}.bind(this)),c("Arbiter").subscribe(c("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RECOVER,function(){l.log("recover from invalid state","{}");this.$ChatSidebarSheet6()}.bind(this)))};n.prototype.componentWillUpdate=function(){if(this.$ChatSidebarSheet2){clearTimeout(this.$ChatSidebarSheet2);this.$ChatSidebarSheet2=null}};n.prototype.componentWillUnmount=function(){this.$ChatSidebarSheet1&&this.$ChatSidebarSheet1.release()};n.prototype.render=function(){__p&&__p();var o=c("MessengerEnvironment").messengerui,p=void 0,q=void 0;if(!this.state.isOnline&&!o){p="offline";q=this.$ChatSidebarSheet7()}else if(!this.state.isConnected||this.state.syncStateInvalid||this.state.syncStateReconnecting){p="error";q=this.$ChatSidebarSheet8(o)}else if(!this.state.notifiesUserMessages&&!o){p="notice";q=this.$ChatSidebarSheet9()}if(this.state.channelStatus===c("ChannelConnection").RECONNECTING&&this.state.channelData<1e3||this.state.syncStateReconnecting)p=c("joinClasses")(p,"reconnecting");return c("React").createElement("div",{className:c("joinClasses")(this.props.className,p)},o?null:c("React").createElement("div",{className:"img"}),c("React").createElement("div",{className:"message"},q))};n.prototype.$ChatSidebarSheet8=function(o){__p&&__p();if(this.state.channelStatus===c("ChannelConnection").SHUTDOWN||this.state.syncStateInvalid)return c("React").createElement(c("ChatSidebarSheetChatShutdownMsg.react"),{hint:this.state.syncStateInvalid?undefined:this.state.channelData,isMessenger:o});else if(this.state.channelStatus===c("ChannelConnection").RECONNECTING||this.state.syncStateReconnecting){var p=this.state.syncStateReconnecting?1:this.state.channelData;if(p>1e3)this.$ChatSidebarSheet2=c("setTimeoutAcrossTransitions")(this.$ChatSidebarSheet3.bind(this,c("ChannelConnection").RECONNECTING,p-1e3),1e3);return c("React").createElement(c("ChatSidebarSheetChatReconnectMsg.react"),{isMessenger:o,msecs:p,onManuallyConnectClick:function(){if(!this.state.syncStateReconnecting)c("ChannelConnection").reconnect()}.bind(this)})}return null};n.prototype.$ChatSidebarSheet7=function(){return c("React").createElement(c("ChatSidebarSheetChatOffline.react"),{onGoOnlineClick:function o(p){k.log("sidebar_go_online");c("ChatVisibility").goOnline()}})};n.prototype.$ChatSidebarSheet9=function(){return c("React").createElement("div",null,h._("\ub2e4\ub978 \ud074\ub77c\uc774\uc5b8\ud2b8\ub85c \ucc44\ud305\ud558\ub294 \ub3d9\uc548 \uc54c\ub9bc\uc744 \ub055\ub2c8\ub2e4."))};n.prototype.$ChatSidebarSheet5=function(){this.setState({syncStateReconnecting:true})};n.prototype.$ChatSidebarSheet6=function(){this.setState({syncStateInvalid:false,syncStateReconnecting:false})};f.exports=n}),null);
__d("MessengerDotComUpsellMessage.react",["fbt","React"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){return h._("Messenger.com\uc5d0\uc11c \ub354\uc6b1 \ube60\ub978 \ucc44\ud305\uc744 \uc774\uc6a9\ud574\ubcf4\uc138\uc694")};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("MessengerDotComUpsellSheet.react",["cx","BanzaiODS","ChannelConnection","MessengerDotComUpsellMessage.react","Link.react","React","MercuryServerDispatcher","ShimButton.react","SubscriptionsHandler","ChatConfigInitialData","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.$MessengerDotComUpsellSheet3=function(m){m.preventDefault();m.stopPropagation();c("MercuryServerDispatcher").trySend("/ajax/messenger_upsell/dismiss.php",[{}]);this.setState({shouldShow:false})}.bind(this);this.$MessengerDotComUpsellSheet4=function(m,n){this.setState({isConnected:!c("ChannelConnection").disconnected()})}.bind(this);this.state={isConnected:!c("ChannelConnection").disconnected(),shouldShow:c("ChatConfigInitialData").show_messenger_dot_com_upsell}}k.prototype.render=function(){if(!this.state.isConnected||!this.state.shouldShow)return null;var l=c("ChatConfigInitialData").messenger_dot_com_upsell_version;if(l!="blue"&&l!="white")return null;return c("React").createElement(c("Link.react"),{href:"https://www.messenger.com",onClick:this.$MessengerDotComUpsellSheet2,target:"_blank",className:c("joinClasses")("_ua_",l)},c("React").createElement("div",{className:"content"},c("React").createElement("div",{className:"img"}),c("React").createElement("div",{className:"message"},c("React").createElement(c("MessengerDotComUpsellMessage.react"),null)),c("React").createElement(c("ShimButton.react"),{className:"close",onClick:this.$MessengerDotComUpsellSheet3})))};k.prototype.$MessengerDotComUpsellSheet2=function(){var l=c("ChatConfigInitialData").messenger_dot_com_upsell_version;c("BanzaiODS").bumpEntityKey("messaging_www","mn.messenger_upsell.click."+l)};k.prototype.componentDidMount=function(){this.$MessengerDotComUpsellSheet1=new(c("SubscriptionsHandler"))();this.$MessengerDotComUpsellSheet1.addSubscriptions(c("ChannelConnection").subscribe([c("ChannelConnection").CONNECTED,c("ChannelConnection").SHUTDOWN,c("ChannelConnection").RECONNECTING],this.$MessengerDotComUpsellSheet4))};c("MercuryServerDispatcher").registerEndpoints({"/ajax/messenger_upsell/dismiss.php":{mode:c("MercuryServerDispatcher").IMMEDIATE}});f.exports=k}),null);
__d("MessengerSearchFunnelLogger",["FunnelLogger","MessengerSearchFunnelLoggerConstants","MercuryIDs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h;function i(q,r,s){c("FunnelLogger").startFunnel(q);c("FunnelLogger").addFunnelTag(q,r);c("FunnelLogger").addFunnelTag(q,s);c("FunnelLogger").appendActionIfNew(q,"search_start");h=[]}function j(q){c("FunnelLogger").appendActionIfNew(q,"search_end");c("FunnelLogger").endFunnel(q)}function k(q,r){c("FunnelLogger").appendActionWithPayload(q,"initiate_content_search",{query_string:r,impression_list:h});c("FunnelLogger").endFunnel(q)}function l(q,r,s,t){if(s==null||h==null||h.length===0){c("FunnelLogger").appendActionWithPayload(q,"search_result_error",{error:"threadID or latest impression list are null",thread_id:s,impression_list:h});c("FunnelLogger").endFunnel(q);return}s=c("MercuryIDs").getThreadFBIDFromThreadID(s);c("FunnelLogger").appendActionWithPayload(q,"log_result_selection",{thread_id:s,type:t,rank:h.indexOf(s),search_query:r?r:""})}function m(q,r,s){c("FunnelLogger").appendActionWithPayloadIfNew(q,"loading_state_impression_list",{search_query:r,impression_list:s});h=s}function n(q,r){c("FunnelLogger").appendActionWithPayload(q,c("MessengerSearchFunnelLoggerConstants").SEND_SERVER_REQUEST,{search_query:r})}function o(q,r,s,t){c("FunnelLogger").appendActionWithPayload(q,r,{search_query:s,impression_list:t});h=t}function p(q){c("FunnelLogger").appendAction(q,"clear_search_query");this.endFunnel(q)}f.exports={startFunnel:i,logResultSelection:l,logStartQuery:n,endFunnel:j,logContentSearchInitiation:k,logLoadingStateQuery:m,logUpdateQuery:o,logClearQuery:p}}),null);
__d("MessengerTypeaheadUtils",["fbt","ix","immutable","MercuryConfig","MercuryTypeaheadConstants","MessengerEnvironment","ReactDOM","SearchableEntry","WorkModeConfig","gkx","mapObject"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=c("immutable").OrderedMap,l=500,m=100,n=c("WorkModeConfig").is_work_user||c("gkx")("AT62Bmuf0c-b-qsSo41XTNJvFn7VwRrjwsI0onsrzyJ35XDxvhLHgPbXt3hZorqUAYplG7jtkngT9YqyGngqDfMq")?[c("MercuryTypeaheadConstants").SEARCH_TYPE,c("MercuryTypeaheadConstants").FRIEND_TYPE,c("MercuryTypeaheadConstants").FB4C_TYPE,c("MercuryTypeaheadConstants").THREAD_TYPE,c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE,c("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE,c("MercuryTypeaheadConstants").PAGE_TYPE,c("MercuryTypeaheadConstants").NON_FRIEND_TYPE,c("MercuryTypeaheadConstants").GAME_TYPE]:[c("MercuryTypeaheadConstants").SEARCH_TYPE,c("MercuryTypeaheadConstants").FRIEND_TYPE,c("MercuryTypeaheadConstants").THREAD_TYPE,c("MercuryTypeaheadConstants").FB4C_TYPE,c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE,c("MercuryTypeaheadConstants").PAGE_TYPE,c("MercuryTypeaheadConstants").NON_FRIEND_TYPE,c("MercuryTypeaheadConstants").GAME_TYPE],o=(j={},j[c("MercuryTypeaheadConstants").SEARCH_TYPE]={header:""},j[c("MercuryTypeaheadConstants").FRIEND_TYPE]={header:h._("\uc5f0\ub77d\ucc98")},j[c("MercuryTypeaheadConstants").FB4C_TYPE]={header:h._("\uc9c1\uc7a5 \ub3d9\ub8cc")},j[c("MercuryTypeaheadConstants").THREAD_TYPE]={header:h._("\uadf8\ub8f9 \ub300\ud654")},j[c("MercuryTypeaheadConstants").PAGE_TYPE]={header:h._("\ube44\uc988\ub2c8\uc2a4")},j[c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE]={header:h._("\ud68c\uc758\uc2e4")},j[c("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE]={header:h._("\ubd07")},j[c("MercuryTypeaheadConstants").NON_FRIEND_TYPE]={header:h._("\ub354 \ubcf4\uae30")},j.game={header:h._("\uac8c\uc784")},j),p={sortEntries:function q(r,s){__p&&__p();var t=[],u=[],v=[],w=[],x=[],y=[],z=[],A=[],B=[];r.forEach(function(C){__p&&__p();switch(C.getType()){case c("MercuryTypeaheadConstants").FRIEND_TYPE:u.push(C);break;case c("MercuryTypeaheadConstants").FB4C_TYPE:v.push(C);break;case c("MercuryTypeaheadConstants").THREAD_TYPE:w.push(C);break;case c("MercuryTypeaheadConstants").PAGE_TYPE:case c("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE:y.push(C);break;case c("MercuryTypeaheadConstants").NON_FRIEND_TYPE:x.push(C);break;case c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE:z.push(C);break;case c("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE:A.push(C);break;case c("MercuryTypeaheadConstants").SEARCH_TYPE:t.push(C);break;case c("MercuryTypeaheadConstants").GAME_TYPE:B.push(C);break}});if(p._shouldHoistPages(s))return t.concat(y,u,v,w,z,A,x,B);return t.concat(u,v,w,z,A,y,x,B)},sortEntriesWithoutPages:function q(r){__p&&__p();var s=[],t=[],u=[],v=[];r.forEach(function(w){switch(w.getType()){case c("MercuryTypeaheadConstants").FRIEND_TYPE:s.push(w);break;case c("MercuryTypeaheadConstants").FB4C_TYPE:t.push(w);break;case c("MercuryTypeaheadConstants").THREAD_TYPE:u.push(w);break;case c("MercuryTypeaheadConstants").NON_FRIEND_TYPE:v.push(w);break}});return s.concat(t,u,v)},sortEntriesWithoutGroupsOrViewer:function q(r,s){__p&&__p();var t=[],u=[],v=[];r.forEach(function(w){if(w.getUniqueID()===s)return;switch(w.getType()){case c("MercuryTypeaheadConstants").FRIEND_TYPE:t.push(w);break;case c("MercuryTypeaheadConstants").FB4C_TYPE:u.push(w);break;case c("MercuryTypeaheadConstants").NON_FRIEND_TYPE:v.push(w);break}});return t.concat(u,v)},getEntryOrder:function q(r){var s=arguments.length<=1||arguments[1]===undefined?n:arguments[1];if(p._shouldHoistPages(r)){s=[].concat(s);s.splice(s.indexOf(c("MercuryTypeaheadConstants").PAGE_TYPE));s.unshift(c("MercuryTypeaheadConstants").PAGE_TYPE)}return s},orderEntries:function q(r,s){var t=[];this.getEntryOrder(s).filter(function(u){return u!==c("MercuryTypeaheadConstants").SEARCH_TYPE}).concat(c("MercuryTypeaheadConstants").SEARCH_TYPE).forEach(function(u){return t.push.apply(t,r.filter(function(v){return this.areSectionsEqual(v.getType(),u)}.bind(this)))}.bind(this));return t},buildSingleSection:function q(r){return k([["",r]])},buildListSections:function q(r,s,t){__p&&__p();if(!r.length)return k();t=this.getEntryOrder(s,t);var u=c("mapObject")(o,function(v){return babelHelpers["extends"]({},v,{entries:[]})});u[c("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE]=u[c("MercuryTypeaheadConstants").PAGE_TYPE];r.forEach(function(v){var w=v.getType();if(u[w])u[w].entries.push(v)});return k(t.filter(function(v){return u[v].entries.length}).map(function(v){return[u[v].header,u[v].entries]}))},buildCustomSection:function q(r,s){var t;return t={},t[r]=s,t},areSectionsEqual:function q(r,s){if(r===c("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE)return s===c("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE||s===c("MercuryTypeaheadConstants").PAGE_TYPE;return r===s},scrollEntryIntoView:function q(r,s){var t=c("ReactDOM").findDOMNode(s),u=s.getScrollTop(),v=r.offsetTop-u,w=t.offsetHeight-r.offsetHeight,x=Math.abs(w-v);if(v>=w&&x<=m)s.scrollToPosition(u+v-w,true,{duration:l});else if(v<0&&x<=w+m)s.scrollToPosition(u+v,true,{duration:l})},getMessageSearchEntry:function q(r){if(!c("MessengerEnvironment").messengerui||r.length<2)return null;return new(c("SearchableEntry"))({uniqueID:"__special_search_entry__",title:h._("\"{queryString}\"\uc5d0 \uad00\ud55c \uba54\uc2dc\uc9c0\ub97c \uac80\uc0c9\ud558\uc138\uc694",[h.param("queryString",r)]),photo:i("86924"),type:c("MercuryTypeaheadConstants").SEARCH_TYPE})},_shouldHoistPages:function q(r){if(!r)return false;return!!(c("MercuryConfig").HoistAgentsKeywords&&c("MercuryConfig").HoistAgentsKeywords.indexOf(r.toLowerCase().trim())!==-1)}};f.exports=p}),null);
__d("MessengerSearchSource",["ChatSearchSource","MercuryConfig","MercuryIDs","MercuryParticipants","MercuryParticipantTypes","MercurySingletonProvider","MessengerEnvironment","MessengerSearchFunnelLoggerConstants","MessengerTypeaheadUtils","SearchableEntry","emptyFunction","requireWeak"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=50,k=c("MessengerEnvironment").messengerui;h=babelHelpers.inherits(l,c("ChatSearchSource"));i=h&&h.prototype;l.getForFBID=function(n){return m.getForFBID(n)};l.get=function(){return m.get()};function l(n){i.constructor.call(this,{queryRequests:[{uri:"/ajax/mercury/composer_query.php"}],searchType:c("MessengerSearchFunnelLoggerConstants").WWW_SIDEBAR_TAG});this.$MessengerSearchSource1=[];this.$MessengerSearchSource2=n}l.prototype.bootstrapImpl=function(n){c("requireWeak")("OrderedFriendsList",function(p){return p.getSearchableEntries(j,true,function(q){this.$MessengerSearchSource1=q;i.addLocalEntries.call(this,q)}.bind(this))}.bind(this));var o=c("MercuryIDs").getParticipantIDFromUserID(this.$MessengerSearchSource2);c("MercuryParticipants").get(o,function(p){i.addLocalEntries.call(this,[new(c("SearchableEntry"))({uniqueID:p.fbid?p.fbid.toString():p.id,title:p.name,type:c("MercuryParticipantTypes").FRIEND,photo:p.big_image_src||p.image_src,uri:p.href,auxiliaryData:{isMessengerUser:p.is_messenger_user}})])}.bind(this));i.bootstrapImpl.call(this,c("emptyFunction"));n()};l.prototype.searchImpl=function(n,o,p){p=p||{};if(n===""&&p.showDefaultEntries){o(this.$MessengerSearchSource1,n);var q=p&&p.onQueryFinished;q&&q(n);return}p.threadLimit=c("MercuryConfig").MaxThreadResults;i.searchImpl.call(this,n,this.$MessengerSearchSource3(o,p),p)};l.prototype.$MessengerSearchSource3=function(n,o){return k&&o&&o.showThreadSearchEntry?function(p,q){var r=c("MessengerTypeaheadUtils").getMessageSearchEntry(q);if(r)n([r].concat(p),q);else n(p,q)}:n};var m=new(c("MercurySingletonProvider"))(l);f.exports=l}),null);
__d("MessengerSearchTypeahead.react",["cx","fbt","ix","AbstractTypeahead.react","Bootloader","Image.react","MercuryIDs","MercuryThreadIDMap","MercuryThreads","MercuryTypeaheadConstants","MercuryVanityIDMap.bs","MessengerActions","MessengerSearchFunnelLogger","MessengerSearchFunnelLoggerConstants","MessengerSearchSource","React","TypeaheadNavigation","ifRequired","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("MercuryThreadIDMap").get(),n=c("MercuryThreads").get(),o=c("React").PropTypes,p=j("86933"),q=100,r=null,s=null;k=babelHelpers.inherits(t,c("React").PureComponent);l=k&&k.prototype;function t(){var v,w;for(var x=arguments.length,y=Array(x),z=0;z<x;z++)y[z]=arguments[z];return w=(v=l.constructor).call.apply(v,[this].concat(y)),u.call(this),w}t.prototype.componentWillMount=function(){__p&&__p();var v=function v(x,y,z){var A=x.indexOf(y),B=A==-1?x.length-1:A-1;z(B==-1?x[x.length-1]:x[B])},w=function w(x,y,z){var A=x.indexOf(y)+1;z(A==x.length?x[0]:x[A])};v=c("TypeaheadNavigation").moveDown;w=c("TypeaheadNavigation").moveUp;this.$MessengerSearchTypeahead1=function(x){for(var y=arguments.length,z=Array(y>1?y-1:0),A=1;A<y;A++)z[A-1]=arguments[A];return v.apply(undefined,[s.orderEntries(x,this.props.queryString)].concat(z))}.bind(this);this.$MessengerSearchTypeahead2=function(x){for(var y=arguments.length,z=Array(y>1?y-1:0),A=1;A<y;A++)z[A-1]=arguments[A];return w.apply(undefined,[s.orderEntries(x,this.props.queryString)].concat(z))}.bind(this)};t.prototype.render=function(){var v=this.props.isFacebookChat?i._("\uac80\uc0c9"):i._("Messenger \uac80\uc0c9");return c("React").createElement("div",{className:"_3rh8"},c("React").createElement(c("AbstractTypeahead.react"),{"aria-label":i._("\uba54\uc2dc\uc9c0\ub97c \ubcf4\ub0bc \uce5c\uad6c"),autoHighlight:this.props.isFacebookChat,blurOnWindowBlur:false,className:c("joinClasses")(this.props.className||"","_5iwm"+(this.props.isFocused||!!this.props.queryString?" _5iwn":"")+" _150g"+(this.props.hideResults?" _1a03":"")),disabled:this.props.hideResults,inputClassName:"_3rhb navigationFocus",navigation:{moveUp:this.$MessengerSearchTypeahead1,moveDown:this.$MessengerSearchTypeahead2},onBlur:this.$MessengerSearchTypeahead3,onChange:this.$MessengerSearchTypeahead4,onFocus:this.$MessengerSearchTypeahead5,onMouseOver:this.$MessengerSearchTypeahead6,onClick:this.$MessengerSearchTypeahead6,onSelectAttempt:this.$MessengerSearchTypeahead7,placeholder:v.toString(),presenter:{ViewRenderer:r,alwaysVisibleOnFocus:true,extraRendererProps:{className:"_11_d",hasHoverState:this.props.isFacebookChat,isLoading:this.state.isLoading,onScrollIntoView:this.props.onScrollIntoView,viewer:this.props.viewer},maxEntries:this.props.maxEntries||q,sortEntries:this.$MessengerSearchTypeahead8,useLayer:false},queryString:this.props.queryString,role:"search",searchSource:c("MessengerSearchSource").getForFBID(this.props.viewer),searchSourceOptions:{onQueryFinished:this.$MessengerSearchTypeahead9,onQueryStarted:this.$MessengerSearchTypeahead10,showDefaultEntries:!this.props.isFacebookChat,showThreadSearchEntry:!this.props.isFacebookChat&&!!this.props.queryString},selectOnTab:true,spellCheck:false,showEntriesOnFocus:!this.props.isFacebookChat}),c("React").createElement(c("Image.react"),{onMouseDown:function(){var w;this.$MessengerSearchTypeahead11();(w=this.props).onClear.apply(w,arguments)}.bind(this),className:c("joinClasses")(this.props.className||"",(!this.props.queryString?"hidden_elem":"")+" _2xme"),src:p}))};t.prototype.$MessengerSearchTypeahead11=function(){c("MessengerSearchFunnelLogger").logClearQuery(c("MessengerSearchFunnelLoggerConstants").NAME)};t.propTypes={className:o.string,hideResults:o.bool,isFacebookChat:o.bool,isFocused:o.bool,maxEntries:o.number,onBlur:o.func,onChange:o.func,onClear:o.func,onFocus:o.func,onSelect:o.func.isRequired,onScrollIntoView:o.func,queryString:o.string,viewer:o.string.isRequired};var u=function u(){__p&&__p();this.state={isLoading:false,orderable:!!s};this.$MessengerSearchTypeahead3=function(){var v;(v=this.props).onBlur.apply(v,arguments);c("MessengerSearchFunnelLogger").endFunnel(c("MessengerSearchFunnelLoggerConstants").NAME)}.bind(this);this.$MessengerSearchTypeahead4=function(){var v;(v=this.props).onChange.apply(v,arguments)}.bind(this);this.$MessengerSearchTypeahead5=function(){var v;this.$MessengerSearchTypeahead6();(v=this.props).onFocus.apply(v,arguments)}.bind(this);this.$MessengerSearchTypeahead6=function(){if(!this.state.orderable)c("Bootloader").loadModules(["MessengerTypeaheadView.react","MessengerTypeaheadUtils"],function(v,w){c("ifRequired")("FantaTabsEagerBootloader",function(x){return x.bootload()});r=v;s=w;this.setState({orderable:true})}.bind(this),"MessengerSearchTypeahead.react")}.bind(this);this.$MessengerSearchTypeahead10=function(v){if(v===this.props.queryString)this.setState({isLoading:true})}.bind(this);this.$MessengerSearchTypeahead9=function(v){if(v===this.props.queryString)this.setState({isLoading:false})}.bind(this);this.$MessengerSearchTypeahead8=function(v){return s?s.sortEntries(v,this.props.queryString):v}.bind(this);this.$MessengerSearchTypeahead7=function(v){__p&&__p();var w,x=this,y=v.getUniqueID(),z=v.getType(),A=v.getAuxiliaryData().alias;if(A)c("MercuryVanityIDMap.bs").set(A,c("MercuryIDs").getParticipantIDFromUserID(y));if(z===c("MercuryTypeaheadConstants").SEARCH_TYPE){c("MessengerActions").changeQueryAll(this.props.queryString);c("MessengerSearchFunnelLogger").logContentSearchInitiation(c("MessengerSearchFunnelLoggerConstants").NAME,this.props.queryString)}else if(z===c("MercuryTypeaheadConstants").THREAD_TYPE)m.getClientIDFromServerID(y,function(B){this.props.onSelect(B,z);c("MessengerSearchFunnelLogger").logResultSelection(c("MessengerSearchFunnelLoggerConstants").NAME,this.props.queryString,B,c("MessengerSearchFunnelLoggerConstants").GROUP)}.bind(this));else(function(){__p&&__p();var B=void 0;switch(z){case c("MercuryTypeaheadConstants").FRIEND_TYPE:B=c("MessengerSearchFunnelLoggerConstants").USER_CONTACT;break;case c("MercuryTypeaheadConstants").NON_FRIEND_TYPE:B=c("MessengerSearchFunnelLoggerConstants").USER_NON_CONTACT;break;case c("MercuryTypeaheadConstants").FB4C_TYPE:B=c("MessengerSearchFunnelLoggerConstants").COWORKER;break;case c("MercuryTypeaheadConstants").GAME_TYPE:B=c("MessengerSearchFunnelLoggerConstants").GAME;break;case c("MercuryTypeaheadConstants").PAGE_TYPE:case c("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE:case c("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE:case c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE:B=c("MessengerSearchFunnelLoggerConstants").PAGE;break;default:B=c("MessengerSearchFunnelLoggerConstants").OTHER}n.getThreadMeta(c("MercuryIDs").getThreadIDFromUserID(y),function(C){this.props.onSelect(C.thread_id,z);c("MessengerSearchFunnelLogger").logResultSelection(c("MessengerSearchFunnelLoggerConstants").NAME,this.props.queryString,C.thread_id,B)}.bind(x))})()}.bind(this)};f.exports=t}),null);
__d("ChatTypeaheadWrapper.react",["cx","Arbiter","Bootloader","LoadOnRender.react","ChatConfig","ChatOpenTabEventLogger","ChatSidebarComposeLink.react","ChatSidebarSections","ChatSidebarSheet.react","ChatTypeaheadConstants","FantaTabActions","LazyComponent.react","MercuryIDs","MercuryParticipantTypes","MessengerDotComUpsellSheet.react","MessengerSearchFunnelLogger","MessengerSearchFunnelLoggerConstants","MessengerSearchTypeahead.react","React","Run","ChatSidebarDropdown.react","SidebarType","ChatSidebarActions","emptyFunction","getActiveElement","gkx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=40,l=c("ChatConfig").get("divebar_rounded_profile",false);function m(o){c("Arbiter").inform("sidebar/typeahead/active",o)}i=babelHelpers.inherits(n,c("React").Component);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.state={height:0,value:"",isSearching:false},this.$ChatTypeaheadWrapper1=function(){this.setState({isSearching:false,value:""});c("MessengerSearchFunnelLogger").endFunnel(c("MessengerSearchFunnelLoggerConstants").NAME)}.bind(this),p}n.prototype.componentDidMount=function(){if(this.props.isSidebar)c("Arbiter").subscribe("sidebar/resized",function(o,p){this.setState({height:p})}.bind(this));else c("Arbiter").subscribe("buddyList/resized",function(o,p){this.setState({height:p})}.bind(this))};n.prototype.componentWillUpdate=function(o,p){if(p.isSearching!==this.state.isSearching)m(p.isSearching)};n.prototype.render=function(){__p&&__p();var o=this.state.height!=null?Math.floor((this.state.height-k*2)/k):null;return c("React").createElement("div",{className:!l?"squareProfile":""},c("React").createElement(c("MessengerDotComUpsellSheet.react"),{className:"fbMessengerDotComUpsell"}),c("React").createElement(c("ChatSidebarSheet.react"),{className:"fbChatSidebarMessage"}),c("React").createElement(c("MessengerSearchTypeahead.react"),{className:c("gkx")("AT6J1vB0127_zCpL0d3C1CDK6TpXfjEXDoYutS_XbZEA9PsQy3Z-T6z-UhJgN1iSiqRIxb9juStJ1peN6QPRtgoq_yNdbXcfU-GsGYDVPbhirA")?"_62it":"",isFacebookChat:true,isFocused:true,maxEntries:o,queryString:this.state.value,viewer:this.props.id,onBlur:this.$ChatTypeaheadWrapper1,onChange:function(p){var q=p.target.value;this.setState({isSearching:q!=="",value:q})}.bind(this),onClear:c("emptyFunction"),onFocus:this.$ChatTypeaheadWrapper2,onScrollIntoView:c("emptyFunction"),onSelect:function(p,q){__p&&__p();c("getActiveElement")().blur();if(q===c("ChatTypeaheadConstants").MEETING_ROOM_PAGE_TYPE)c("Bootloader").loadModules(["goURI"],function(s){this.setState({isSearching:false,value:""});var r=c("MercuryIDs").getUserIDFromThreadID(p);s("/"+(r||""))}.bind(this),"ChatTypeaheadWrapper.react");else{c("FantaTabActions").openTab(p,"chat_sidebar_typeahead");var r=null;if(!q||q===c("MercuryParticipantTypes").FRIEND||q===c("ChatTypeaheadConstants").FRIEND_TYPE||q===c("ChatTypeaheadConstants").PAGE_TYPE||q===c("ChatTypeaheadConstants").USER_TYPE)if(c("MercuryIDs").isValidThreadID(p))r=c("MercuryIDs").getUserIDFromThreadID(p);c("ChatOpenTabEventLogger").logClickOpen(c("ChatSidebarSections").TYPEAHEAD,p,r)}}.bind(this)}),this.props.isSidebar?c("React").createElement("div",{className:"_531b"},c("React").createElement(c("ChatSidebarDropdown.react"),{sidebarType:c("SidebarType").SIDEBAR,onToggleSidebar:c("ChatSidebarActions").disable}),c("React").createElement(c("ChatSidebarComposeLink.react"),{className:"_3a-4 _5q85"}),c("gkx")("AT6J1vB0127_zCpL0d3C1CDK6TpXfjEXDoYutS_XbZEA9PsQy3Z-T6z-UhJgN1iSiqRIxb9juStJ1peN6QPRtgoq_yNdbXcfU-GsGYDVPbhirA")?c("React").createElement(c("LoadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),null),loader:function p(q){c("Bootloader").loadModules(["ChatSidebarGroupCreateButtonReact.bs"],function(r){var s=r.jsComponent;return q(s)},"ChatTypeaheadWrapper.react")},placeholder:c("React").createElement("div",{className:"_1-4-"})}):null):null)};n.prototype.$ChatTypeaheadWrapper2=function(){c("MessengerSearchFunnelLogger").startFunnel(c("MessengerSearchFunnelLoggerConstants").NAME,c("MessengerSearchFunnelLoggerConstants").WWW_SIDEBAR_TAG,c("MessengerSearchFunnelLoggerConstants").UNIVERSAL_SEARCH)};f.exports=n}),null);
__d("ChatTypeaheadCore",["ChatTypeaheadWrapper.react","React","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";var h={init:function i(j,k,l){c("ReactDOM").render(c("React").createElement(c("ChatTypeaheadWrapper.react"),{id:k,isSidebar:l}),j)}};f.exports=h}),null);
__d("FBPaymentsDialogStore",["FBPaymentsDialogActions","FBPaymentsDispatcher","FluxStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("FBPaymentsDispatcher"));this.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null}}j.prototype.__onDispatch=function(k){var l=k.type,m=k.data;switch(l){case c("FBPaymentsDialogActions").types.SHOW_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:m.dialogClass,dialogProps:m.dialogProps};this.__emitChange();break;case c("FBPaymentsDialogActions").types.HIDE_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null};this.__emitChange();break}};j.prototype.getState=function(){return this.$FBPaymentsDialogStore1};f.exports=new j()}),null);
__d("FBPaymentsDialogContainer.react",["FBPaymentsDialogStore","FBPaymentsDispatcher","FluxContainer","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.calculateState=function(){return c("FBPaymentsDialogStore").getState()};j.getStores=function(){return[c("FBPaymentsDialogStore")]};j.prototype.componentWillMount=function(){c("FBPaymentsDispatcher").explicitlyRegisterStore(c("FBPaymentsDialogStore"))};j.prototype.render=function(){if(!this.state.dialogClass)return null;var k=this.state.dialogClass;return c("React").createElement(k,babelHelpers["extends"]({},this.state.dialogProps,{key:"dialog"}))};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("FBPaymentsDialogContainerMount",["FBPaymentsDialogContainer.react","React","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";var h={mount:function i(j){c("ReactDOM").render(c("React").createElement(c("FBPaymentsDialogContainer.react"),null),j)}};f.exports=h}),null);
__d("ChatTimezoneWarning",["MercuryParticipants","MercuryViewer","MessengerBotIDs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=1,i={updateUserTimezoneWarning:function j(k,l,m){__p&&__p();c("MercuryParticipants").get(c("MercuryViewer").getID(),function(n){__p&&__p();var o=n.employee,p=n.timezone,q=0;if(k.timezone_warning_dismiss_count!==undefined){var r=k.timezone_warning_dismiss_count;for(var s=Object.entries(r),t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var v;if(t){if(u>=s.length)break;v=s[u++]}else{u=s.next();if(u.done)break;v=u.value}var w=v,x=w[0],y=w[1];if(x===n.fbid)q=Number(y)}}else return;if(o&&p&&q<h)c("MercuryParticipants").getMulti(k.participants,function(z){__p&&__p();var A={},B=true;for(var C in z){B=B&&z[C].employee;var D=!!c("MessengerBotIDs")[z[C].fbid];if(z[C].timezone!==undefined&&z[C].timezone!==null&&p!==z[C].timezone&&!D){var E=z[C].fbid;A[E]=z[C]}}if(Object.keys(A).length>0&&B){A.self=n;l(A)}else m()})})}};f.exports=i}),null);
__d("FantaAvailableStatus",["AvailableListConstants","ChatVisibility","MercuryIDs","PresenceStatus","ShortProfiles"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports={isAvailable:function h(i,j){var k=void 0,l=this.getStatus(i,j),m=c("MercuryIDs").getUserIDFromThreadID(j);if(m)k=c("ShortProfiles").getNow(m);return l===c("AvailableListConstants").ACTIVE&&(k===undefined||k===null||!k.is_messenger_only)},getStatus:function h(i,j){__p&&__p();var k=c("AvailableListConstants").OFFLINE,l=c("MercuryIDs").getUserIDFromThreadID(j);if(l)k=c("PresenceStatus").get(l);else if(i){var m=i.participants.map(function(n){return c("MercuryIDs").getUserIDFromParticipantID(n)});k=c("PresenceStatus").getGroup(m)}if(!c("ChatVisibility").isOnline())k=c("AvailableListConstants").OFFLINE;return k}}}),null);
__d("ChatVideoCallButton.react",["cx","fbt","invariant","Bootloader","FantaAvailableStatus","FBIDCheck","FBRTCCallabilityStore","FBRTCCore","immutable","ImmutableObject","Keys","LayerFadeOnHide","Link.react","MercuryIDs","MercuryParticipants","MercuryThreadIDMap","MessengerRTCFunnelLogger","ReactComponentWithPureRenderMixin","React","RTCCallState","StoreAndPropBasedStateMixin","TrackingNodes","FBRTCLogger","VideoCallTypedLogger","XUIAmbientNUX.react"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=c("MercuryThreadIDMap").get(),l=c("FBRTCLogger").Trigger,m=c("React").PropTypes,n={isCallable:false,shown:false,user:null},o=c("React").createClass({displayName:"ChatVideoCallButton",mixins:[c("ReactComponentWithPureRenderMixin"),c("StoreAndPropBasedStateMixin")(c("FBRTCCallabilityStore"),c("MercuryParticipants"))],propTypes:{isAudio:m.bool,isGroupChat:m.bool,onRTCNuxCloseButtonClick:m.func.isRequired,rtcNuxShown:m.bool.isRequired,threadID:m.string,thread:m.object,viewer:m.string.isRequired,shown:m.bool,rtcCallData:m.object.isRequired},getDefaultProps:function p(){return{shown:true,rtcCallData:{call_state:"NO_ONGOING_CALL"}}},statics:{calculateState:function p(q){__p&&__p();if(!q.threadID)return babelHelpers["extends"]({},n);if(q.isGroupChat)return{isCallable:true,shown:q.shown,user:null};var r=c("MercuryIDs").getUserIDFromThreadID(q.threadID);if(r===q.viewer||!c("FBIDCheck").isUser_deprecated(r))return babelHelpers["extends"]({},n);r&&c("FBIDCheck").isUser_deprecated(r)||j(0);var s=c("MercuryIDs").getParticipantIDFromUserID(r),t=c("MercuryParticipants").getOrFetch(s);return{isCallable:c("FBRTCCallabilityStore").isCallable(r,q.thread),shown:q.shown,user:t}}},getTooltipLabel:function p(){if(this.props.isGroupChat)return this.props.isAudio?i._("\uadf8\ub8f9 \ud1b5\ud654\ub97c \uc2dc\uc791\ud569\ub2c8\ub2e4"):i._("\uadf8\ub8f9 \uc601\uc0c1 \ud1b5\ud654\ub97c \uc2dc\uc791\ud569\ub2c8\ub2e4");var q=this.state.user;if(!q)return undefined;return this.props.isAudio?c("FBRTCCallabilityStore").voiceCallButtonTooltip(q.fbid,q.short_name,this.state.isCallable):c("FBRTCCallabilityStore").callButtonTooltip(q.fbid,q.short_name,this.state.isCallable)},render:function p(){if(!this.state.shown)return null;var q=c("TrackingNodes").getTrackingInfo(this.props.isAudio?c("TrackingNodes").types.VIDEOCHAT:c("TrackingNodes").types.VOICECHAT),r=JSON.stringify({videochat:"call_clicked_bhat_tab"}),s=this.props.threadID&&c("FantaAvailableStatus").isAvailable(this.props.thread,this.props.threadID),t=s&&this.state.isCallable;return c("React").createElement("div",null,c("React").createElement(c("Link.react"),{"aria-label":this.getTooltipLabel(),className:"button _3olv"+(this.props.isAudio?" _2fpc":"")+(!this.props.isAudio?" _2fpd":"")+(this.state.isCallable?" enabled":""),"data-ft":q,"data-gt":r,"data-hover":"tooltip","data-tooltip-content":this.getTooltipLabel(),"data-tooltip-position":"above",onClick:this._handleClick,onKeyUp:this._handleKeyUp,ref:"button"}),c("React").createElement("div",{className:t&&!this.props.isAudio?"_18pe":""}),c("React").createElement(c("XUIAmbientNUX.react"),{alignment:"right",behaviors:{LayerFadeOnHide:c("LayerFadeOnHide")},contextRef:function(){return this.refs.button}.bind(this),onCloseButtonClick:this.props.onRTCNuxCloseButtonClick,shown:this.props.rtcNuxShown,width:"auto"},i._("\uc774\uc81c \uadf8\ub8f9 \ud1b5\ud654\ub97c \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")))},_handleClick:function p(q){q.preventDefault();this._startCall()},_handleKeyUp:function p(q){q.preventDefault();if(q.keyCode!==c("Keys").RETURN)return;if(q.target){q.target instanceof HTMLElement||j(0);q.target.blur()}this._startCall()},_startCall:function p(){c("MessengerRTCFunnelLogger").startFunnel("ChatTab");if(!this.state.isCallable){c("MessengerRTCFunnelLogger").endFunnel("callee_not_callable");return}this.props.onRTCNuxCloseButtonClick();this._initiateCall()},_initiateCall:function p(){__p&&__p();var q=this.props,r=q.isAudio,s=q.isGroupChat,t=q.threadID;!!t||j(0);var u=r?"audio":"video";if(s)if(c("MercuryIDs").isLocalThread(t))k.getServerIDFromClientID(t,function(v){return this._initiateGroupCall(v)}.bind(this));else{c("MessengerRTCFunnelLogger").appendAction("start_in_group_thread");this._initiateGroupCall(c("MercuryIDs").getThreadFBIDFromThreadID(t))}else{c("MessengerRTCFunnelLogger").appendAction("start_in_p2p_thread");c("FBRTCCore").startOutgoingCall(this.state.user.fbid,u,!!r);new(c("VideoCallTypedLogger"))().setEvent("chat_tab_call_click").log()}},_initiateGroupCall:function p(q){__p&&__p();var r=this.props,s=r.isAudio,t=r.rtcCallData,u=t.call_state,v=t.server_info_data;if(u!=="NO_ONGOING_CALL"&&v){c("MessengerRTCFunnelLogger").appendAction("join_existing_call");c("FBRTCCore").startGroupCall({conferenceName:"GROUP:"+q,hasVideo:!s,serverInfoData:v,trigger:u!==c("RTCCallState").AUDIO_GROUP_CALL?s?l.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:l.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:s?l.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON:l.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON});return}c("Bootloader").loadModules(["FBRTCSupport","MercuryThreads","MessengerParticipantsFetcher.bs","MessengerRTCGroupCallUnsupportedBrowserDialogController","MessengerRTCGroupCallParticipantsPickerDialogController"],function(w,x,y,z,A){__p&&__p();if(!w.isGroupCallWebtrcSupported()){c("MessengerRTCFunnelLogger").endFunnel("unsupported_browser");z.render({hasVideo:!this.props.isAudio});return}x.get().getThreadMeta(this.props.threadID,function(B){var C=B.participants?B.participants.filter(function(D){return D!==c("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)}.bind(this)).map(function(D){return c("MercuryIDs").getUserIDFromParticipantID(D)}):[];if(C.length>0)y.fetch({ids:C}).done(function(C){c("MessengerRTCFunnelLogger").appendAction("render_participant_picker");A.render({participants:c("immutable").Map(C.map(function(D){return[D.id,new(c("ImmutableObject"))(D)]})),thread:B,viewerID:this.props.viewer,trigger:this.props.isAudio?l.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON:l.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON,conferenceName:"GROUP:"+q,hasVideo:!this.props.isAudio})}.bind(this))}.bind(this))}.bind(this),"ChatVideoCallButton.react")}});f.exports=o}),null);
__d("FantaTabsEagerBootloader",["Bootloader","ChatPerfConfig","emptyFunction","ifRequired"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=function j(k){c("ifRequired")("FantaAppStore",function(l){return l.addReducers(k)});h=c("emptyFunction")},i={bootload:function j(){if(!c("ChatPerfConfig").eager_bootload)return;c("ifRequired")("FantaTabsSlimApp",function(k){k.silentPumpUp()});c("Bootloader").loadModules(["FantaReducersGetMessages","FantaTabsReactApp","MessengerGraphQLThreadFetcher.bs"],function(k){h(k)},"FantaTabsEagerBootloader")}};f.exports=i}),null);
__d("MNCommerceDialogContainer.react",["MNCommerceDialogStateStore","PureStoreBasedStateMixin","React"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").createClass({displayName:"MNCommerceDialogContainer",mixins:[c("PureStoreBasedStateMixin")(c("MNCommerceDialogStateStore"))],statics:{calculateState:function i(){var j=c("MNCommerceDialogStateStore").getDialogContainer();return{dialogContainer:j}}},render:function i(){var j=this.state.dialogContainer;if(!j)return null;return c("React").createElement(j,null)}});f.exports=h}),null);
__d("MNCommerceDialogContainerMount",["MNCommerceDialogContainer.react","React","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";var h={mount:function i(j){c("ReactDOM").render(c("React").createElement(c("MNCommerceDialogContainer.react"),null),j)}};f.exports=h}),null);
__d("FBRTCIceStatsParser",[],(function a(b,c,d,e,f,g){__p&&__p();var h=null;i.getInstance=function(){"use strict";if(!h)h=new i();return h};function i(){"use strict"}i.prototype.extractIceInfo=function(j){"use strict";var k=[],l=j.split("\r\n");for(var m=0;m<l.length;m++){var n=l[m];if(this.$FBRTCIceStatsParser1(n))k.push({gen:this.$FBRTCIceStatsParser2(n),type:this.$FBRTCIceStatsParser3(n)})}return k};i.prototype.$FBRTCIceStatsParser1=function(j){"use strict";return j.indexOf("candidate:")>-1};i.prototype.$FBRTCIceStatsParser2=function(j){"use strict";var k=0,l=j.match(/generation (\d+)/);if(l)k=parseInt(l[1],10);return k};i.prototype.$FBRTCIceStatsParser3=function(j){"use strict";var k=j.match(/typ (host|relay|srflx|prflx)/);if(k)return k[1];else return"unknown"};f.exports=i}),null);
__d("FBRTCCallSummary",["FBRTCConstants","FBRTCIceStatsParser","FBRTCLogger","FBRTCUtils","SiteData","UserAgentData","performanceNow"],(function a(b,c,d,e,f,g){__p&&__p();var h=5*60*1e3,i={CALL_STARTED:"started",POPUP_OPENED:"opened",SENT_OFFER:"s_o",RECV_OFFER:"r_o",SENT_OFFER_ACK:"s_oack",RECV_OFFER_ACK:"r_oack",SENT_RETRIED_OFFER:"s_o2",RECV_RETRIED_OFFER:"r_o2",SENT_RETRIED_OFFER_ACK:"s_oack2",RECV_RETRIED_OFFER_ACK:"r_oack2",SENT_PRANSWER:"s_pr",RECV_PRANSWER:"r_pr",NETWORK_READY:"network_ready",SENT_ANSWER:"s_a",RECV_ANSWER:"r_a",SENT_ANSWER_ACK:"s_aack",RECV_ANSWER_ACK:"r_aack",SENT_RETRIED_ANSWER:"s_a2",RECV_RETRIED_ANSWER:"r_a2",SENT_RETRIED_ANSWER_ACK:"s_aack2",RECV_RETRIED_ANSWER_ACK:"r_aack2",SENT_OK:"s_ok",RECV_OK:"r_ok",CALL_CONNECTED:"connected",CALL_ENDED:"ended"},j={ESCALATION_IS_AVAILABLE:"esc_available",USER_INITIATED_REQUEST:"out_started",RECEIVED_INCOMING_REQUEST:"inc_started",REJECTED_INVALID_P2P_STATE:"rej_invalid_state",CONNECTING_TO_MULTIWAY:"u_connecting_mw",CONNECTED_TO_MULTIWAY:"u_connected_mw",PEER_CONNECTING_TO_MULTIWAY:"p_connecting_mw",PEER_CONNECTED_TO_MULTIWAY:"p_connected_mw",READY_TO_ESCALATE:"ready_esc",PEER_FAILED_TO_CONNECT_TO_MULTIWAY:"p_fail_conn",MULTIWAY_CALL_ENDED:"mw_call_ended",TIMED_OUT:"timed_out",PEER_ABORTED:"p_aborted",INTERNAL_ERROR:"internal_err"};function k(l){"use strict";__p&&__p();this.peerID=String(l.peerID);this.callID=String(l.callID);this.$FBRTCCallSummary1=l.isCaller;this.$FBRTCCallSummary2=c("FBRTCUtils").getLocalUploadLogLevel();this.$FBRTCCallSummary11=new Date().valueOf();this.$FBRTCCallSummary3=null;this.$FBRTCCallSummary4={};this.$FBRTCCallSummary6={};this.$FBRTCCallSummary34=null;this.$FBRTCCallSummary35=null;this.$FBRTCCallSummary36=null;this.$FBRTCCallSummary13=0;this.$FBRTCCallSummary14=0;this.$FBRTCCallSummary33=false;this.$FBRTCCallSummary21={};this.$FBRTCCallSummary22={};this.$FBRTCCallSummary7={};this.$FBRTCCallSummary8={};this.$FBRTCCallSummary9={};this.$FBRTCCallSummary10={};this.$FBRTCCallSummary23=null;this.$FBRTCCallSummary16=c("performanceNow")();this.$FBRTCCallSummary12=0;this.$FBRTCCallSummary5={};this.$FBRTCCallSummary15=this.$FBRTCCallSummary16;this.$FBRTCCallSummary17=0;this.$FBRTCCallSummary18={};this.addExtraInfo(c("FBRTCLogger").Key.DEVICE_INFO,this.$FBRTCCallSummary37());this.$FBRTCCallSummary38();this.$FBRTCCallSummary20=c("FBRTCIceStatsParser").getInstance();this.$FBRTCCallSummary19=c("FBRTCLogger").getInstance()}k.prototype.toJsonString=function(){"use strict";this.$FBRTCCallSummary14=new Date().valueOf();return JSON.stringify({version:k.CURRENT_SUMMARY_VERSION,peerID:this.peerID,callID:this.callID,isCaller:this.$FBRTCCallSummary1,uploadLogLevel:this.$FBRTCCallSummary2,clientVersion:this.$FBRTCCallSummary23,callType:this.$FBRTCCallSummary28,isUsingMultiway:this.$FBRTCCallSummary24,conferenceName:this.$FBRTCCallSummary26,activeConn:this.$FBRTCCallSummary25,escP2PCallID:this.$FBRTCCallSummary27,escConfName:this.$FBRTCCallSummary30,serverInfoData:this.$FBRTCCallSummary29,localVideoDuration:this.$FBRTCCallSummary31,remoteVideoDuration:this.$FBRTCCallSummary32,startTime:this.$FBRTCCallSummary11,trigger:this.$FBRTCCallSummary3,signalingTime:this.$FBRTCCallSummary4,escStateTimes:this.$FBRTCCallSummary6,endCallReason:this.$FBRTCCallSummary34,endCallSubreason:this.$FBRTCCallSummary35,isRemoteEnded:this.$FBRTCCallSummary36,lastUpdatedTime:this.$FBRTCCallSummary13,lastSerializedTime:this.$FBRTCCallSummary14,unsetOnRetrieve:this.$FBRTCCallSummary33,openCount:this.$FBRTCCallSummary17,extraInfo:this.$FBRTCCallSummary18,pcStats:this.$FBRTCCallSummary21,captureStats:this.$FBRTCCallSummary22,gen0IceSentCount:this.$FBRTCCallSummary7,gen0IceReceivedCount:this.$FBRTCCallSummary8,iceSentCount:this.$FBRTCCallSummary9,iceReceivedCount:this.$FBRTCCallSummary10,newSignalingTime:this.$FBRTCCallSummary5,accumulatedCallTime:this.$FBRTCCallSummary39()})};k.fromJsonString=function(l){"use strict";__p&&__p();var m=void 0;try{m=JSON.parse(l)}catch(n){return null}if(m.version!==k.CURRENT_SUMMARY_VERSION)return null;if(!Object.prototype.hasOwnProperty.call(m,"peerID")||!Object.prototype.hasOwnProperty.call(m,"callID")||!Object.prototype.hasOwnProperty.call(m,"isCaller")||!Object.prototype.hasOwnProperty.call(m,"startTime")||!Object.prototype.hasOwnProperty.call(m,"trigger")||!Object.prototype.hasOwnProperty.call(m,"signalingTime")||!Object.prototype.hasOwnProperty.call(m,"endCallReason")||!Object.prototype.hasOwnProperty.call(m,"isRemoteEnded")||!Object.prototype.hasOwnProperty.call(m,"lastUpdatedTime")||!Object.prototype.hasOwnProperty.call(m,"lastSerializedTime"))return null;var o=new k({peerID:m.peerID,callID:m.callID,isCaller:m.isCaller});o.$FBRTCCallSummary2=m.uploadLogLevel;o.$FBRTCCallSummary23=m.clientVersion;o.$FBRTCCallSummary11=m.startTime;o.$FBRTCCallSummary3=m.trigger;o.$FBRTCCallSummary4=m.signalingTime;o.$FBRTCCallSummary34=m.endCallReason;o.$FBRTCCallSummary35=m.endCallSubreason;o.$FBRTCCallSummary36=m.isRemoteEnded;o.$FBRTCCallSummary13=m.lastUpdatedTime;o.$FBRTCCallSummary14=m.lastSerializedTime;if(m.callType)o.$FBRTCCallSummary28=m.callType;if(m.isUsingMultiway!=null)o.$FBRTCCallSummary24=m.isUsingMultiway;if(m.conferenceName)o.$FBRTCCallSummary26=m.conferenceName;if(m.escP2PCallID)o.$FBRTCCallSummary27=m.escP2PCallID;if(m.activeConn)o.$FBRTCCallSummary25=m.activeConn;if(m.escConfName)o.$FBRTCCallSummary30=m.escConfName;if(m.serverInfoData)o.$FBRTCCallSummary29=m.serverInfoData;if(m.localVideoDuration)o.$FBRTCCallSummary31=m.localVideoDuration;if(m.remoteVideoDuration)o.$FBRTCCallSummary32=m.remoteVideoDuration;if(m.unsetOnRetrieve)o.$FBRTCCallSummary33=m.unsetOnRetrieve;if(m.openCount)o.$FBRTCCallSummary17=m.openCount;if(m.extraInfo)o.$FBRTCCallSummary18=m.extraInfo;if(m.pcStats)o.$FBRTCCallSummary21=m.pcStats;if(m.captureStats)o.$FBRTCCallSummary22=m.captureStats;if(m.gen0IceSentCount)o.$FBRTCCallSummary7=m.gen0IceSentCount;if(m.gen0IceReceivedCount)o.$FBRTCCallSummary8=m.gen0IceReceivedCount;if(m.iceSentCount)o.$FBRTCCallSummary9=m.iceSentCount;if(m.iceReceivedCount)o.$FBRTCCallSummary10=m.iceReceivedCount;if(m.newSignalingTime)o.$FBRTCCallSummary5=m.newSignalingTime;if(m.accumulatedCallTime)o.$FBRTCCallSummary12=m.accumulatedCallTime;if(m.escStateTimes)o.$FBRTCCallSummary6=m.escStateTimes;return o};k.restoreOrInitialize=function(l,m,n,o,p,q){"use strict";__p&&__p();m=String(m);n=String(n);var r=l.retrieveCallSummary(m,n);if(!r){r=new k({peerID:m,callID:n,isCaller:o});if(p){r.onFullMessageReceived({msg:p});r.onOfferAckSent(p)}else r.onCallStarted(q||c("FBRTCLogger").Trigger.UNKNOWN);c("FBRTCLogger").getInstance().logError(m,n,"Missing call summary from storage")}else if(r.$FBRTCCallSummary33){r.$FBRTCCallSummary34=null;r.$FBRTCCallSummary35=null;r.$FBRTCCallSummary36=null;delete r.$FBRTCCallSummary4[i.CALL_ENDED];delete r.$FBRTCCallSummary5[i.CALL_ENDED];r.$FBRTCCallSummary33=null}return r};k.logSavedSummaries=function(l){"use strict";__p&&__p();var m=l.getLoggableSummaries(),n=m.length;if(n<=0)return;var o=c("FBRTCLogger").getInstance(),p=[];for(var q=0;q<n;q++){var r=m[q];o.logEndCallSummary(r);p.push({peerID:r.peerID,callID:r.callID})}l.removeCallSummaries(p);o.logToConsole("Logged pending summaries: "+n)};k.prototype.save=function(l){"use strict";var m=c("performanceNow")(),n=m-this.$FBRTCCallSummary15;if(n>h){this.$FBRTCCallSummary19.logInfo(this.peerID,this.callID,"Summary too old: "+n);return}l.storeCallSummary(this.peerID,this.callID,this);this.$FBRTCCallSummary15=m};k.prototype.getLastUpdatedTime=function(){"use strict";return this.$FBRTCCallSummary13};k.prototype.setLastUpdatedTime=function(l){"use strict";this.$FBRTCCallSummary13=l};k.prototype.getExtraInfo=function(){"use strict";return this.$FBRTCCallSummary18};k.prototype.getCallTrigger=function(){"use strict";return this.$FBRTCCallSummary3};k.prototype.addExtraInfo=function(l,m){"use strict";this.$FBRTCCallSummary18[l]=m;this.$FBRTCCallSummary38()};k.prototype.isCaller=function(){"use strict";return this.$FBRTCCallSummary1};k.prototype.isNetworkReady=function(){"use strict";if(this.$FBRTCCallSummary4[i.NETWORK_READY])return true;else return false};k.prototype.isAnswerReceived=function(){"use strict";if(this.$FBRTCCallSummary4[i.RECV_ANSWER])return true;else return false};k.prototype.onCallStarted=function(l){"use strict";this.$FBRTCCallSummary3=l;this.$FBRTCCallSummary40(i.CALL_STARTED);this.$FBRTCCallSummary38()};k.prototype.onPopupOpened=function(){"use strict";this.$FBRTCCallSummary40(i.POPUP_OPENED);this.$FBRTCCallSummary17++;this.$FBRTCCallSummary38()};k.prototype.setPcStats=function(l){"use strict";this.$FBRTCCallSummary21=l;this.$FBRTCCallSummary38()};k.prototype.setVideoCaptureStats=function(l,m){"use strict";this.$FBRTCCallSummary22={w:l,h:m};this.$FBRTCCallSummary38()};k.prototype.setVideoCaptureConstraints=function(l){"use strict";this.$FBRTCCallSummary22=l;this.$FBRTCCallSummary38()};k.prototype.setUploadLogLevel=function(l){"use strict";this.$FBRTCCallSummary2=l;this.$FBRTCCallSummary38()};k.prototype.getCallType=function(){"use strict";return this.$FBRTCCallSummary28};k.prototype.setCallType=function(l){"use strict";this.$FBRTCCallSummary28=l;this.addExtraInfo("call_type",l);this.$FBRTCCallSummary38()};k.prototype.setVideoDurations=function(l,m){"use strict";this.$FBRTCCallSummary31=l;this.$FBRTCCallSummary32=m;this.$FBRTCCallSummary38()};k.prototype.setIsUsingMultiway=function(l){"use strict";this.$FBRTCCallSummary24=l;this.$FBRTCCallSummary38()};k.prototype.setConferenceName=function(l){"use strict";this.$FBRTCCallSummary26=l;this.$FBRTCCallSummary38()};k.prototype.setServerInfoData=function(l){"use strict";this.$FBRTCCallSummary29=l;this.$FBRTCCallSummary38()};k.prototype.setActiveConnection=function(l){"use strict";this.$FBRTCCallSummary25=l;this.$FBRTCCallSummary38()};k.prototype.setEscalationP2PCallID=function(l){"use strict";this.$FBRTCCallSummary27=l;this.$FBRTCCallSummary38()};k.prototype.setEscalationConferenceName=function(l){"use strict";this.$FBRTCCallSummary30=l;this.$FBRTCCallSummary38()};k.prototype.onOfferAckSent=function(l){"use strict";this.onMessageSent({type:c("FBRTCConstants").PayloadType.OFFER_ACK,flag:l.flag})};k.prototype.onMessageSent=function(l){"use strict";__p&&__p();var m=l.flag===1;switch(l.type){case c("FBRTCConstants").PayloadType.OFFER:this.$FBRTCCallSummary41(m,i.SENT_OFFER,i.SENT_RETRIED_OFFER);this.$FBRTCCallSummary42(l,this.$FBRTCCallSummary7,this.$FBRTCCallSummary9);break;case c("FBRTCConstants").PayloadType.ANSWER:this.$FBRTCCallSummary41(m,i.SENT_ANSWER,i.SENT_RETRIED_ANSWER);this.$FBRTCCallSummary42(l,this.$FBRTCCallSummary7,this.$FBRTCCallSummary9);break;case c("FBRTCConstants").PayloadType.OK:this.$FBRTCCallSummary40(i.SENT_OK);break;case c("FBRTCConstants").PayloadType.PRANSWER:this.$FBRTCCallSummary40(i.SENT_PRANSWER);break;case c("FBRTCConstants").PayloadType.OFFER_ACK:this.$FBRTCCallSummary41(m,i.SENT_OFFER_ACK,i.SENT_RETRIED_OFFER_ACK);break;case c("FBRTCConstants").PayloadType.ANSWER_ACK:this.$FBRTCCallSummary41(m,i.SENT_ANSWER_ACK,i.SENT_RETRIED_ANSWER_ACK);break;case c("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$FBRTCCallSummary42(l,this.$FBRTCCallSummary7,this.$FBRTCCallSummary9);break;default:}this.$FBRTCCallSummary38()};k.prototype.$FBRTCCallSummary42=function(l,m,n){"use strict";var o=null,p=null,q=this.$FBRTCCallSummary20.extractIceInfo(l.sdp);for(var r=0;r<q.length;r++){o=q[r].gen;p=q[r].type;if(o===0)this.$FBRTCCallSummary43(m,p);this.$FBRTCCallSummary43(n,p)}};k.prototype.$FBRTCCallSummary43=function(l,m){"use strict";if(!l[m])l[m]=1;else l[m]=l[m]+1};k.prototype.$FBRTCCallSummary44=function(l){"use strict";this.addExtraInfo(c("FBRTCLogger").Key.PEER_IS_MOBILE,l.isFromMobile()?"1":"0")};k.prototype.onFullMessageReceived=function(l){"use strict";__p&&__p();var m=l.msg,n=m.flag===1;switch(m.type){case c("FBRTCConstants").PayloadType.OFFER:this.$FBRTCCallSummary44(l);this.$FBRTCCallSummary41(n,i.RECV_OFFER,i.RECV_RETRIED_OFFER);this.$FBRTCCallSummary42(m,this.$FBRTCCallSummary8,this.$FBRTCCallSummary10);break;case c("FBRTCConstants").PayloadType.ANSWER:this.$FBRTCCallSummary44(l);this.$FBRTCCallSummary41(n,i.RECV_ANSWER,i.RECV_RETRIED_ANSWER);this.$FBRTCCallSummary42(m,this.$FBRTCCallSummary8,this.$FBRTCCallSummary10);break;case c("FBRTCConstants").PayloadType.OK:this.$FBRTCCallSummary40(i.RECV_OK);break;case c("FBRTCConstants").PayloadType.PRANSWER:this.$FBRTCCallSummary40(i.RECV_PRANSWER);break;case c("FBRTCConstants").PayloadType.OFFER_ACK:this.$FBRTCCallSummary41(n,i.RECV_OFFER_ACK,i.RECV_RETRIED_OFFER_ACK);break;case c("FBRTCConstants").PayloadType.ANSWER_ACK:this.$FBRTCCallSummary41(n,i.RECV_ANSWER_ACK,i.RECV_RETRIED_ANSWER_ACK);break;case c("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$FBRTCCallSummary42(m,this.$FBRTCCallSummary8,this.$FBRTCCallSummary10);break;default:}this.$FBRTCCallSummary38()};k.prototype.onMsgAckReceived=function(l,m){"use strict";var n=l.msg.flag===1;if(m)this.$FBRTCCallSummary41(n,i.RECV_OFFER_ACK,i.RECV_RETRIED_OFFER_ACK);else this.$FBRTCCallSummary41(n,i.RECV_ANSWER_ACK,i.RECV_RETRIED_ANSWER_ACK)};k.prototype.onNetworkReady=function(){"use strict";this.$FBRTCCallSummary40(i.NETWORK_READY);this.$FBRTCCallSummary38()};k.prototype.onCallConnected=function(){"use strict";this.$FBRTCCallSummary40(i.CALL_CONNECTED);this.$FBRTCCallSummary38()};k.prototype.onCallEnded=function(l,m,n,o){"use strict";this.$FBRTCCallSummary33=n;this.$FBRTCCallSummary34=String(l);this.$FBRTCCallSummary35=o;this.$FBRTCCallSummary36=m;this.$FBRTCCallSummary40(i.CALL_ENDED);this.$FBRTCCallSummary38()};k.prototype.setOfferSentTime=function(){"use strict";this.$FBRTCCallSummary40(i.SENT_OFFER)};k.prototype.setOfferAckReceivedTime=function(){"use strict";this.$FBRTCCallSummary40(i.RECV_OFFER_ACK)};k.prototype.setAnswerSentTime=function(){"use strict";this.$FBRTCCallSummary40(i.SENT_ANSWER)};k.prototype.setAnswerReceivedTime=function(){"use strict";this.$FBRTCCallSummary40(i.RECV_ANSWER)};k.prototype.setEscalationAvailable=function(){"use strict";this.$FBRTCCallSummary45(j.ESCALATION_IS_AVAILABLE)};k.prototype.setEscalationInitiated=function(){"use strict";this.$FBRTCCallSummary45(j.USER_INITIATED_REQUEST)};k.prototype.setReceivedEscalationRequest=function(){"use strict";this.$FBRTCCallSummary45(j.RECEIVED_INCOMING_REQUEST)};k.prototype.setInvalidP2PEscalationState=function(){"use strict";this.$FBRTCCallSummary45(j.REJECTED_INVALID_P2P_STATE)};k.prototype.setEscalationConnectingToMultiway=function(){"use strict";this.$FBRTCCallSummary45(j.CONNECTING_TO_MULTIWAY)};k.prototype.setEscalationConnectedToMultiway=function(){"use strict";this.$FBRTCCallSummary45(j.CONNECTED_TO_MULTIWAY)};k.prototype.setEscalationPeerConnectingToMultiway=function(){"use strict";this.$FBRTCCallSummary45(j.PEER_CONNECTING_TO_MULTIWAY)};k.prototype.setEscalationPeerConnectedToMultiway=function(){"use strict";this.$FBRTCCallSummary45(j.PEER_CONNECTED_TO_MULTIWAY)};k.prototype.setReadyToEscalate=function(){"use strict";this.$FBRTCCallSummary45(j.READY_TO_ESCALATE)};k.prototype.setEscalationPeerFailedToConnectToMultiway=function(){"use strict";this.$FBRTCCallSummary45(j.PEER_FAILED_TO_CONNECT_TO_MULTIWAY)};k.prototype.setEscalationTimedOut=function(){"use strict";this.$FBRTCCallSummary45(j.TIMED_OUT)};k.prototype.toString=function(){"use strict";var l={};l.core_metrics=this.$FBRTCCallSummary46();l.time_series=null;return JSON.stringify(l)};k.prototype.$FBRTCCallSummary46=function(){"use strict";__p&&__p();var l={};l.ver=k.CURRENT_SUMMARY_VERSION;l.log_level=c("FBRTCConstants").uploadLogLevelString(this.$FBRTCCallSummary2);l.caller=this.$FBRTCCallSummary1;l.call_type=this.$FBRTCCallSummary28;l.is_using_multiway=this.$FBRTCCallSummary24;l.active_conn=this.$FBRTCCallSummary25;l.conf_name=this.$FBRTCCallSummary26;l.esc_p2p_call_id=this.$FBRTCCallSummary27;l.esc_state_times=this.$FBRTCCallSummary6;l.esc_conf_name=this.$FBRTCCallSummary30;l.serv_info=this.$FBRTCCallSummary29;l.conn=this.$FBRTCCallSummary47();l.peer_id=this.peerID;l.has_video=true;l.open_count=this.$FBRTCCallSummary17;l.signaling=this.$FBRTCCallSummary48();l.sender=this.$FBRTCCallSummary49();l.receiver=this.$FBRTCCallSummary50();l.end=this.$FBRTCCallSummary51();l.video=this.$FBRTCCallSummary52();l.push_phase=c("SiteData").push_phase;l.client_version=this.$FBRTCCallSummary23;return l};k.prototype.$FBRTCCallSummary47=function(){"use strict";var l={dtls:1};if(this.$FBRTCCallSummary21.sender&&this.$FBRTCCallSummary21.sender.rtt)l.rtt=this.$FBRTCCallSummary21.sender.rtt;return l};k.prototype.$FBRTCCallSummary48=function(){"use strict";__p&&__p();var l={};if(this.$FBRTCCallSummary3)l.trigger=this.$FBRTCCallSummary3;l.start_time=this.$FBRTCCallSummary11;l.time_from_start=this.$FBRTCCallSummary4;var m=this.$FBRTCCallSummary4[i.CALL_CONNECTED],n=this.$FBRTCCallSummary4[i.CALL_ENDED];if(m){if(!n)if(this.$FBRTCCallSummary14)n=this.$FBRTCCallSummary14-this.$FBRTCCallSummary11;else n=this.$FBRTCCallSummary53();var o=n-m;if(o>0)l.duration=o}l.new_time_from_start=this.$FBRTCCallSummary5;m=this.$FBRTCCallSummary5[i.CALL_CONNECTED];n=this.$FBRTCCallSummary5[i.CALL_ENDED];if(m){if(!n)if(this.$FBRTCCallSummary12>0)n=this.$FBRTCCallSummary12;else n=this.$FBRTCCallSummary39();var p=n-m;if(p>0)l.new_duration=p}return l};k.prototype.$FBRTCCallSummary49=function(){"use strict";var l={};if(this.$FBRTCCallSummary7)l.ice_g0=this.$FBRTCCallSummary7;if(this.$FBRTCCallSummary9)l.ice=this.$FBRTCCallSummary9;if(this.$FBRTCCallSummary21.sender)Object.assign(l,this.$FBRTCCallSummary21.sender);return l};k.prototype.$FBRTCCallSummary50=function(){"use strict";var l={};if(this.$FBRTCCallSummary8)l.ice_g0=this.$FBRTCCallSummary8;if(this.$FBRTCCallSummary10)l.ice=this.$FBRTCCallSummary10;return l};k.prototype.$FBRTCCallSummary51=function(){"use strict";__p&&__p();var l={};if(this.$FBRTCCallSummary34!==null){l.end_call_reason_string=c("FBRTCConstants").callEndReasonString(this.$FBRTCCallSummary34);if(this.$FBRTCCallSummary35!==null)l.end_call_subreason_string=this.$FBRTCCallSummary35;l.remote_ended=this.$FBRTCCallSummary36}if(this.$FBRTCCallSummary21.end)Object.assign(l,this.$FBRTCCallSummary21.end);return l};k.prototype.$FBRTCCallSummary52=function(){"use strict";var l={capture:{}};if(this.$FBRTCCallSummary21.video&&this.$FBRTCCallSummary21.video.sender)Object.assign(l,this.$FBRTCCallSummary21.video.sender);if(this.$FBRTCCallSummary22)Object.assign(l.capture,this.$FBRTCCallSummary22);return{sender:l,ld:this.$FBRTCCallSummary31,rd:this.$FBRTCCallSummary32}};k.prototype.$FBRTCCallSummary53=function(){"use strict";return new Date().valueOf()-this.$FBRTCCallSummary11};k.prototype.$FBRTCCallSummary39=function(){"use strict";var l=c("performanceNow")()-this.$FBRTCCallSummary16;return Math.floor(this.$FBRTCCallSummary12+l)};k.prototype.$FBRTCCallSummary40=function(l){"use strict";if(this.$FBRTCCallSummary4[l])return;this.$FBRTCCallSummary4[l]=this.$FBRTCCallSummary53();this.$FBRTCCallSummary5[l]=this.$FBRTCCallSummary39()};k.prototype.$FBRTCCallSummary45=function(l){"use strict";if(this.$FBRTCCallSummary6[l])return;this.$FBRTCCallSummary6[l]=this.$FBRTCCallSummary53()};k.prototype.$FBRTCCallSummary41=function(l,m,n){"use strict";if(l)this.$FBRTCCallSummary40(n);else this.$FBRTCCallSummary40(m)};k.prototype.$FBRTCCallSummary38=function(){"use strict";this.$FBRTCCallSummary13=new Date().valueOf()};k.prototype.$FBRTCCallSummary37=function(){"use strict";return{device:c("UserAgentData").deviceName,os:c("UserAgentData").platformName,os_version:c("UserAgentData").platformFullVersion,browser:c("UserAgentData").browserName,browser_version:c("UserAgentData").browserFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth}};k.prototype.setClientVersion=function(l){"use strict";this.$FBRTCCallSummary23=l};k.CURRENT_SUMMARY_VERSION=19;f.exports=k}),null);
__d("FBRTCCallSummaryStore",["CacheStorage","FBRTCCallSummary","FBRTCLogger","areEqual"],(function a(b,c,d,e,f,g){__p&&__p();var h="localstorage",i="RTC_CALL_SUMMARY_",j="summary",k=2e3,l=3,m=3*60*1e3,n=null;o.getInstance=function(){"use strict";if(!n)n=new o();return n};function o(){"use strict";this.$FBRTCCallSummaryStore1=new(c("CacheStorage"))(h,i);this.$FBRTCCallSummaryStore2=c("FBRTCLogger").getInstance()}o.prototype.storeCallSummary=function(p,q,r){"use strict";__p&&__p();var s=this;this.$FBRTCCallSummaryStore3(function(t){__p&&__p();if(!t[p])t[p]={};var u=t[p][q];if(u){var v=s.$FBRTCCallSummaryStore4(u);if(v&&v.getLastUpdatedTime()>r.getLastUpdatedTime()){s.$FBRTCCallSummaryStore2.logToConsole("Outdated summaries");return null}}t[p][q]=s.$FBRTCCallSummaryStore5(r);return t},s.$FBRTCCallSummaryStore2.logError.bind(s.$FBRTCCallSummaryStore2,p,q))};o.prototype.retrieveCallSummary=function(p,q){"use strict";var r=this.$FBRTCCallSummaryStore6(),s=null;if(r[p])s=r[p][q];if(s)return this.$FBRTCCallSummaryStore4(s);else return null};o.prototype.removeCallSummary=function(p,q){"use strict";this.removeCallSummaries([{peerID:p,callID:q}])};o.prototype.removeCallSummaries=function(p){"use strict";__p&&__p();var q=this;this.$FBRTCCallSummaryStore3(function(r){__p&&__p();var s=p.length;for(var t=0;t<s;t++){var u=p[t].peerID,v=p[t].callID;if(r[u]&&r[u][v]){delete r[u][v];if(q.$FBRTCCallSummaryStore7(r[u]))delete r[u]}}return r},q.$FBRTCCallSummaryStore2.logError.bind(q.$FBRTCCallSummaryStore2,null,null))};o.prototype.getLoggableSummaries=function(){"use strict";__p&&__p();var p=this.$FBRTCCallSummaryStore6(),q=[];for(var r in p)if(Object.prototype.hasOwnProperty.call(p,r))for(var s in p[r])if(Object.prototype.hasOwnProperty.call(p[r],s)){var t=this.$FBRTCCallSummaryStore4(p[r][s],m);if(t)q.push(t)}return q};o.prototype.$FBRTCCallSummaryStore7=function(p){"use strict";for(var q in p)if(Object.prototype.hasOwnProperty.call(p,q))return false;return true};o.prototype.$FBRTCCallSummaryStore5=function(p){"use strict";var q={__t:Date.now(),__d:p.toJsonString()};return q};o.prototype.$FBRTCCallSummaryStore4=function(p,q){"use strict";if(p)if(!q||Date.now()-p.__t>=q)return c("FBRTCCallSummary").fromJsonString(p.__d);return null};o.prototype.$FBRTCCallSummaryStore6=function(){"use strict";var p=this.$FBRTCCallSummaryStore1.get(j)||{};return p};o.prototype.$FBRTCCallSummaryStore3=function(p,q,r,s){__p&&__p();var t,u=this;"use strict";if(r===undefined||r===null)r=l;var v=this.$FBRTCCallSummaryStore6(),w=this.$FBRTCCallSummaryStore6(),x=p(v);if(x===null)return;var y=this.$FBRTCCallSummaryStore6();if(c("areEqual")(w,y)){this.$FBRTCCallSummaryStore1.set(j,x);this.$FBRTCCallSummaryStore2.logToConsole("Updated summaries")}else if(r>0){q("Retry lock");if(s)(function(){var z=u;setTimeout(function(){z.$FBRTCCallSummaryStore3(p,q,r-1,true)},k)})();else this.$FBRTCCallSummaryStore3(p,q,r-1,true)}else q("Failed to lock")};f.exports=o}),null);
__d("FBRTCCallSummaryUploader",["Banzai","FBRTCCallSummary","FBRTCCallSummaryStore"],(function a(b,c,d,e,f,g){var h={init:function i(){var j=c("FBRTCCallSummaryStore").getInstance();c("Banzai").subscribe(c("Banzai").SEND,function(){c("FBRTCCallSummary").logSavedSummaries(j)})}};f.exports=h}),null);
__d("SoundPlayer",["Map","URI","createArrayFromMixed"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new(c("Map"))();function i(l){var m=new(c("URI"))(l);return m.getDomain()?l:new(c("URI"))(window.location.href).setPath(m.getPath()).toString()}function j(l){var m=new(c("URI"))(l).getPath();if(/\.mp3$/.test(m))return"audio/mpeg";if(/\.og[ga]$/.test(m))return"audio/ogg";return""}var k={preload:function l(m){__p&&__p();for(var n=c("createArrayFromMixed")(m),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q;if(h.has(r))return;var s=document.createElement("audio");if(!s||!s.canPlayType||!s.canPlayType(j(r)))continue;s.preload="auto";s.src=i(r);document.body&&document.body.appendChild(s);h.set(r,s);return}},play:function l(m){__p&&__p();var n=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];for(var o=c("createArrayFromMixed")(m),p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var r;if(p){if(q>=o.length)break;r=o[q++]}else{q=o.next();if(q.done)break;r=q.value}var s=r;if(!h.has(s))k.preload(s);var t=h.get(s);if(!t)continue;if(n.loop)t.setAttribute("loop","");if(n.volume)t.volume=n.volume;t.play();return}},pause:function l(m){__p&&__p();for(var n=c("createArrayFromMixed")(m),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q,s=h.get(r);if(s){s.pause();return}}},stop:function l(m){__p&&__p();for(var n=c("createArrayFromMixed")(m),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q,s=h.get(r);if(s){s.pause();s.removeAttribute("src");s.src=i(r);return}}}};f.exports=k}),null);
__d("SoundSynchronizer",["SoundPlayer","WebStorage","createArrayFromMixed"],(function a(b,c,d,e,f,g){__p&&__p();var h="fb_sounds_playing3";function i(){__p&&__p();var m=c("WebStorage").getLocalStorage();if(m)try{var n=m[h];if(n){n=JSON.parse(n);if(Array.isArray(n))return n}}catch(o){}return[]}function j(m){var n=c("WebStorage").getLocalStorage();if(n){var o=i();o.push(m);while(o.length>5)o.shift();try{n[h]=JSON.stringify(o)}catch(p){}}}function k(m){return i().some(function(n){return n===m})}var l={play:function m(n,o,p){n=c("createArrayFromMixed")(n);o=o||n[0]+Math.floor(Date.now()/1e3);if(k(o))return;c("SoundPlayer").play(n,{loop:!!p});j(o)},isSupported:function m(){return!!c("WebStorage").getLocalStorage()}};f.exports=l}),null);
__d("SoundRPC",["Event","FBJSON","SoundSynchronizer"],(function a(b,c,d,e,f,g){__p&&__p();function h(j,k,l){c("SoundSynchronizer").play(j,k,l)}var i={playLocal:h,playRemote:function j(k,l,m,n){var o={name:"SoundRPC",data:{paths:l,sync:m,loop:n}};k.postMessage(c("FBJSON").stringify(o),"*")},supportsRPC:function j(){return!!window.postMessage},_listen:function j(){c("Event").listen(window,"message",function(k){if(!/\.facebook.com$/.test(k.origin))return;var l={};try{l=c("FBJSON").parse(k.data)}catch(m){}if(l.name==="SoundRPC")h(l.data.paths,l.data.sync,l.data.loop)})}};f.exports=i}),null);
__d("Sound",["SoundInitialData","SoundPlayer","SoundRPC","SoundSynchronizer","URI","UserAgent_DEPRECATED","Visibility","isFacebookURI"],(function a(b,c,d,e,f,g){__p&&__p();var h=null,i=false,j={init:function n(o){},play:function n(o,p,q){if(h)c("SoundRPC").playRemote(h.contentWindow,o,p,false);else c("SoundRPC").playLocal(o,p,q);i=true},hasPlayedSoundBefore:function n(){return i},playOnlyIfImmediate:function n(o,p,q){if(!i&&c("Visibility").isHidden())return;this.play(o,p,q)},stop:function n(o){if(!h)c("SoundPlayer").stop(o)}},k=new(c("URI"))(location.href);if(k.getSubdomain()&&k.getSubdomain()!=="www")k.setSubdomain("www");var l=k.getDomain();function m(){if(c("UserAgent_DEPRECATED").ie()<9)return false;if(c("SoundInitialData").RPC_DISABLED)return false;return c("SoundSynchronizer").isSupported()&&c("SoundRPC").supportsRPC()}if(c("isFacebookURI")(k)&&location.host!==l&&m()){h=document.createElement("iframe");h.setAttribute("src","//"+l+"/sound_iframe.php");h.style.display="none";document.body.appendChild(h)}f.exports=j}),null);
__d("NotificationJewelReminderLoader",[],(function a(b,c,d,e,f,g){f.exports={init:function h(i,j){i.load().done(function(k){k.init(j)})}}}),null);
__d("P2PDialogStore",["EventEmitter","P2PActionConstants","P2PDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=void 0,k={};h=babelHelpers.inherits(l,c("EventEmitter"));i=h&&h.prototype;function l(){i.constructor.call(this);j=c("P2PDispatcher").register(this.onEventDispatched.bind(this));k={dialogClass:null,dialogProps:null}}l.prototype.getState=function(){return k};l.prototype.onEventDispatched=function(m){__p&&__p();var n=m.type,o=m.data;switch(n){case c("P2PActionConstants").DIALOG_SHOWN:k.dialogClass=o.dialogClass;k.dialogProps=o.dialogProps;this.emit("change");break;case c("P2PActionConstants").DIALOG_CLOSED:k.dialogClass=null;k.dialogProps=null;this.emit("change");break}};f.exports=new l()}),null);
__d("P2PDialogContainer.react",["P2PDialogStore","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.state=c("P2PDialogStore").getState(),this.onDialogStoreChange=function(){this.setState(c("P2PDialogStore").getState())}.bind(this),l}j.prototype.componentDidMount=function(){this.dialogStoreSub=c("P2PDialogStore").addListener("change",this.onDialogStoreChange)};j.prototype.componentWillUnmount=function(){if(this.dialogStoreSub){this.dialogStoreSub.remove();this.dialogStoreSub=null}};j.prototype.render=function(){if(!this.state.dialogClass)return null;var k=this.state.dialogClass;return c("React").createElement(k,babelHelpers["extends"]({},this.state.dialogProps,{key:"dialog"}))};f.exports=j}),null);
__d("P2PDialogContainerMount",["P2PDialogContainer.react","React","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";var h={mount:function i(j){c("ReactDOM").render(c("React").createElement(c("P2PDialogContainer.react"),null),j)}};f.exports=h}),null);
__d("PagesPlatformActionConstants",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({BOOKING_REQUEST_ACCEPT_ERROR:"booking_request_accept_error",BOOKING_REQUEST_ACCEPT_INITIATED:"booking_request_accept_initiated",BOOKING_REQUEST_ACCEPTED:"booking_request_accepted",BOOKING_REQUEST_CREATED:"booking_request_created",BOOKING_REQUEST_DECLINE_ERROR:"booking_request_decline_error",BOOKING_REQUEST_DECLINE_INITIATED:"booking_request_decline_initiated",BOOKING_REQUEST_DECLINED:"booking_request_declined",BOOKING_REQUEST_RESCHEDULE_INITIATED:"booking_request_reschedule_initiated",BOOKING_REQUEST_RESCHEULED:"booking_request_reschedule",DIALOG_CLOSED:"dialog_closed",DIALOG_SHOWN:"dialog_shown",NEW_TIME_CHOSEN:"new_time_chosen"});f.exports=h}),null);
__d("PagesPlatformRequestDispatcher",["Dispatcher_DEPRECATED"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("Dispatcher_DEPRECATED"))()}),null);
__d("PagesPlatformDialogStore",["EventEmitter","PagesPlatformActionConstants","PagesPlatformRequestDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j={};h=babelHelpers.inherits(k,c("EventEmitter"));i=h&&h.prototype;function k(){i.constructor.call(this);c("PagesPlatformRequestDispatcher").register(this.onEventDispatched.bind(this));j={dialogClass:null,dialogProps:null}}k.prototype.getState=function(){return j};k.prototype.onEventDispatched=function(l){__p&&__p();var m=l.type,n=l.data;switch(m){case c("PagesPlatformActionConstants").DIALOG_SHOWN:j.dialogClass=n.dialogClass;j.dialogProps=n.dialogProps;this.emit("change");break;case c("PagesPlatformActionConstants").DIALOG_CLOSED:j.dialogClass=null;j.dialogProps=null;this.emit("change");break}};f.exports=new k()}),null);
__d("PagesPlatformDialogContainer.react",["PagesPlatformDialogStore","PureStoreBasedStateMixin","React"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").createClass({displayName:"PagesPlatformDialogContainer",mixins:[c("PureStoreBasedStateMixin")(c("PagesPlatformDialogStore"))],statics:{calculateState:function i(){return c("PagesPlatformDialogStore").getState()}},render:function i(){if(!this.state.dialogClass)return null;var j=this.state.dialogClass;return c("React").createElement(j,babelHelpers["extends"]({},this.state.dialogProps,{key:"dialog"}))}});f.exports=h}),null);
__d("PagesPlatformDialogContainerMount",["PagesPlatformDialogContainer.react","React","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";var h={mount:function i(j){c("ReactDOM").render(c("React").createElement(c("PagesPlatformDialogContainer.react"),null),j)}};f.exports=h}),null);