if (self.CavalryLogger) { CavalryLogger.start_js(["iNVWg"]); }

__d("MNCommercePageSetting",[],(function a(b,c,d,e,f,g){f.exports={COMMERCE_FAQ_ENABLED:"COMMERCE_FAQ_ENABLED",IN_MESSENGER_SHOPPING_ENABLED:"IN_MESSENGER_SHOPPING_ENABLED",COMMERCE_NUX_ENABLED:"COMMERCE_NUX_ENABLED",NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED:"NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED",STRUCTURED_MENU_ENABLED:"STRUCTURED_MENU_ENABLED",USER_CONTROL_TOPIC_MANAGE_ENABLED:"USER_CONTROL_TOPIC_MANAGE_ENABLED",COMPOSER_INPUT_DISABLED:"COMPOSER_INPUT_DISABLED"}}),null);
__d("TypingDetector",["ArbiterMixin","Event","Input","Run","SubscriptionsHandler","TypingStates","createObjectFrom","emptyFunction"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j){this._input=i;this._ignoreKeys={};this._getValueFn=j}Object.assign(h.prototype,c("ArbiterMixin"),{_timeout:7e3,_currentState:c("TypingStates").INACTIVE,init:function i(){this.init=c("emptyFunction");this.reset();this._subscriptions=new(c("SubscriptionsHandler"))();this._subscriptions.addSubscriptions(c("Event").listen(this._input,"keyup",this._update.bind(this)),c("Run").onUnload(this._onunload.bind(this)))},reset:function i(){clearTimeout(this._checkTimer);this._checkTimer=null;this._lastKeystrokeAt=null;this._currentState=c("TypingStates").INACTIVE},setIgnoreKeys:function i(j){this._ignoreKeys=c("createObjectFrom")(j)},destroy:function i(){this._subscriptions.release()},_onunload:function i(){if(this._currentState==c("TypingStates").TYPING)this._transition(c("TypingStates").QUITTING)},_update:function i(event){__p&&__p();var j=c("Event").getKeyCode(event),k=this._currentState;if(!this._ignoreKeys[j]){var l=this._getValueFn?this._getValueFn():c("Input").getValue(this._input);if(l.trim().length===0){if(k==c("TypingStates").TYPING)this._transition(c("TypingStates").INACTIVE)}else if(k==c("TypingStates").TYPING)this._recordKeystroke();else if(k==c("TypingStates").INACTIVE){this._transition(c("TypingStates").TYPING);this._recordKeystroke()}}},_transition:function i(j){this.reset();this._currentState=j;this.inform("change",j)},_recordKeystroke:function i(){this._lastKeystrokeTime=Date.now();if(!this._checkTimer)this._checkTimer=setTimeout(this._checkTyping.bind(this),this._timeout)},_checkTyping:function i(){var j=this._lastKeystrokeTime+this._timeout,k=Date.now();if(k>j)this._transition(c("TypingStates").INACTIVE);else{clearTimeout(this._checkTimer);this._checkTimer=setTimeout(this._checkTyping.bind(this),j-k+10)}}});f.exports=h}),null);
__d("TypingDetectorController",["ActorURI","AsyncRequest","AvailableList","AvailableListConstants","ChatVisibility","Keys","MercuryServerRequestsConfig","TypingDetector","TypingStates","emptyFunction","ifRequired","setTimeoutAcrossTransitions","shield"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="/ajax/messaging/typ.php";function i(j,k,l,m,n,o,p){__p&&__p();this.userID=j;this.input=k;this.source=l;this.threadID=n;this.pageID=p;this.remoteState=c("TypingStates").INACTIVE;this.notifyTimer=null;m=m||{};this.notifyDelay=m.notifyDelay||this.notifyDelay;this._typingDetector=new(c("TypingDetector"))(k,o);this._typingDetector.init(m);this._typingDetector.subscribe("change",this._stateChange.bind(this))}i.prototype.setUserAndThread=function(j,k){if(this.userID!==j||this.threadID!==k){this.resetState();this.userID=j;this.threadID=k}};i.prototype.setIgnoreEnter=function(j){var k=j?[c("Keys").RETURN]:[];this._typingDetector.setIgnoreKeys(k)};i.prototype.resetState=function(){this._notifyState(c("TypingStates").INACTIVE);this.remoteState=c("TypingStates").INACTIVE;this._typingDetector.reset();clearTimeout(this.notifyTimer);this.notifyTimer=null};i.prototype.destroy=function(){this.resetState();this._typingDetector.destroy()};i.prototype._stateChange=function(j,k){if(k!=c("TypingStates").QUITTING){clearTimeout(this.notifyTimer);this.notifyTimer=c("setTimeoutAcrossTransitions")(c("shield")(this._notifyState,this,k),this.notifyDelay)}else this._notifyState(k,true)};i.prototype._notifyState=function(j,k){if(!this.userID&&!this.threadID||!c("ChatVisibility").isOnline()||j===this.remoteState||c("ifRequired")("ChannelConnection",function(l){return l.disconnected()},function(){return true}))return;this._sendRequest(j,this.userID,k)};i.prototype._sendRequest=function(j,k,l){this.remoteState=j;var m={typ:j,to:k,source:this.source,thread:this.threadID},n=this.pageID?c("ActorURI").create(h,this.pageID):h,o=new(c("AsyncRequest"))().setHandler(this._onTypResponse.bind(this,k)).setErrorHandler(c("emptyFunction")).setData(m).setURI(n).setAllowCrossPageTransition(true).setOption("asynchronous_DEPRECATED",!l);if(c("MercuryServerRequestsConfig").msgrRegion)o.setRequestHeader("X-MSGR-Region",c("MercuryServerRequestsConfig").msgrRegion);o.send()};i.prototype._onTypResponse=function(j,k){var l=k.getPayload()||{};if(l.offline)c("AvailableList").set(j,c("AvailableListConstants").OFFLINE,"typing_response")};Object.assign(i.prototype,{notifyDelay:1e3});f.exports=i}),null);
__d("EmployeeLinkMatcher",["CurrentUser"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new RegExp("^[\\s.,:]"),i=new RegExp("(?:\\b)(([BDFTPSXJN]|(AIP))\\d{4,})(?:\\b)","im"),j=new RegExp("(?:\\b)(designpack://.+)(?:\\b)","im"),k=function k(n){if(!c("CurrentUser").isEmployee())return null;var o=i.exec(n)||j.exec(n);if(o===null)return null;return{lnk:o[1],idx:o.index+(h.exec(o[0])?1:0)}},l=function l(n){var o=c("CurrentUser").isEmployee()&&(i.exec(n)!==null||j.exec(n)!==null);return o},m={match:k,isMatch:l};f.exports=m}),null);
__d("EmployeeLinkRanges",["EmployeeLinkMatcher","UnicodeUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={PHABRICATOR_PREFIX:"https://phabricator.intern.facebook.com/",TASKS_PREFIX:"https://our.intern.facebook.com/intern/tasks/?t=",BUSINESS_PREFIX:"https://our.intern.facebook.com/intern/business/?q=",SEV_PREFIX:"https://our.intern.facebook.com/intern/sevmanager/view/s/",CHRONOS_PREFIX:"https://our.intern.facebook.com/intern/chronos/lucky/?query=",ADS_PARTNER_PREFIX:"https://our.intern.facebook.com/intern/ads/partner_projects/projects/",SRT_JOB_PREFIX:"https://our.intern.facebook.com/intern/bunny/?srt+",ANALYTICS_NOTEBOOKS_PREFIX:"https://our.intern.facebook.com/intern/bunny/?anp+",FBLEARNER_RUN_PREFIX:"https://our.intern.facebook.com/intern/fblearner/details/",get:function i(j){__p&&__p();var k=arguments.length<=1||arguments[1]===undefined?0:arguments[1],l=j.substr(k),m=c("EmployeeLinkMatcher").match(l);if(!m)return[];var n=m.lnk,o=m.idx,p=c("UnicodeUtils").strlen(l.substr(0,o));k+=p;var q="";if(n.substr(0,3).toLowerCase()==="aip")q=this.ADS_PARTNER_PREFIX+n.substr(3);else switch(n[0].toLowerCase()){case"d":if(n.indexOf("designpack://")===0)q=n;else q=this.PHABRICATOR_PREFIX+n.toUpperCase();break;case"p":q=this.PHABRICATOR_PREFIX+n.toUpperCase();break;case"t":q=this.TASKS_PREFIX+n.substr(1);break;case"b":q=this.BUSINESS_PREFIX+n.substr(1);break;case"s":q=this.SEV_PREFIX+n.substr(1);break;case"x":q=this.CHRONOS_PREFIX+n.substr(1);break;case"j":q=this.SRT_JOB_PREFIX+n.substr(1);break;case"n":q=this.ANALYTICS_NOTEBOOKS_PREFIX+n.substr(1);break;case"f":q=this.FBLEARNER_RUN_PREFIX+n.substr(1);break;default:return[]}var r=n.length,s=[{offset:k,length:r,entity:{url:q}}];return s.concat(this.get(j,k+r))}};f.exports=h}),null);
__d("EventReminderDispatcher",["ExplicitRegistrationDispatcher"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("ExplicitRegistrationDispatcher"))({strict:false})}),null);
__d("EventReminderActions",["EventReminderDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({DELETE_EVENT_REMINDER:null,UPDATE_EVENT_REMINDER:null}),i={Types:h,updateEventReminder:function j(k,event,l){c("EventReminderDispatcher").dispatch({type:i.Types.UPDATE_EVENT_REMINDER,threadID:k,event:event,participantsEventStatus:l})},deleteEventReminder:function j(k){c("EventReminderDispatcher").dispatch({type:i.Types.DELETE_EVENT_REMINDER,threadID:k})}};f.exports=i}),null);
__d("EventReminderMembersMap",["CurrentUser","EventReminderConstants","Map","MercuryIDs","MercuryParticipants"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("EventReminderConstants").EventGuestStates,i=c("EventReminderConstants").GuestStates;function j(k){this.$EventReminderMembersMap1=k;this.$EventReminderMembersMap2=new(c("Map"))();this.$EventReminderMembersMap3=new(c("Map"))();this.$EventReminderMembersMap4=new(c("Map"))();this.$EventReminderMembersMap5=new(c("Map"))();this.$EventReminderMembersMap6=new(c("Map"))();this.$EventReminderMembersMap7=new(c("Map"))()}j.prototype.setAllMembers=function(k,l){__p&&__p();if(!k)return;this.$EventReminderMembersMap2.set(l,i.INVITED);var m=[],n=[],o=[],p=[];for(var q in k){m.push(c("MercuryIDs").getParticipantIDFromUserID(q));var r=k[q];if(q===c("CurrentUser").getID())this.$EventReminderMembersMap2.set(l,r);var s={fbid:q,guestState:r,imageSrc:""};if(r===i.GOING)n.push(s);else if(r===i.DECLINED)o.push(s);else p.push(s)}var t=n.concat(o,p);this.$EventReminderMembersMap3.set(l,t);this.$EventReminderMembersMap4.set(l,n);this.$EventReminderMembersMap7.set(l,false);this.$EventReminderMembersMap8(l,m,t)};j.prototype.setAllMembersOfAssociatedEvent=function(k,l){__p&&__p();if(!k)return;this.$EventReminderMembersMap2.set(l,h.INITIAL);var m=[],n=[],o=[],p=[];k.map(function(r){__p&&__p();m.push(c("MercuryIDs").getParticipantIDFromUserID(r.participant_id));var s=r.participant_id.toString(),t=r.event_status||h.INITIAL;if(s===c("CurrentUser").getID())this.$EventReminderMembersMap2.set(l,t);var u={fbid:s,guestState:t,imageSrc:""};if(t===h.GOING)n.push(u);else if(t===h.WATCHED)o.push(u);else p.push(u)},this);var q=n.concat(o,p);this.$EventReminderMembersMap3.set(l,q);this.$EventReminderMembersMap4.set(l,n);this.$EventReminderMembersMap5.set(l,o);this.$EventReminderMembersMap6.set(l,p);this.$EventReminderMembersMap7.set(l,false);this.$EventReminderMembersMap8(l,m,q)};j.prototype.clearMembers=function(k){this.$EventReminderMembersMap2["delete"](k);this.$EventReminderMembersMap3["delete"](k);this.$EventReminderMembersMap4["delete"](k);this.$EventReminderMembersMap5["delete"](k);this.$EventReminderMembersMap6["delete"](k)};j.prototype.getAllMembers=function(k){return this.$EventReminderMembersMap3.get(k)};j.prototype.getGoingMembers=function(k){return this.$EventReminderMembersMap4.get(k)};j.prototype.getInterestedMembers=function(k){return this.$EventReminderMembersMap5.get(k)};j.prototype.getSelfGuestState=function(k){if(!this.$EventReminderMembersMap2.has(k))return i.INVITED;return this.$EventReminderMembersMap2.get(k)};j.prototype.getProfileImagesLoaded=function(k){return!!this.$EventReminderMembersMap7.get(k)};j.prototype.$EventReminderMembersMap8=function(k,l,m){c("MercuryParticipants").getBigImageMulti(l,function(n){for(var o=0;o<m.length;o++)if(m[o].fbid)m[o].imageSrc=n[c("MercuryIDs").getParticipantIDFromUserID(m[o].fbid)];this.$EventReminderMembersMap7.set(k,true);this.$EventReminderMembersMap1.__emitChange()}.bind(this))};f.exports=j}),null);
__d("EventReminderStateStore",["EventReminderActions","EventReminderConstants","EventReminderDispatcher","EventReminderMembersMap","EventRemindersGating","FluxStore","Map"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("EventReminderConstants").EventPlanType,k=36e5;h=babelHelpers.inherits(l,c("FluxStore"));i=h&&h.prototype;function l(){i.constructor.call(this,c("EventReminderDispatcher"));this.$EventReminderStateStore1={};this.$EventReminderStateStore2=new(c("EventReminderMembersMap"))(this);this.$EventReminderStateStore3=new(c("Map"))()}l.prototype.getEvent=function(m){return this.$EventReminderStateStore1[m]};l.prototype.getEventMembers=function(m){return this.$EventReminderStateStore2.getAllMembers(m)};l.prototype.getSelfGuestState=function(m){return this.$EventReminderStateStore2.getSelfGuestState(m)};l.prototype.getNumOfGoingMembers=function(m){var n=this.$EventReminderStateStore2.getGoingMembers(m);return n?n.length:0};l.prototype.getNumOfInterestedMembers=function(m){var n=this.$EventReminderStateStore2.getInterestedMembers(m);return n?n.length:0};l.prototype.getProfileImagesLoaded=function(m){return this.$EventReminderStateStore2.getProfileImagesLoaded(m)};l.prototype.shouldShowCTA=function(m,n){var o=this.getEvent(m),p=Date.now(),q=this.$EventReminderStateStore3.get(m);if((!o||!o.exist)&&n>c("EventRemindersGating").eventPlanCTAThreashold&&(!q||p-q>k)&&c("EventRemindersGating").shouldShowCTA){this.$EventReminderStateStore3.set(m,p);return true}else return false};l.prototype.clearEventMembers=function(m){this.$EventReminderStateStore2.clearMembers(m)};l.prototype.getTransformedEvent=function(event){if(event.room_type==="EVENT"){var m=event.event_place&&event.event_place.name,n=event.event_place&&event.event_place.address&&event.event_place.address.single_line_full_address;return{allowRSVP:true,eventDate:event.start_timestamp,eventName:event.name,eventLocationName:m,eventLocationAddress:n,eventID:event.id.toString(),eventType:j.ASSOCIATED_EVENT,exists:true}}return{allowRSVP:!!event.track_rsvp,eventDate:event.event_time,eventName:event.title,eventLocationName:event.location_name,eventLocationAddress:event.location_address,eventID:event.oid.toString(),eventType:event.event_type,exists:true}};l.prototype.__onDispatch=function(m){__p&&__p();var n=c("EventReminderActions").Types,o=m.threadID;switch(m.type){case n.UPDATE_EVENT_REMINDER:var event=m.event;this.$EventReminderStateStore1[o]=this.getTransformedEvent(event);if(this.$EventReminderStateStore1[o].allowRSVP)if(event.room_type==="EVENT")this.$EventReminderStateStore2.setAllMembersOfAssociatedEvent(m.participantsEventStatus,o);else this.$EventReminderStateStore2.setAllMembers(event.event_members,o);break;case n.DELETE_EVENT_REMINDER:this.$EventReminderStateStore1[o].exists=false;this.clearEventMembers(o);break}this.__emitChange()};f.exports=new l()}),null);
__d("MercuryMessageRenderLocations",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({CHAT:"chat",MESSENGER:"messenger",PAGES:"pages"});f.exports=h}),null);
__d("MessengerContactActions.bs",[],(function a(b,c,d,e,f,g){"use strict";var h={ADD_OWNER:"ADD_OWNER",FREE_CALL:"FREE_CALL",MESSAGE:"MESSAGE",PROFILE:"PROFILE",REMOVE:"REMOVE",REMOVE_OWNER:"REMOVE_OWNER",SELECT:"SELECT"};g.actions=h}),null);
__d("MessengerFormattingUtils",["React","UnicodeUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(p){return{offset:p[1].length,length:c("UnicodeUtils").strlen(p[2])+2,innerOffset:1,innerText:p[2]}}var i={pattern:/([\s_~\'\"(]|^)\*(\S(?:.*?\S)??)\*(?=[\s_~,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s_~\'\"(]|^)\*(?:\S(?:.*?\S)??)\*(?=[\s_~,.;:!?\'\")]|$)/,formatter:function p(q){return c("React").createElement("b",null,q)},getRangeInMatch:h,recursivelyFormat:true},j={pattern:/([\s*~\'\"(]|^)_(\S(?:.*?\S)??)_(?=[\s*~,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s*~\'\"(]|^)_(?:\S(?:.*?\S)??)_(?=[\s*~,.;:!?\'\")]|$)/,formatter:function p(q){return c("React").createElement("i",null,q)},getRangeInMatch:h,recursivelyFormat:true},k={pattern:/([\s*_\'\"(]|^)~(\S(?:.*?\S)??)~(?=[\s*_,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s*_\'\"(]|^)~(?:\S(?:.*?\S)??)~(?=[\s*_,.;:!?\'\")]|$)/,formatter:function p(q){return c("React").createElement("s",null,q)},getRangeInMatch:h,recursivelyFormat:true},l={pattern:/([\s*_~\'\"(]|^)`(\S(?:.*?\S)??)`(?=[\s\w*_~,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s*_~\'\"(]|^)`(?:\S(?:.*?\S)??)`(?=[\s\w*_~,.;:!?\'\")]|$)/,formatter:function p(q){return c("React").createElement("code",null,q)},getRangeInMatch:h,recursivelyFormat:false},m=[i,j,k,l];function n(p){var q=arguments.length<=1||arguments[1]===undefined?m:arguments[1];for(var r=0;r<q.length;r++){var s=q[r].nonCapturingPattern;if(s.test(p))return true}return false}function o(p){__p&&__p();var q=arguments.length<=1||arguments[1]===undefined?m:arguments[1],r=[];for(var s=0;s<q.length;s++){var t=q[s];t.pattern.lastIndex=0;var u=void 0;while((u=t.pattern.exec(p))!=null){var v=t.getRangeInMatch(u),w=p.substr(0,u.index+v.offset),x=c("UnicodeUtils").strlen(w);r.push({offset:x,length:v.length,innerText:v.innerText,innerOffset:x+v.innerOffset,formatter:t.formatter,recursivelyFormat:t.recursivelyFormat})}}return r}f.exports={defaultFormatConfigs:m,hasMatch:n,getRanges:o,formatConfigs:{bold:i,italic:j,strikethrough:k,code:l}}}),null);
__d("MessengerMathUtils",["UnicodeUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=2,i=/^(?:\$\$|\\\[)[\s\S]*?\S[\s\S]*?(?:\$\$|\\\])$/,j=/\\\([\s\S]*?\S[\s\S]*?\\\)/g;function k(p){return i.test(p)}function l(p){return p.substring(h,p.length-h)}function m(p){j.lastIndex=0;return j.test(p)}function n(p){var q=arguments.length<=1||arguments[1]===undefined?0:arguments[1],r=[];j.lastIndex=0;var s=void 0;while((s=j.exec(p))!==null){var t=p.substring(0,s.index),u=c("UnicodeUtils").strlen(t);r.push({offset:u,length:c("UnicodeUtils").strlen(s[0]),math:true})}return r}function o(p){__p&&__p();var q=p.length,r=0,s=0;for(var t=0;t<q;t++)if(p[t]==="\\")if(p.slice(t,t+6)==="\\begin"){r+=2;s=Math.max(s,r)}else if(p.slice(t,t+4)==="\\end")r-=2;else t++;else if(p[t]==="{"){r++;s=Math.max(s,r)}else if(p[t]==="}")r--;return s}f.exports={MATH_DELIMITER_LENGTH:h,isMathBlock:k,hasInlineMath:m,getInlineMathRanges:n,getMathBlockInner:l,getMaxBraceDepth:o}}),null);
__d("MessengerSupportedEmojiUtils",["cx","EmojiImageURL","EmojiLikeConstants","EmojiRenderer","EmoticonEmojiList","Image.react","MessengerSupportedEmoji","React","Utf16","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=65039,j="_fe0f",k=new RegExp("(\r\n|[ \r\n]|s)"),l={getSupportedEmojiKey:function m(n){__p&&__p();if(!n)return null;var o=null,p=this.parse(n);if(p.length===1&&p[0].length===n.length){var q=p[0].emoji.map(function(r){return c("Utf16").decode(r)});q[q.length-1]===i&&q.pop();o=q.map(function(r){return r.toString(16)}).join("_")}return this.isSupportedEmojiKey(o)?o:null},isSupportedEmoji:function m(n){return!!this.getSupportedEmojiKey(n)},isSupportedEmojiKey:function m(n){return!!c("MessengerSupportedEmoji").emoji[n]},getSupportedEmojiCodesArray:function m(n){__p&&__p();if(!n)return null;var o=this.parse(n);if(o.length===1&&o[0].length===n.length){var p=o[0].emoji.map(function(r){return c("Utf16").decode(r)});p[p.length-1]===i&&p.pop();var q=p.map(function(r){return r.toString(16)}).join("_");if(c("MessengerSupportedEmoji").emoji[q])return p}return null},getEmojiKeyFromCodes:function m(n){return n.map(function(o){return o.toString(16)}).join("_")},getClassSizeMap:function m(){var n,o=c("EmojiLikeConstants").size;return n={},n[o.XSMALL]="_2560",n[o.SMALL]="_1ifu",n[o.MEDIUM]="_19_r",n[o.LARGE]="_19_s",n},getEmojiMatchObj:function m(n){__p&&__p();var o=this.parse(n,1);if(o.length!==1)return null;var p=o[0].emoji,q=p.map(function(s){return c("Utf16").decode(s)});if(q[q.length-1]===i)q.pop();var r=q.map(function(s){return s.toString(16)}).join("_");return{emoji_key:r,emoji_str:p.join(""),is_supported:this.isSupportedEmojiKey(r),offset:o[0].offset,length:o[0].length}},getNewEmojiData:function m(n,o){__p&&__p();if(!n)return null;var p=this.getSupportedEmojiKey(n);if(!p)return null;var q=this.getClassSizeMap();o=this.transferSize(o);if(!c("EmojiLikeConstants").sizeMap[o])o=c("EmojiLikeConstants").size.XSMALL;var r=c("joinClasses")(q[o],"_1ift"),s=c("EmojiImageURL").getMessengerURL(p,c("EmojiLikeConstants").sizeMap[o]);return{emoji:c("React").createElement(c("Image.react"),{className:r,src:s}),emoji_key:p,url:s}},getEmojiOnlyContents:function m(n){__p&&__p();var o=n||"",p=[];while(o.length>0&&o.trim().length>0){var q=k.exec(o),r="";while(q&&q.length&&q.index===0){r+=q[0];o=o.replace(k,"");q=k.exec(o)}if(r.length>0)p.push({text:r});var s=c("EmoticonEmojiList").noncapturingRegexp.exec(o);if(s&&s.index===0){var t=c("EmoticonEmojiList").names[s[1]],u=c("EmoticonEmojiList").emote2emojis[t];p.push({emojiKey:u,text:s[1]});o=o.replace(s[1],"")}else{s=this.getEmojiMatchObj(o);if(s&&s.is_supported){p.push({emojiKey:s.emoji_key,text:s.emoji_str});o=o.replace(s.emoji_str,"")}else return null}}return p},getUrl:function m(n,o){if(n.endsWith(j))n=n.replace(j,"");if(!c("MessengerSupportedEmoji").emoji[n])return null;o=this.transferSize(o);return c("EmojiImageURL").getMessengerURL(n,c("EmojiLikeConstants").sizeMap[o])},containsEmoji:function m(n){return this.parse(n,1).length===1},parse:function m(n,o){return c("EmojiRenderer").parse(n,o)},transferSize:function m(n){return c("EmojiLikeConstants").sizeMapTransfer[n]||n}};f.exports=l}),null);
__d("MessengerTextWithEntities.react",["Link.react","React","BaseTextWithEntities.react","MessengerTextWithEmoticons.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;function j(l){return l.replace(/<3\b|&hearts;/g,"\u2665")}h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;function k(){__p&&__p();var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MessengerTextWithEntities1=function(q){if(this.props.renderEmoticons||this.props.renderEmoji)return c("React").createElement(c("MessengerTextWithEmoticons.react"),{text:q,customSize:this.props.customSize,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji});else return j(q)}.bind(this),this.$MessengerTextWithEntities2=function(q,r){if(this.props.interpolator)return this.props.interpolator(q,r);else return c("React").createElement(c("Link.react"),{href:r.entity},q)}.bind(this),m}k.prototype.render=function(){return c("React").createElement(c("BaseTextWithEntities.react"),babelHelpers["extends"]({},this.props,{aggregatedRanges:this.props.aggregatedRanges,imageRanges:this.props.imageRanges,metaRanges:this.props.metaRanges,rangeRenderer:this.$MessengerTextWithEntities2,ranges:this.props.ranges,text:this.props.text,textRenderer:this.$MessengerTextWithEntities1}))};f.exports=k}),null);
__d("P2PTriggersUtils",["P2PGKValues"],(function a(b,c,d,e,f,g){var h=/\$((\d{1,3}(,\d{3})*)|\d+)(\.\d{1,2})?(?=\s|\.\s|\,\s|$|\.$|\,$|\?|\!|\")/,i={canSeeTriggers:function j(k){if(!c("P2PGKValues").P2PEnabled)return false;return true},getMatches:function j(k){return k.match(h)}};f.exports=i}),null);
__d("RedditLinkMatcher",[],(function a(b,c,d,e,f,g){"use strict";var h=new RegExp("(^|\\s)(\\/[ru]\\/\\w{1,21})(?:\\b)","i"),i=function i(l){var m=h.exec(l);if(m===null)return null;return{lnk:m[2],idx:m.index+m[1].length}},j=function j(l){return h.exec(l)!==null},k={match:i,isMatch:j};f.exports=k}),null);
__d("RedditLinkRanges",["RedditLinkMatcher","UnicodeUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={REDDIT_PREFIX:"https://reddit.com",get:function i(j){__p&&__p();var k=arguments.length<=1||arguments[1]===undefined?0:arguments[1],l=j.substr(k),m=c("RedditLinkMatcher").match(l);if(!m)return[];var n=m.lnk,o=m.idx,p=c("UnicodeUtils").strlen(l.substr(0,o));k+=p;var q="";switch(n[1].toLowerCase()){case"r":q=this.REDDIT_PREFIX+n;break;case"u":q=this.REDDIT_PREFIX+n;break;default:return[]}var r=n.length,s=[{offset:k,length:r,entity:{url:q}}];return s.concat(this.get(j,k+r))}};f.exports=h}),null);
__d("TextWithEntitiesMetadataType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NONE:0,CONCEPT:1,INTENT:2})}),null);
__d("shouldAddMRefParam",["isFacebookURI"],(function a(b,c,d,e,f,g){var h=function h(i){if(!c("isFacebookURI")(i)||i.getFragment())return false;if(/^\/events\//.test(i.getPath()))return true;return false};f.exports=h}),null);
__d("MercuryMessageBody.react",["cx","fbt","BootloadedComponent.react","DateConsts","EmojiRenderer","EmoticonsList","EmoticonEmojiList","EmployeeLinkMatcher","EmployeeLinkRanges","EventReminderStateStore","EventRemindersGating","RedditLinkMatcher","RedditLinkRanges","JSResource","Link.react","MercuryIDs","MercuryMessageRenderLocations","MessengerContactActions.bs","MessengerMathUtils","MessengerFormattingUtils","MessengerSupportedEmojiUtils","MessengerTextWithEntities.react","P2PTriggersUtils","React","TextWithEntities.react","TextWithEntitiesMetadataType","UnicodeUtils","URI","URLMatcher","emptyFunction","getURLRanges","gkx","ifRequired","requireWeak","shouldAddMRefParam"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MessengerContactActions.bs").actions,m=c("React").PropTypes,n=function p(){n=c("emptyFunction");c("ifRequired")("ChatAppActions",function(q){q.setInitialDisplayDone()})};j=babelHelpers.inherits(o,c("React").PureComponent);k=j&&j.prototype;function o(p){__p&&__p();k.constructor.call(this,p);this.interpolator=function(q,r){__p&&__p();var s,t=this;if(r.className)return c("React").createElement("span",{className:r.className},q);if(r.math)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerMath.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null,q),body:this.$MercuryMessageBody4(q),fallbackBody:q,inline:true,stripDelimiters:true,className:"_1e4d _1e4e"});if(r.id){var s=function(){__p&&__p();var y={};if(!t.props.isFromViewer&&t.props.threadCustomColor)y.color=t.props.threadCustomColor;var z=t.props.onContactSelect,A=t.props.threadID?c("MercuryIDs").getThreadFBIDFromThreadID(t.props.threadID)===r.id:false,B=new(c("URI"))("/ajax/hovercard/user.php").setQueryData({id:r.id}),C=c("gkx")("AT6RjIJVvIfplq-ZeT5_MD81B3OgeLlmewNtJ7hzw811gUcL2KB7zXVo29pTy6tr5BFiWzx-vsgfOHRh3TsCXQ_N"),D=c("React").createElement(c("Link.react"),{className:"_ih-",href:A?"#":r.url,"data-hovercard":C?B:null,style:y,onClick:z&&!A?function(E){this.$MercuryMessageBody3(z,r,E)}.bind(t):c("emptyFunction")},q);if(c("gkx")("AT7Q3RXvU0e0MR7WMB7vpMdOzYsW6m3MXSY9NFLfpMl_9zOHYMydsYAgMgpRAa3rIuTQCnrjzygxZViELyTXnLRu")&&!A&&z&&!c("gkx")("AT4wvZYjV8-NGP1Ct5BtRXL5qRGg9f2fjcTz0WljQOyxRYjvSAJWdtxM6WPbqEAMr890WqxJ2sqyXF1Lpx746MK_")){if(typeof q==="string")r.contactName=q&&q.replace("@","");D=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerAvatarActions.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:D,avatar:D,contact:r,showSendMessageItem:true,onAction:t.props.onContactSelect})}return{v:D}}();if(typeof s==="object")return s.v}if(r.formatter)if(r.recursivelyFormat){var u=this.renderBody(r.innerText,true,r.innerOffset);return r.formatter(u)}else return r.formatter(r.innerText);if(r.entity&&r.entity.url){var v=new(c("URI"))(r.entity.url.replace(/#+$/,""));if(c("shouldAddMRefParam")(v))v.addQueryData({__mref:"mb"});var w=v.toString();if(c("URI").isValidURI(w))return c("React").createElement(c("Link.react"),{href:{url:w,shimhash:r.entity.shimhash},s:r.entity.s,target:"_blank"},q);else return q}if(!r.entity){var x=typeof r.type==="number"?r.type:c("TextWithEntitiesMetadataType")[r.type];switch(x){case c("TextWithEntitiesMetadataType").NONE:return c("React").createElement("span",{className:"_2y9",title:JSON.stringify(r.data)},q);case c("TextWithEntitiesMetadataType").CONCEPT:return this.renderConceptMetadata(q,r.data);case c("TextWithEntitiesMetadataType").INTENT:return this.renderIntentMetadata(q,r.data);default:return q}}return q}.bind(this);this.state=this.parseMessageBody(p)}o.prototype.componentWillReceiveProps=function(p){if(this.props.body!==p.body||this.props.metaRanges!==p.metaRanges||this.props.ranges!==p.ranges)this.setState(this.parseMessageBody(p))};o.prototype.parseMessageBody=function(p){__p&&__p();var q=(p.body||"").replace(/\s+$/,""),r=this.$MercuryMessageBody1(p.metaRanges||[]),s={normalizedBody:q,isEncrypted:false,isMathBlock:false,isRichText:false,ranges:[],filteredMetaRanges:r};if(q.length===0)return s;if(q.startsWith("?OTR")){s.isEncrypted=true;return s}if(c("MessengerMathUtils").isMathBlock(q)){s.isMathBlock=true;return s}var t=p.ranges,u=p.metaRanges,v=t&&t.length||u&&u.length||c("EmoticonsList").noncapturingRegexp.test(q)||c("EmojiRenderer").containsEmoji(q)||c("URLMatcher").match(q)||c("EmployeeLinkMatcher").isMatch(q)||c("RedditLinkMatcher").isMatch(q)||this.$MercuryMessageBody2(q,p)||c("MessengerSupportedEmojiUtils").containsEmoji(q)||c("EmoticonEmojiList").noncapturingRegexp.test(q)||c("MessengerFormattingUtils").hasMatch(q)||c("MessengerMathUtils").hasInlineMath(q);if(!v)return s;s.isRichText=true;if(t&&t.length===1&&t[0].className==="__in")t=c("getURLRanges")(q).concat(t);t=t||[];t=t.concat(c("getURLRanges")(q),c("EmployeeLinkRanges").get(q));if(c("gkx")("AT68T0-RBZ3ruYC2iw6PwwKUATJNpftRrkhHfnHZxEdm_s8ILK529f2x1yRSuxO4JhNEQa2oesAXWdtnF6SM8ow_"))t=t.concat(c("RedditLinkRanges").get(q));t=t.concat(c("MessengerFormattingUtils").getRanges(q));t=t.concat(c("MessengerMathUtils").getInlineMathRanges(q));s.ranges=t.filter(function(w){return w!=undefined});return s};o.prototype.hasFormatting=function(){return this.state.isRichText||this.state.isMathBlock||this.state.isEncrypted};o.prototype.$MercuryMessageBody3=function(p,q,r){c("gkx")("AT7Q3RXvU0e0MR7WMB7vpMdOzYsW6m3MXSY9NFLfpMl_9zOHYMydsYAgMgpRAa3rIuTQCnrjzygxZViELyTXnLRu")?r.preventDefault():p(l.MESSAGE,q,r)};o.prototype.$MercuryMessageBody4=function(p){if(this.props.isFromViewer)return"\\color{#fff}{"+c("MessengerMathUtils").getMathBlockInner(p)+"}";else return c("MessengerMathUtils").getMathBlockInner(p)};o.prototype.renderConceptMetadata=function(p,q){if(!q)return p;if(q.intent_name||q.name)return this.renderIntentMetadata(p,q);return p};o.prototype.renderIntentMetadata=function(p,q){__p&&__p();if(!q)return p;var r=q.intent_name||q.name;switch(r){case"request_time":return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ServicesVerticalRequestTimeTriggers.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null,p),data:q,text:p,threadID:this.props.threadID});case"timestamp":if(this.$MercuryMessageBody5(q.value)&&c("EventRemindersGating").shouldShowTriggerWords)if(this.props.renderLocation===c("MercuryMessageRenderLocations").CHAT)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ChatEventPlanTriggers.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null,p),data:q,text:p,threadID:this.props.threadID});else if(this.props.renderLocation===c("MercuryMessageRenderLocations").MESSENGER)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerEventPlanTriggers.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null,p),data:q,text:p,threadID:this.props.threadID});return p;default:return p}};o.prototype.renderIntentCTA=function(p){__p&&__p();if(p){var q=p.intent_name||p.name;switch(q){case"request_time":return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ServicesRequestTimeIntentCTA.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null),data:p,isFromViewer:this.props.isFromViewer,threadID:this.props.threadID});case"create_event":c("requireWeak")("EventReminderActionsLogger",function(t){t.logTriggerOnTriggerCTA()});var r=this.props.threadID,s=r&&this.$MercuryMessageBody5(p.timestamp)&&c("EventReminderStateStore").shouldShowCTA(r,p.confidence);if(!s)return null;if(this.props.renderLocation===c("MercuryMessageRenderLocations").CHAT)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ChatEventPlanCTA.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null),data:p,threadID:r});else if(this.props.renderLocation===c("MercuryMessageRenderLocations").MESSENGER)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerEventPlanCTA.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null),data:p,threadID:r})}}return null};o.prototype.renderCTAs=function(p){var q=null;if(p.length>0){var r=p[0]||{},s=typeof r.type==="number"?r.type:c("TextWithEntitiesMetadataType")[r.type];switch(s){case c("TextWithEntitiesMetadataType").CONCEPT:case c("TextWithEntitiesMetadataType").INTENT:q=this.renderIntentCTA(r.data);break}}return q};o.prototype.renderBody=function(p){__p&&__p();var q=arguments.length<=1||arguments[1]===undefined?false:arguments[1],r=arguments.length<=2||arguments[2]===undefined?0:arguments[2],s=this.state,t=s.isRichText,u=s.ranges,v=s.filteredMetaRanges,w=c("UnicodeUtils").strlen(p);if(!t)return c("React").createElement("span",{className:this.props.className},p);if(q){u=u.filter(function(B){return B.offset>=r&&B.offset+B.length<=r+w}).map(function(B){return babelHelpers["extends"]({},B,{offset:B.offset-r})});v=v.filter(function(B){return B.offset>=r&&B.offset+B.length<=r+w}).map(function(B){return babelHelpers["extends"]({},B,{offset:B.offset-r})})}var x={className:this.props.className,interpolator:this.interpolator,metaRanges:v,ranges:u,renderEmoji:true,renderEmoticons:true,text:p};if(this.$MercuryMessageBody2(p)){var y=c("React").createElement(c("TextWithEntities.react"),x);return c("React").createElement(c("BootloadedComponent.react"),babelHelpers["extends"]({bootloadPlaceholder:y,bootloadLoader:c("JSResource")("TextWithEntitiesAndP2P.react").__setRef("MercuryMessageBody.react")},x,{getMessengerEmote:this.$MercuryMessageBody6,isSupportedEmoji:this.$MercuryMessageBody7,threadID:this.props.threadID}))}var z=c("React").createElement(c("MessengerTextWithEntities.react"),x);if(q)return z;var A=this.renderCTAs(this.props.metaRanges||[]);if(!A)return z;return c("React").createElement("span",null,z,A)};o.prototype.render=function(){__p&&__p();var p=this.state,q=p.normalizedBody,r=p.isEncrypted,s=p.isMathBlock;if(q.length===0)return null;n();if(this.props.plainText)return c("React").createElement("span",null,q);else if(r)return c("React").createElement("span",{className:"_89h"},i._("[\uc554\ud638\ud654\ub41c \uba54\uc2dc\uc9c0]"));else if(s)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerMath.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("div",null,q),body:this.$MercuryMessageBody4(q),fallbackBody:q,stripDelimiters:true,className:"_1e4d"});else return this.renderBody(q)};o.prototype.$MercuryMessageBody7=function(p){return c("MessengerSupportedEmojiUtils").isSupportedEmojiKey(p)};o.prototype.$MercuryMessageBody6=function(p){var q=c("EmoticonEmojiList").emote2emojis[p];return c("MessengerSupportedEmojiUtils").isSupportedEmojiKey(q)?q:null};o.prototype.$MercuryMessageBody5=function(p){var q=new Date(p*c("DateConsts").MS_PER_SEC),r=new Date(Date.now()+5*c("DateConsts").MS_PER_MIN),s=new Date(new Date().setFullYear(new Date().getFullYear()+1));return q>r&&q<s};o.prototype.$MercuryMessageBody1=function(p){var q=p.filter(function(r){return r.data&&(r.data.intent_name==="create_event"||r.data.name==="create_event")});return q.length!==0?q:p};o.prototype.$MercuryMessageBody2=function(p){var q=arguments.length<=1||arguments[1]===undefined?this.props:arguments[1];return!!(q.threadID&&c("P2PTriggersUtils").canSeeTriggers(q.threadID)&&c("P2PTriggersUtils").getMatches(p))};o.propTypes={body:m.string,customLike:m.object,isFromViewer:m.bool,metaRanges:m.array,ranges:m.array,threadCustomColor:m.string,threadID:m.string,onContactSelect:m.func,renderLocation:m.oneOf([c("MercuryMessageRenderLocations").CHAT,c("MercuryMessageRenderLocations").MESSENGER,c("MercuryMessageRenderLocations").PAGES])};f.exports=o}),null);
__d("MercuryMessageDeliveryState",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({SENDING:1,SENT:2,DELIVERED:3,ERROR:0,UNKNOWN:-1});f.exports=h}),null);
__d("MercuryMessageInfo",["MercuryActionStatus","MercuryMessageDeliveryState","MercuryViewer"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={isOutbound:function i(j){return j.author===c("MercuryViewer").getID()},isInbound:function i(j){return!h.isOutbound(j)},isSending:function i(j){return j.status===c("MercuryActionStatus").UNSENT||j.status===c("MercuryActionStatus").UNCONFIRMED||j.status===c("MercuryActionStatus").UNABLE_TO_CONFIRM||j.status===c("MercuryActionStatus").RESENDING},isSent:function i(j){return j.status===undefined||j.status===c("MercuryActionStatus").SUCCESS},hasError:function i(j){return j.status===c("MercuryActionStatus").FAILED_UNKNOWN_REASON||j.status===c("MercuryActionStatus").UNABLE_TO_CONFIRM||j.status===c("MercuryActionStatus").ERROR},getDeliveryState:function i(j,k){__p&&__p();if(this.hasError(j))return c("MercuryMessageDeliveryState").ERROR;if(this.isSending(j))return c("MercuryMessageDeliveryState").SENDING;if(this.isSent(j)){if(j.timestamp<=k)return c("MercuryMessageDeliveryState").DELIVERED;return c("MercuryMessageDeliveryState").SENT}return c("MercuryMessageDeliveryState").UNKNOWN}};f.exports=h}),null);
__d("MercuryErrorInfo",["fbt","MercuryErrorType","MercuryMessageInfo"],(function a(b,c,d,e,f,g,h){__p&&__p();var i={getMessage:function j(k){__p&&__p();var l="";if(i.isConnectionError(k)){l=h._("\uba54\uc2dc\uc9c0\uac00 \uc804\uc1a1\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.");if(i.isTransient(k))l=h._("{message} \uc778\ud130\ub137 \uc5f0\uacb0 \uc0c1\ud0dc\ub97c \ud655\uc778\ud55c \ud6c4 \ub2e4\uc2dc \uc804\uc1a1\ud574\ubcf4\uc138\uc694.",[h.param("message",l)])}else{if(k&&k.description)l=k.description;else l=h._("\uba54\uc2dc\uc9c0 \uc804\uc1a1\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");if(i.isTransient(k))l=h._("{message} \uc7ac\uc804\uc1a1\ud558\ub824\uba74 \ud074\ub9ad\ud558\uc138\uc694.",[h.param("message",l)])}return l},isConnectionError:function j(k){if(k&&k.type==c("MercuryErrorType").TRANSPORT)return k.code===1001||k.code===1004||k.code===1006;return false},isTransient:function j(k){return k&&k.is_transient},isPermanent:function j(k){return k?!this.isTransient(k):false},hasErrorStatus:function j(k){return c("MercuryMessageInfo").hasError(k)}};f.exports=i}),null);
__d("MercuryMessageError.react",["cx","CurrentUser","ImmutableObject","Link.react","MercuryErrorInfo","MercuryMessageActions","React","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.messageResend=function(r){r.preventDefault();var s=this.props.message,t=s.error_data;if(c("MercuryErrorInfo").isTransient(t))c("MercuryMessageActions").getForFBID(this.props.authorFBID).resend(this.props.message)}.bind(this),n}l.prototype.render=function(){var m=this.props.message,n=m.error_data;return c("React").createElement(c("Link.react"),babelHelpers["extends"]({},this.props,{href:"#",className:c("joinClasses")(this.props.className,this.$MercuryMessageError1(m)),tabIndex:c("MercuryErrorInfo").isTransient(n)?0:null,onClick:this.messageResend}),c("React").createElement("i",{className:"_2fs1"}),c("React").createElement("span",{className:"_61ag",dangerouslySetInnerHTML:{__html:this.$MercuryMessageError2(m)}}))};l.prototype.$MercuryMessageError1=function(m){if(c("MercuryErrorInfo").hasErrorStatus(m))return"_2fs2 _2fs3"+(c("MercuryErrorInfo").isTransient(m.error_data)?" _2fs4":"")+(c("MercuryErrorInfo").isPermanent(m.error_data)?" _2fs5":"");else return"_2fs6 _2fs2"};l.prototype.$MercuryMessageError2=function(m){var n="",o=m.error_data;if(c("MercuryErrorInfo").hasErrorStatus(m)){var p=c("MercuryErrorInfo").getMessage(o);if(p)n=p.toString()}if(typeof n==="object"&&n.__html)n=n.__html;return n};l.propTypes={authorFBID:k.string,message:k.instanceOf(c("ImmutableObject")).isRequired};l.defaultProps={authorFBID:c("CurrentUser").getID()};f.exports=l}),null);
__d("XEventReminderController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/eventreminder/",{event_reminder_id:{type:"Int",required:true}})}),null);
__d("EventReminderRequestHelper",["AsyncRequest","EventReminderActions","XEventReminderController"],(function a(b,c,d,e,f,g){"use strict";var h={fetchEventReminder:function i(j,k,l){var m=c("XEventReminderController").getURIBuilder().setInt("event_reminder_id",k);new(c("AsyncRequest"))(m.getURI()).setHandler(function(n){if(n.payload){c("EventReminderActions").updateEventReminder(j,n.payload);l()}}).send()}};f.exports=h}),null);
__d("MessengerMessageActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MessengerMessageActionsLoggerConfig",this.$MessengerMessageActionsTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MessengerMessageActionsLoggerConfig",this.$MessengerMessageActionsTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$MessengerMessageActionsTypedLogger1={};return this};h.prototype.updateData=function(j){this.$MessengerMessageActionsTypedLogger1=babelHelpers["extends"]({},this.$MessengerMessageActionsTypedLogger1,j);return this};h.prototype.setAction=function(j){this.$MessengerMessageActionsTypedLogger1.action=j;return this};h.prototype.setAppID=function(j){this.$MessengerMessageActionsTypedLogger1.appid=j;return this};h.prototype.setAppversion=function(j){this.$MessengerMessageActionsTypedLogger1.appversion=j;return this};h.prototype.setClienttime=function(j){this.$MessengerMessageActionsTypedLogger1.clienttime=j;return this};h.prototype.setContainermodule=function(j){this.$MessengerMessageActionsTypedLogger1.containermodule=j;return this};h.prototype.setCountry=function(j){this.$MessengerMessageActionsTypedLogger1.country=j;return this};h.prototype.setEntryPoint=function(j){this.$MessengerMessageActionsTypedLogger1.entry_point=j;return this};h.prototype.setErrorText=function(j){this.$MessengerMessageActionsTypedLogger1.error_text=j;return this};h.prototype.setGroupSize=function(j){this.$MessengerMessageActionsTypedLogger1.group_size=j;return this};h.prototype.setMessageType=function(j){this.$MessengerMessageActionsTypedLogger1.message_type=j;return this};h.prototype.setMid=function(j){this.$MessengerMessageActionsTypedLogger1.mid=j;return this};h.prototype.setName=function(j){this.$MessengerMessageActionsTypedLogger1.name=j;return this};h.prototype.setOfflineThreadid=function(j){this.$MessengerMessageActionsTypedLogger1.offline_threadid=j;return this};h.prototype.setPreviousReaction=function(j){this.$MessengerMessageActionsTypedLogger1.previous_reaction=j;return this};h.prototype.setReaction=function(j){this.$MessengerMessageActionsTypedLogger1.reaction=j;return this};h.prototype.setRecipientID=function(j){this.$MessengerMessageActionsTypedLogger1.recipient_id=j;return this};h.prototype.setThreadType=function(j){this.$MessengerMessageActionsTypedLogger1.thread_type=j;return this};h.prototype.setThreadid=function(j){this.$MessengerMessageActionsTypedLogger1.threadid=j;return this};h.prototype.setVC=function(j){this.$MessengerMessageActionsTypedLogger1.vc=j;return this};h.prototype.updateExtraData=function(j){j=c("nullthrows")(c("GeneratedLoggerUtils").serializeMap(j));c("GeneratedLoggerUtils").checkExtraDataFieldNames(j,i);this.$MessengerMessageActionsTypedLogger1=babelHelpers["extends"]({},this.$MessengerMessageActionsTypedLogger1,j);return this};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l)};var i={action:true,appid:true,appversion:true,clienttime:true,containermodule:true,country:true,entry_point:true,error_text:true,group_size:true,message_type:true,mid:true,name:true,offline_threadid:true,previous_reaction:true,reaction:true,recipient_id:true,thread_type:true,threadid:true,vc:true};f.exports=h}),null);
__d("MessengerWebViewReactionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MessengerWebViewReactionsLoggerConfig",this.$MessengerWebViewReactionsTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MessengerWebViewReactionsLoggerConfig",this.$MessengerWebViewReactionsTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$MessengerWebViewReactionsTypedLogger1={};return this};h.prototype.updateData=function(j){this.$MessengerWebViewReactionsTypedLogger1=babelHelpers["extends"]({},this.$MessengerWebViewReactionsTypedLogger1,j);return this};h.prototype.setEmojiGroup=function(j){this.$MessengerWebViewReactionsTypedLogger1.emoji_group=j;return this};h.prototype.setEmojiGroupCount=function(j){this.$MessengerWebViewReactionsTypedLogger1.emoji_group_count=j;return this};h.prototype.setEvent=function(j){this.$MessengerWebViewReactionsTypedLogger1.event=j;return this};h.prototype.setMid=function(j){this.$MessengerWebViewReactionsTypedLogger1.mid=j;return this};h.prototype.setSenderID=function(j){this.$MessengerWebViewReactionsTypedLogger1.sender_id=j;return this};h.prototype.setVC=function(j){this.$MessengerWebViewReactionsTypedLogger1.vc=j;return this};var i={emoji_group:true,emoji_group_count:true,event:true,mid:true,sender_id:true,vc:true};f.exports=h}),null);
__d("MessagesViewerSetID",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MESSAGES:"messages",MESSAGES_VIEW_ALL_IN_THREAD:"messages:view_all_in_thread"})}),null);
__d("MessagesViewer",["AsyncRequest","DOM","MessagesViewerSetID","PhotoStore","React","ReactDOM","emptyFunction","ge"],(function a(b,c,d,e,f,g){__p&&__p();var h={renderSpotlight:function j(k,l,m,n){__p&&__p();var o=k.setID;if(!o)o=c("MessagesViewerSetID").MESSAGES;i(c("React").createElement(m,{actorid:k.actorid,dimensions:[k.dimensions],disablepaging:k.disablePaging,disableForward:k.disableForward,forwardDialogComponent:n,open:true,photoid:k.fbid,reverse:false,rootClassName:k.rootClassName,setid:o,snapToPhoto:k.snapToPhoto,thumbsrc:k.src}));if(!c("PhotoStore").hasBeenCreated(o)&&k.endpoint){var p=new(c("AsyncRequest"))(k.endpoint);if(l)p.setRelativeTo(l);p.send()}},renderVideo:function j(k){i(k)}};function i(j){var k=c("ge")("messages_viewer");if(!k){k=c("DOM").create("div",{id:"messages_viewer"});document.body.appendChild(k)}c("ReactDOM").render(j,k,function(){this.subscribeOnce("close",function(){c("ReactDOM").unmountComponentAtNode(k)})})}f.exports=h}),null);
__d("MercuryAttachmentViewer",["Bootloader","MessagesViewer","React","Run","emptyFunction"],(function a(b,c,d,e,f,g){"use strict";var h={renderVideo:function i(j){c("Bootloader").loadModules(["MessagingVideoViewer.react","MessagingForwardAttachmentDialog.react"],function(k,l){c("MessagesViewer").renderVideo(c("React").createElement(k,babelHelpers["extends"]({},j,{forwardDialogComponent:l})))},"MercuryAttachmentViewer")},bootstrapWithConfig:function i(j,k){c("Bootloader").loadModules(["SpotlightMessagesViewer","MessagingForwardAttachmentDialog.react"],function(l,m){c("MessagesViewer").renderSpotlight(j,k,l,m)},"MercuryAttachmentViewer")},preload:function i(){c("Run").onAfterLoad(function(){c("Bootloader").loadModules(["MessagingVideoViewer.react","SpotlightMessagesViewer","MessagingForwardAttachmentDialog.react"],c("emptyFunction"),"MercuryAttachmentViewer")})}};f.exports=h}),null);
__d("ChatFlyoutPlaceholder.react",["React","XUISpinner.react"],(function a(b,c,d,e,f,g){"use strict";var h={padding:"30px",textAlign:"center"},i=function i(){return c("React").createElement("div",{style:h},c("React").createElement(c("XUISpinner.react"),{size:"large"}))};f.exports=i}),null);
__d("ChatPhotoUploader.react",["cx","fbt","Promise","Bootloader","FantaTypeComposer","ifRequired","InlineBlock.react","Link.react","MercuryConfig","MessengerEnvironment","React","ReactDOM","SubscriptionsHandler","emptyFunction","gkx","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("React").PropTypes,k=c("React").createClass({displayName:"ChatPhotoUploader",_uploader:null,_uploaderPromiseIsResolving:false,_uploaderPromise:null,_subscriptions:null,propTypes:{actionURI:j.string,allowCrossPage:j.bool,composer:j.object,customUI:j.bool,disabled:j.bool,focusInput:j.func,imageClassName:j.string,imagesOnly:j.bool,inputClassname:j.string,linkClassName:j.string,onAllUploadsComplete:j.func,onLastUploadCancel:j.func,onLastUploadFail:j.func,onMount:j.func,onSubmit:j.func,onUploadError:j.func,threadID:j.string},getDefaultProps:function l(){return{actionURI:c("MercuryConfig").upload_url,allowCrossPage:true,costomUI:false,disabled:false,imageClassName:"_509w",imagesOnly:true,linkClassName:"",onSubmit:c("emptyFunction"),onAllUploadsComplete:c("emptyFunction"),onLastUploadFail:c("emptyFunction"),onLastUploadCancel:c("emptyFunction")}},shouldComponentUpdate:function l(m){return m.actionURI!=this.props.actionURI||m.disabled!==this.props.disabled},componentDidMount:function l(){if(this.props.onMount)this.props.onMount(this);if(c("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw"))c("MessengerEnvironment").messengerui?c("Bootloader").loadModules(["MessengerActions"],c("emptyFunction"),"ChatPhotoUploader.react"):c("Bootloader").loadModules(["FantaMessageActions"],c("emptyFunction"),"ChatPhotoUploader.react")},componentDidUpdate:function l(m){if(this._uploader)this._uploader.setAllowCrossPage(this.props.allowCrossPage)},componentWillUnmount:function l(){if(!this.isUploading()||!this.props.allowCrossPage)this._cleanup()},render:function l(){var m=this.props.imagesOnly?i._("\uc0ac\uc9c4 \ucd94\uac00"):i._("\ud30c\uc77c \ucd94\uac00"),n=c("joinClasses")("_4q61"+(!this.props.customUI?" _5f0v":"")+(!this.props.customUI?" _509v":""),this.props.linkClassName),o=c("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw");return c("React").createElement("form",{action:this.props.actionURI,className:"_vzk",title:m,method:"post",onClick:function(p){p.stopPropagation();if(this.props.disabled)p.preventDefault()}.bind(this),ref:"form"},c("React").createElement("input",{type:"hidden",name:"attach_id",ref:"attachID"}),c("React").createElement("input",{type:"hidden",name:"images_only",value:this.props.imagesOnly}),c("React").createElement(c("InlineBlock.react"),{onClick:o?c("emptyFunction"):this._bootloadChatAutoSendPhotoUploader,className:c("joinClasses")(this.props.className,"_m _4q60 _3rzn")},c("React").createElement("input",{disabled:this.props.disabled,type:"file",className:c("joinClasses")(this.props.inputClassname,"_n _2__f"),name:"attachment[]",multiple:"true",accept:this.props.imagesOnly?"image/*":"*",ref:"input",title:m,onChange:o?function(event){this._handleInputOnChange(event,this.props.threadID)}.bind(this):c("emptyFunction")}),c("React").createElement(c("Link.react"),{className:n,tabIndex:-1},c("React").createElement("i",{className:this.props.imageClassName,alt:i._("\uce74\uba54\ub77c")}))))},_handleInputOnChange:function l(event,m){__p&&__p();c("MessengerEnvironment").messengerui?c("ifRequired")("MessengerActions",function(n){return n.prepareFilesForSend(m,event.target.files)},function(){c("Bootloader").loadModules(["MessengerActions"],function(n){n.prepareFilesForSend(m,event.target.files)},"ChatPhotoUploader.react")}):c("ifRequired")("FantaMessageActions",function(n){if(this.props.composer)n.prepareFilesForSend(this.props.threadID,event.target.files,this.props.composer)}.bind(this),function(){c("Bootloader").loadModules(["FantaMessageActions"],function(n){if(this.props.composer)n.prepareFilesForSend(this.props.threadID,event.target.files,this.props.composer)}.bind(this),"ChatPhotoUploader.react")}.bind(this));this.props.focusInput&&this.props.focusInput()},_handleSubmit:function l(m,n){this.props.onSubmit&&this.props.onSubmit(m,n)},_handleAllUploadsCompleted:function l(m,n){this.props.onAllUploadsComplete&&this.props.onAllUploadsComplete(m,n);if(!this.isMounted())this._cleanup()},_handleLastUploadFailed:function l(m,n){this.props.onLastUploadFail&&this.props.onLastUploadFail(m,n);if(!this.isMounted())this._cleanup()},_handleLastUploadCanceled:function l(m,n){this.props.onLastUploadCancel&&this.props.onLastUploadCancel(m,n);if(!this.isMounted())this._cleanup()},_handleUploadError:function l(m,n){this.props.onUploadError&&this.props.onUploadError(n);if(!this.isMounted())this._cleanup()},isUploading:function l(){return this._uploader&&this._uploader.isUploading()||this._uploaderPromiseIsResolving},_bootloadChatAutoSendPhotoUploader:function l(){__p&&__p();if(!this._uploaderPromise){this._uploaderPromiseIsResolving=true;this._uploaderPromise=new(c("Promise"))(function(m){c("Bootloader").loadModules(["ChatAutoSendPhotoUploader"],function(n){this._uploaderPromiseIsResolving=false;var o=new n(c("ReactDOM").findDOMNode(this.refs.form),c("ReactDOM").findDOMNode(this.refs.input),c("ReactDOM").findDOMNode(this.refs.attachID),c("MercuryConfig").msgr_region);o.setAllowCrossPage(this.props.allowCrossPage);var p=new(c("SubscriptionsHandler"))();p.addSubscriptions(o.subscribe("submit",this._handleSubmit),o.subscribe("all-uploads-completed",this._handleAllUploadsCompleted),o.subscribe("last-upload-failed",this._handleLastUploadFailed),o.subscribe("last-upload-canceled",this._handleLastUploadCanceled),o.subscribe("file-upload-error",this._handleUploadError));this._subscriptions=p;this._uploader=o;m(this._uploader)}.bind(this),"ChatPhotoUploader.react")}.bind(this))}return this._uploaderPromise},uploadFiles:function l(m){this._bootloadChatAutoSendPhotoUploader().then(function(n){n.uploadFiles(m)}).done()},uploadURL:function l(m){this._bootloadChatAutoSendPhotoUploader().then(function(n){n.uploadURL(m)}).done()},_cleanup:function l(){this._subscriptions&&this._subscriptions.release();this._uploader&&this._uploader.destroy()}});f.exports=k}),null);
__d("MercuryTypingAnimation.react",["cx","React","SutroPhase2GatingConfig","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){var m=c("SutroPhase2GatingConfig").enabled_bubble_comments,n="_4a0v"+(!m&&this.props.color==="light"?" _4a0w":"")+(!m&&this.props.color==="dark"?" _4a0x":"")+(m?" _1x3z":"");return c("React").createElement("div",{className:c("joinClasses")(this.props.className,n)},c("React").createElement("div",{className:"_4b0g"},c("React").createElement("div",{className:"_5pd7"}),c("React").createElement("div",{className:"_5pd7"}),c("React").createElement("div",{className:"_5pd7"})))};function l(){i.apply(this,arguments)}l.propTypes={color:k.oneOf(["light","dark"])};l.defaultProps={color:"dark"};f.exports=l}),null);
__d("ChatTypingIndicator.react",["cx","fbt","ChatConfig","Image.react","MercuryConfig","MercuryParticipants","MercuryTypingAnimation.react","ReactComponentWithPureRenderMixin","React","QE2Logger"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=c("React").PropTypes,k=c("ChatConfig").get("chattab_rounded_profile",false),l=c("React").createClass({displayName:"ChatTypingIndicator",mixins:[c("ReactComponentWithPureRenderMixin")],propTypes:{isOnline:j.bool,userID:j.string,showName:j.bool},componentDidMount:function n(){c("QE2Logger").logExposureForUser("messenger_growth_tombstone")},render:function n(){var o=void 0;if(this.props.userID)o=c("MercuryParticipants").getNow(this.props.userID);if(!o)return null;var p=c("MercuryConfig").GDWC&&!!this.props.isOnline;return c("React").createElement("div",{className:"_4tdt"},m(o,p),this._renderBubble())},getBubble:function n(){return this.refs.bubble},_renderBubble:function n(){var o=this.props.showName;return c("React").createElement("div",{className:"_4tdv"},c("React").createElement("div",{className:"_5wd4 _1nc7 _2cnu"+(o?" _5ysy":"")},c("React").createElement("div",{className:"_5wd9 _n4o"},c("React").createElement("div",{className:"_5w1r _5wdf _3_om"},c("React").createElement(c("MercuryTypingAnimation.react"),{className:"_5x7x",ref:"bubble"})))))}});function m(n,o){var p=i._("{name}",[i.param("name",n.name)]);return c("React").createElement("div",{className:"_31o4"+(k?" _3njy":"")},c("React").createElement("a",{"aria-label":p,className:"_4tdw","data-hover":"tooltip","data-tooltip-content":p,"data-tooltip-position":"left",href:n.href||"#",ref:"link"},c("React").createElement(c("Image.react"),{src:n.image_src,ref:"image"})),o?c("React").createElement("div",{className:"_sce"}):null)}f.exports=l}),null);
__d("MercuryTypingReceiver",["Arbiter","ChannelConstants","FBIDCheck","MercuryActionType","MercuryIDs","MercuryPayloadSource","MercuryDispatcher","MercurySingletonMixin","MercuryThreadIDMap","MercuryViewer","TypingStates","isEmpty","mixInEventEmitter","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("MercuryThreadIDMap").get(),i=3e4;function j(k){"use strict";__p&&__p();this.$MercuryTypingReceiver1=null;this.$MercuryTypingReceiver2={};this.$MercuryTypingReceiver3=c("MercuryDispatcher").getForFBID(k);this.$MercuryTypingReceiver3.subscribe("update-typing-state",function(m,n){__p&&__p();var o=n.payload_source;if(o!=c("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)return;var p=n.actions;if(!p||!p.length)return;var q=c("MercuryActionType").USER_GENERATED_MESSAGE;p.forEach(function(r){if(r.action_type==q&&r.author!=c("MercuryViewer").getID())this.$MercuryTypingReceiver4(r.thread_id,r.author)}.bind(this))}.bind(this));var l=[c("ChannelConstants").getArbiterType("typ"),c("ChannelConstants").getArbiterType("ttyp")];if(!c("FBIDCheck").isUser_deprecated(k))l.push(c("ChannelConstants").getArbiterType("page_typing"));c("Arbiter").subscribe(l,function(m,n){__p&&__p();var o=n.obj,p=this.$MercuryTypingReceiver5(o);if(p){var q=c("MercuryIDs").getParticipantIDFromUserID(o.from.toString());if(o.st==c("TypingStates").TYPING){this.$MercuryTypingReceiver2[p]=this.$MercuryTypingReceiver2[p]||{};var r=this.$MercuryTypingReceiver2[p][q];this.$MercuryTypingReceiver2[p][q]=Date.now();if(!this.$MercuryTypingReceiver1)this.$MercuryTypingReceiver1=c("setTimeoutAcrossTransitions")(function(){this.$MercuryTypingReceiver6()}.bind(this),3e3);!r&&this.$MercuryTypingReceiver7(p)}else if(o.st==c("TypingStates").INACTIVE)this.$MercuryTypingReceiver4(p,q)}}.bind(this))}j.prototype.$MercuryTypingReceiver8=function(k){"use strict";var l=this.$MercuryTypingReceiver2[k]||{},m=Object.keys(l);m.sort(function(n,o){return l[n]-l[o]});return m};j.prototype.$MercuryTypingReceiver6=function(){"use strict";__p&&__p();this.$MercuryTypingReceiver1=null;var k=Date.now(),l={},m=false;for(var n in this.$MercuryTypingReceiver2){var o=false;for(var p in this.$MercuryTypingReceiver2[n]||{})if(this.$MercuryTypingReceiver2[n][p]<k-i){delete this.$MercuryTypingReceiver2[n][p];o=true}else m=true;if(o)l[n]=this.$MercuryTypingReceiver8(n)}if(!c("isEmpty")(l))this.$MercuryTypingReceiver9(l);if(m)this.$MercuryTypingReceiver1=c("setTimeoutAcrossTransitions")(function(){this.$MercuryTypingReceiver6()}.bind(this),3e3)};j.prototype.$MercuryTypingReceiver4=function(k,l){"use strict";if(k in this.$MercuryTypingReceiver2)if(l in this.$MercuryTypingReceiver2[k]){delete this.$MercuryTypingReceiver2[k][l];this.$MercuryTypingReceiver7(k)}};j.prototype.$MercuryTypingReceiver9=function(k){"use strict";this.releaseHeldEventType("state-changed");this.emitAndHold("state-changed",k)};j.prototype.$MercuryTypingReceiver7=function(k){"use strict";var l={};l[k]=this.$MercuryTypingReceiver8(k);this.$MercuryTypingReceiver9(l)};j.prototype.$MercuryTypingReceiver5=function(k){"use strict";if(k.thread_fbid)return h.getClientIDFromServerIDNow(k.thread_fbid.toString());if(k.type==="typ"||k.type==="page_typing")return c("MercuryIDs").getThreadIDFromUserID(k.from.toString());return null};c("mixInEventEmitter")(j,{"state-changed":true});Object.assign(j,c("MercurySingletonMixin"));f.exports=j}),null);
__d("ChatTypingIndicators.react",["fbt","ChatTypingIndicator.react","DOM","immutable","MercuryIDs","MercuryThreadInformer","MercuryThreads","MercuryTypingReceiver","MercuryParticipants","React","ReactDOM","SubscriptionsHandler","TooltipData","createObjectFrom","emptyFunction"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("MercuryThreads").get(),j=c("React").PropTypes,k=c("React").createClass({displayName:"ChatTypingIndicators",propTypes:{indicatorClass:j.func,indicatorsWillShow:j.func,indicatorsDidShow:j.func,onlineUsers:j.instanceOf(c("immutable").List),rootClassName:j.string,threadID:j.string.isRequired,viewer:j.string.isRequired},getDefaultProps:function l(){return{indicatorClass:c("ChatTypingIndicator.react"),indicatorsWillShow:c("emptyFunction"),indicatorsDidShow:c("emptyFunction")}},getInitialState:function l(){return{typingUserIDs:[]}},componentDidMount:function l(){var m=c("MercuryThreadInformer").getForFBID(this.props.viewer),n=c("MercuryTypingReceiver").getForFBID(this.props.viewer);this._subscriptions=new(c("SubscriptionsHandler"))();this._subscriptions.addSubscriptions(n.addRetroactiveListener("state-changed",this.typingStateChanged),m.subscribe("messages-received",this.messagesReceived))},componentWillReceiveProps:function l(m){if(m.threadID!=this.props.threadID)this.setState({typingUserIDs:[]})},componentWillUpdate:function l(m,n){if(n.typingUserIDs.length>0)this.props.indicatorsWillShow()},componentDidUpdate:function l(){if(this.state.typingUserIDs.length>0)this.props.indicatorsDidShow();c("MercuryParticipants").getMulti(this.state.typingUserIDs,function(m){if(this.isMounted())this.state.typingUserIDs.forEach(function(n){var o=m[n],p=this.refs[n]&&this.refs[n].getBubble();if(p&&o)c("TooltipData").set(c("ReactDOM").findDOMNode(p),this.renderTooltip(o.short_name),"above","left")}.bind(this))}.bind(this))},componentWillUnmount:function l(){this._subscriptions.release()},render:function l(){if(!c("MercuryIDs").isValid(this.props.threadID))return null;var m=i.getThreadMetaNow(this.props.threadID);if(m&&!m.is_subscribed)return null;var n=c("MercuryIDs").isGroupChat(this.props.threadID);return c("React").createElement("div",{className:this.props.rootClassName},this.state.typingUserIDs.map(function(o){return this._renderTypingIndicator(o,!!n)}.bind(this)))},_renderTypingIndicator:function l(m,n){var o=this.props.indicatorClass,p=this.props.onlineUsers!==undefined&&this.props.onlineUsers.includes(c("MercuryIDs").getUserIDFromParticipantID(m));return c("React").createElement(o,{key:m,ref:m,showName:n,userID:m,isOnline:p})},renderTooltip:function l(m){var n=c("DOM").create("span");c("ReactDOM").render(c("React").createElement("span",null,h._("{name}\ub2d8\uc774 \uc785\ub825 \uc911\uc785\ub2c8\ub2e4...",[h.param("name",m)])),n);return n},typingStateChanged:function l(m){if(this.props.threadID in m)this.setState({typingUserIDs:m[this.props.threadID].slice().sort()})},messagesReceived:function l(m,n){if(this.props.threadID in n){var o=n[this.props.threadID],p=c("createObjectFrom")(o.map(function(q){return q.author}));this.setState({typingUserIDs:this.state.typingUserIDs.filter(function(q){return!p[q]}).sort()})}}});f.exports=k}),null);
__d("MessageBorderType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FLOWERS:"flowers"})}),null);
__d("MessageCustomizationType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BORDER:"border"})}),null);
__d("MessagingFlowerCornerArrangements",["invariant","ix","Random","randomShuffle"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=Object.freeze({TOP_LEFT:"topLeft",BOTTOM_RIGHT:"bottomRight"}),k=Object.freeze({PINK:"pink",PURPLE:"purple",YELLOW:"yellow"}),l=Object.freeze({ROUND:"round",POINTY:"pointy"}),m=-10;function n(r,s){this.$ElementProducer1=r;this.$ElementProducer4=s;this.$ElementProducer2=c("Random").random()<.5;this.$ElementProducer3=[];var t=[k.PINK,k.PURPLE,k.YELLOW],u=[l.ROUND,l.POINTY,c("Random").random()>=.5?l.ROUND:l.POINTY];c("randomShuffle")(t);c("randomShuffle")(u);for(var v=0;v<3;v++)this.$ElementProducer3.push(this.$ElementProducer5(t[v],u[v]))}n.prototype.$ElementProducer6=function(r){switch(r){case k.PINK:return i("86995");case k.PURPLE:return i("86997");case k.YELLOW:default:return i("86999")}};n.prototype.$ElementProducer7=function(r){switch(r){case k.PINK:return i("86996");case k.PURPLE:return i("86998");case k.YELLOW:default:return i("87000")}};n.prototype.$ElementProducer5=function(r,s){return s===l.POINTY?this.$ElementProducer6(r):this.$ElementProducer7(r)};n.prototype.$ElementProducer8=function(){return this.$ElementProducer3.pop()};n.prototype.flower=function(r){var s=c("Random").random()*360;return this.$ElementProducer9(this.$ElementProducer8(),{pivot:.5,rotationStart:s+r.rotationStartOffset,rotationEnd:s,scale:r.scale,x:r.x,y:r.y})};n.prototype.leaf=function(r){return this.$ElementProducer9(i("86994"),{pivot:1,rotationStart:0,rotationEnd:r.rotationEnd,scale:r.scale,x:r.x,y:r.y})};n.prototype.$ElementProducer9=function(r,s){__p&&__p();var t=s.pivot*100+"%",u=s.x+m,v=s.y+m,w=-s.pivot*100,x=s.scale,y=s.rotationEnd,z=void 0,A=void 0,B=void 0,C=void 0;if(this.$ElementProducer2){var D=u;u=v;v=D;y=-y}if(this.$ElementProducer1===j.BOTTOM_RIGHT){C=this.$ElementProducer4+u+"px";A=this.$ElementProducer4+v+"px";w=100+w;y+=180}else if(this.$ElementProducer1===j.TOP_LEFT){B=this.$ElementProducer4+u+"px";z=this.$ElementProducer4+v+"px"}else h(0);var E=[];if(w!==0)E.push("translate("+w+"%, "+w+"%)");E.push("scale("+x+")");if(y!==0)E.push("rotate("+y+"deg)");return{style:{bottom:A,left:B,position:"absolute",right:C,top:z,transform:E.join(" "),transformOrigin:t+" "+t},image:r}};function o(r){return[r.leaf({x:20.5,y:38,scale:.225,rotationEnd:-80}),r.leaf({x:29,y:22.5,scale:.35,rotationEnd:35}),r.flower({x:31.5,y:22,scale:.6,rotationStartOffset:-70}),r.flower({x:21,y:35,scale:.65,rotationStartOffset:-70}),r.flower({x:21.75,y:24.75,scale:1,rotationStartOffset:50})]}function p(r){return[r.leaf({x:22.25,y:35.25,scale:.225,rotationEnd:-115}),r.leaf({x:35,y:24,scale:.35,rotationEnd:110}),r.flower({x:21.5,y:32.5,scale:.68,rotationStartOffset:-60}),r.flower({x:21.5,y:23.5,scale:.67,rotationStartOffset:-70}),r.flower({x:31,y:21,scale:.95,rotationStartOffset:50})]}function q(r,s){var t=new n(r,s);return c("Random").random()<.5?o(t):p(t)}f.exports={createFlowers:q,corners:j}}),null);
__d("MessagingFlowerBorder.react",["Image.react","MessagingFlowerCornerArrangements","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MessagingFlowerBorder1=function(){return c("MessagingFlowerCornerArrangements").createFlowers(c("MessagingFlowerCornerArrangements").corners.TOP_LEFT,this.props.offset).concat(c("MessagingFlowerCornerArrangements").createFlowers(c("MessagingFlowerCornerArrangements").corners.BOTTOM_RIGHT,this.props.offset))}.bind(this),this.state={elements:this.$MessagingFlowerBorder1()},m}k.prototype.render=function(){return c("React").createElement("div",null,this.state.elements.map(function(l,m){return c("React").createElement(c("Image.react"),{key:m,style:l.style,src:l.image})}))};k.propTypes={ChildClass:j.number};k.defaultProps={offset:0};f.exports=k}),null);
__d("MessagingGiftWrap.react",["cx","MessengerEnvironment","React","emptyFunction"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={unwrapped:false},this.$MessagingGiftWrap1=function(r){r.stopPropagation();this.setState({unwrapped:true});this.props.onUnwrap&&this.props.onUnwrap()}.bind(this),n}l.prototype.render=function(){var m=c("MessengerEnvironment").messengerui;return c("React").createElement("div",{className:"_4p0m"+(this.state.unwrapped?" _4p0o":"")+(m?" _mxz":"")+(m?" _4br2":"")+(!m?" _3_om":"")+(this.props.isSticker?" _52vq":""),onClick:this.$MessagingGiftWrap1,role:"presentation"},c("React").createElement("div",{className:"_4p0r"}),c("React").createElement("div",{className:"_4p0s _4p0t"}),c("React").createElement("div",{className:"_4p0s _4p0u"}))};l.propTypes={isSticker:k.bool,onUnwrap:k.func};l.defaultProps={onUnwrap:c("emptyFunction")};f.exports=l}),null);
__d("MessageReactionMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLMutationBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1491398900900362"};j.getQueryID=function(){"use strict";return"254517288326467"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("MessengerReactionsContextualDialog.react",["cx","AccessibleLayer","ContextualLayerAutoFlipHorizontal","ContextualLayerHideOnScrollOut","ContextualLayerUpdateOnScroll","LayerHideOnEscape","ReactAbstractContextualDialog","ReactLayer"],(function a(b,c,d,e,f,g,h){"use strict";var i=c("ReactLayer").createClass(c("ReactAbstractContextualDialog").createSpec({addedBehaviors:[c("ContextualLayerAutoFlipHorizontal"),c("ContextualLayerHideOnScrollOut"),c("ContextualLayerUpdateOnScroll"),c("LayerHideOnEscape"),c("AccessibleLayer")],displayName:"MessengerReactionsContextualDialog",shouldSetARIAProperties:false,theme:{wrapperClassName:"_4owc"}}));f.exports=i}),null);
__d("MessengerReactionsUtil",["EmojiFormat"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=[[128525],[128518],[128558],[128546],[128544],[128077],[128078]],i={};h.forEach(function(j,k){i[c("EmojiFormat").codeArrayToUnicode(j)]=k+1});f.exports={sortFunction:function j(k,l){if(!i[k]&&!i[l])return 0;else if(!i[k])return 1;else if(!i[l])return-1;return i[k]-i[l]},defaultReactions:h.map(c("EmojiFormat").codeArrayToUnicode)}}),null);
__d("getThreadTypeNameFromThreadType",["MessagingThreadType"],(function a(b,c,d,e,f,g){"use strict";function h(i){for(var j in c("MessagingThreadType"))if(c("MessagingThreadType")[j]===i)return j;return""}f.exports=h}),null);
__d("MessengerReactionsMenu.react",["cx","Promise","Bootloader","CurrentUser","CSS","DOMContainer.react","MercuryIDs","MercuryMessages","MercuryThreads","MessengerMessageActionsTypedLogger","MessengerReactionsContextualDialog.react","MessengerSupportedEmojiUtils","MessengerTextWithEmoticons.react","MessengerReactionsWebConfig","MessengerReactionsUtil","MessageReactionMutationWebGraphQLMutation","React","XAsyncRequest","createCancelableFunction","getThreadTypeNameFromThreadType","gkx","idx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={animations:{},reactions:c("MessengerReactionsUtil").defaultReactions.slice()},this.$MessengerReactionsMenu5=function(q){!q&&this.props.onHide()}.bind(this),m}k.prototype.componentDidMount=function(){if(c("gkx")("AT7dFvDvstgBLQPTzIVQ-K_BRNJQyn38FQ8LsrhoWHNPhYTHpIiylBssyGU3E_0HnxERJO-whPUbuICbRNRkf3gv")){this.$MessengerReactionsMenu1=c("createCancelableFunction")(function(l){return this.setState({animations:l})}.bind(this));this.loadAnimations().done(this.$MessengerReactionsMenu1)}this.$MessengerReactionsMenu2()};k.prototype.componentWillReceiveProps=function(l){this.$MessengerReactionsMenu2()};k.prototype.componentWillUnmount=function(){this.$MessengerReactionsMenu1&&this.$MessengerReactionsMenu1.cancel()};k.prototype.$MessengerReactionsMenu2=function(){if(this.props.useChatEmojiReact){var l,m=c("MessengerReactionsUtil").defaultReactions.slice(),n=c("MercuryThreads").get().getThreadMetaNow(this.props.message.thread_id),o=(l=n)!=null?(l=l.custom_like_icon)!=null?l.emoji:l:l;if(o!=null&&!m.includes(o))m.push(o);this.setState({reactions:m})}};k.prototype.$MessengerReactionsMenu3=function(){return new(c("Promise"))(function(l){return c("Bootloader").loadModules(["Keyframes"],function(m){return l(m)},"MessengerReactionsMenu.react")})};k.prototype.$MessengerReactionsMenu4=function(){return this.$MessengerReactionsMenu3().then(function(l){return c("Promise").all(["love","haha","wow","sad","angry","thumbsup","thumbsdown"].map(function(m){return l.requestRenderer(c("MessengerReactionsWebConfig").paths[m],{projectName:"messaging_reactions",assetName:m})}))}).then(function(l){return l.map(function(m){var n=m.setWidth(45).setHeight(45).repeatForever().play().redrawIfNeeded().getElement();c("CSS").addClass(n,"_37pj");return n}).reduce(function(m,n,o){m[c("MessengerReactionsUtil").defaultReactions[o]]=n;return m},{})})};k.prototype.loadAnimations=function(){var l=Date.now(),m=this.$MessengerReactionsMenu4();m.done(function(n){c("Bootloader").loadModules(["MessengerRestReactionTypedLogger"],function(o){new o().setLoadedTime(Date.now()-l).log()},"MessengerReactionsMenu.react")});return m};k.prototype.render=function(){var l=c("CurrentUser").getID(),m=this.props.message.reactions&&this.props.message.reactions[l];return c("React").createElement(c("MessengerReactionsContextualDialog.react"),{alignment:"center",contextRef:this.props.refProp,shown:true,onBlur:this.props.onHide,onToggle:this.$MessengerReactionsMenu5},c("React").createElement("div",{role:"listbox","aria-orientation":"horizontal",className:"_1z8q _fy2"},this.state.reactions.map(function(n){return c("React").createElement("span",{className:"_1z8r"+(n===m?" _5-2b":""),id:n,key:n,onClick:function(){return this.$MessengerReactionsMenu6(n)}.bind(this),role:"option","aria-selected":n===m,tabIndex:"0"},!this.state.animations[n]?c("React").createElement(c("MessengerTextWithEmoticons.react"),{customSize:true,renderEmoticons:true,renderEmoji:true,text:n}):c("React").createElement(c("DOMContainer.react"),null,this.state.animations[n]))}.bind(this))))};k.prototype.$MessengerReactionsMenu7=function(l){if(!c("MessengerReactionsUtil").defaultReactions.includes(l))return c("MessengerSupportedEmojiUtils").getSupportedEmojiKey(l);return l};k.prototype.$MessengerReactionsMenu6=function(l){var m=this.props,n=m.message,o=m.entryPoint,p=c("CurrentUser").getID(),q=n.reactions&&n.reactions[p],r=c("MercuryMessages").get().getServerMessageID(n.message_id),s=c("MessageReactionMutationWebGraphQLMutation").getURI({action:l===q?"REMOVE_REACTION":"ADD_REACTION",message_id:r,actor_id:p,reaction:l}),t=function(u){var v=n.other_user_fbid||n.thread_fbid,w=c("MercuryThreads").get().getThreadMetaNow(n.thread_id),x=w&&w.participants?w.participants.length:0,y=c("getThreadTypeNameFromThreadType")(w&&w.thread_type),z=n.attachments[0],A=new(c("MessengerMessageActionsTypedLogger"))().setAction("reaction").setOfflineThreadid(n.offline_threading_id).setMid(r).setRecipientID(c("MercuryIDs").getUserIDFromParticipantID(n.author)).setEntryPoint(o).setReaction(this.$MessengerReactionsMenu7(l)).setPreviousReaction(this.$MessengerReactionsMenu7(q)).setGroupSize(x).setThreadType(y).setThreadid(v);if(u.errorSummary)A=A.setErrorText(u.errorSummary.toString());if(z)A=A.setMessageType(z.attach_type);A.log()}.bind(this);new(c("XAsyncRequest"))(s).setMethod("POST").setHandler(t).send();this.props.onHide()};f.exports=k}),null);
__d("MessengerReactionsPrompt.react",["cx","ix","Image.react","MessengerReactionsMenu.react","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={open:false},this.$MessengerReactionsPrompt1=function(){this.setState({open:true},function(){return this.props.onShowMenu&&this.props.onShowMenu(this.state.open)}.bind(this))}.bind(this),this.$MessengerReactionsPrompt2=function(){this.setState({open:false},function(){return this.props.onShowMenu&&this.props.onShowMenu(this.state.open)}.bind(this))}.bind(this),n}l.prototype.render=function(){if(!this.props.messageIsSelected&&!this.state.open)return null;return c("React").createElement("span",{className:(!this.props.isQuickAdd?"_5zvq":"")+(this.props.isQuickAdd?" _yav":""),onClick:this.state.open?null:this.$MessengerReactionsPrompt1,ref:"button"},c("React").createElement(c("Image.react"),{src:this.props.isQuickAdd?i("278123"):this.state.open?i("277597"):i("277596")}),this.renderMenu())};l.prototype.renderMenu=function(){if(!this.state.open)return null;return c("React").createElement(c("MessengerReactionsMenu.react"),{entryPoint:"awareness_plus",message:this.props.message,onHide:this.$MessengerReactionsPrompt2,refProp:function(){return this.refs.button}.bind(this),useChatEmojiReact:this.props.useChatEmojiReact})};f.exports=l}),null);
__d("MessengerReactions.react",["cx","fbt","Bootloader","CurrentUser","MercuryIDs","MercuryParticipants","MessengerEnvironment","MessengerReactionsUtil","MessengerReactionsPrompt.react","MessengerTextWithEmoticons.react","MessengerWebViewReactionsTypedLogger","MercuryConfig","TooltipData","React","ShimButton.react","gkx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m="ALL",n=c("CurrentUser").getID(),o=3,p=9;j=babelHelpers.inherits(q,c("React").Component);k=j&&j.prototype;function q(){__p&&__p();var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=k.constructor).call.apply(r,[this].concat(u)),this.$MessengerReactions2=function(){var w=c("MessengerEnvironment").messengerui,x=this.props,y=x.isFromViewer,z=x.message,A=x.participants,B=z.reactions;new(c("MessengerWebViewReactionsTypedLogger"))().setEvent("open_details").setMid(z.message_id).setSenderID(z.author).setEmojiGroup(m).setEmojiGroupCount(Object.values(B).length).log();if(w)c("Bootloader").loadModules(["MessengerDialogs.bs","MessengerReactionsDialogReact.bs"],function(C,D){var E=D.jsComponent;C.showDialog(function(){return c("React").createElement(E,{isFromViewer:y,participants:A,message:z})})},"MessengerReactions.react");else c("Bootloader").loadModules(["ChatReactionsDialog"],function(C){C.show(z,A,y)},"MessengerReactions.react")}.bind(this),s}q.prototype.render=function(){__p&&__p();var r=this.props,s=r.message,t=r.participants,u=r.renderQuickAdd,v=r.hovered,w=s.reactions,x=s.attachments;if(!v&&c("MercuryConfig").MessengerForwardButtonForSharedLinksQE&&x&&x.length===1&&x[0].attach_type==="share"&&w&&Object.keys(w).length===0)return null;if((!w||!t)&&!u)return null;var y={},z=0,A=false;Object.entries(w||{}).forEach(function(F){var G=F[0],H=F[1];if(typeof H==="string"){if(G===n)A=true;if(!y[H])y[H]=0;y[H]++;z++}});var B=Object.keys(y).sort(c("MessengerReactionsUtil").sortFunction).slice(0,o).map(function(F,G,w){return c("React").createElement("span",{className:"_4kf5",style:{zIndex:w.length-G,marginLeft:G===0?0:"-4px"},key:F},c("React").createElement(c("MessengerTextWithEmoticons.react"),{customSize:true,renderEmoticons:true,renderEmoji:true,text:F}))}),C=z>0?c("React").createElement("span",{className:"_4kf5 _4kf6"+(A?" _fy2":"")},z):null,D=u&&!A?c("React").createElement("div",{className:"_aou _aov"},c("React").createElement("span",{className:"_aow"},c("React").createElement(c("MessengerReactionsPrompt.react"),{message:s,messageIsSelected:true,isQuickAdd:true,useChatEmojiReact:c("gkx")("AT6A1OO2lJlnHHdkzHOPkllgq2YBSZ42wJAnMnfeaJEnCNUkgcLE__VIZKrcnnkybvVMYEfu3rwvCBYOLMeSgn0B")}))):null,E=c("TooltipData").propsFor(this.$MessengerReactions1());return c("React").createElement("div",babelHelpers["extends"]({},E,{className:"_4kf7 preview"}),c("React").createElement(c("ShimButton.react"),{className:"_aou",onClick:this.$MessengerReactions2},B,C),D)};q.prototype.$MessengerReactions1=function(){__p&&__p();var r=this.props.message.reactions,s=this.props.participants;if(!r||!s)return"";var t=Object.keys(r),u=t.reduce(function(u,y){if(u.length>=p)return u;var z=c("MercuryIDs").getParticipantIDFromUserID(y),A=s.get(z)||c("MercuryParticipants").getNow(z),B=A&&A.name;if(B)u.push(B);return u},[]),v=u.length,w=u.join("\n");if(t.length>v){var x=i._("\uc678 {count}\uba85",[i.param("count",t.length-v)]);w+="\n"+x.toString()}return w};q.propTypes={isFromViewer:l.bool.isRequired,message:l.object.isRequired,participants:l.object,renderQuickAdd:l.bool,hovered:l.bool};f.exports=q}),null);
__d("MessengerDecorator",["cssVar","cx","BootloadedComponent.react","CurrentUser","JSResource","MercuryAttachment","MercuryConfig","MercuryMessageActions","MercuryMessageCustomizations","MercuryTagHelper","MessageBorderType","MessageCustomizationType","MessagingFlowerBorder.react","MessagingGiftWrap.react","MessagingGiftWrapConstants","MessengerEnvironment","MessengerReactions.react","React","gkx","idx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=function j(u){var v=u.attachments&&u.attachments.length===1&&u.attachments[0];return!!v},k=function k(u){return j(u)&&c("MercuryAttachment").isLightweightActionAttachment(u.attachments[0])},l=function l(u){var v=u.attachments&&u.attachments.length===1&&u.attachments[0];if(!v)return false;if(c("MercuryAttachment").isPhotoGroupAttachment(v))return true;if(c("MercuryAttachment").isFileAttachment(v))if(c("MercuryConfig").MessengerForwardButtonForSharedFilesGK&&v.message_file_fbid)return true;return false},m=function m(u){var v;if(c("MessengerEnvironment").messengerui)return false;var w=(v=u.reactions)!=null?v[c("CurrentUser").getID()]:v;return!!w&&typeof w==="string"},n=function n(u){__p&&__p();var v=[],w=[];u.attachments.forEach(function(x){if(x.metadata&&x.metadata.fbid){v.push(x.metadata.fbid.toString());w.push(x.attach_type.toString())}if(c("MercuryAttachment").isFileAttachment(x)&&x.message_file_fbid)if(c("MercuryConfig").MessengerForwardButtonForSharedFilesGK){v.push(x.message_file_fbid);w.push(x.attach_type)}});return{ids:v,types:w}},o=[{name:"GiftWrap",check:function u(v){var w=function w(y){return c("MercuryTagHelper").get(y,c("MessagingGiftWrapConstants").TAG_PREFIX)===c("MessagingGiftWrapConstants").VALENTINES_GIFT},x=function x(y){return!!c("MercuryTagHelper").get(y,c("MessagingGiftWrapConstants").UNWRAPPED_TAG)};return!!(v.tags&&w(v.tags)&&!x(v.tags))},render:function u(v,w){return c("React").createElement(c("MessagingGiftWrap.react"),{key:"giftwrap",onUnwrap:function x(){var y="2500ms",z=parseInt(y.substring(0,y.length-2),10);setTimeout(function(){return c("MercuryMessageActions").get().unwrap(v)},z)}})},getAdditionalClassNames:function u(){return null}},{name:"FlowerBorder",check:function u(v){return c("gkx")("AT7rTubr3N_DsfglfGkvVFG3tMrhGme9-eELltAXoSOKkQuD-9JepjOeFPMl1e8XndLLgVmcw1EaaNThD3K6r4QJpohV9bITGr6_ur1k_X_RGQ")&&c("MercuryMessageCustomizations").getCustomizationValue(v,c("MessageCustomizationType").BORDER)===c("MessageBorderType").FLOWERS},render:function u(v,w){if(c("MessengerEnvironment").messengerui)return c("React").createElement(c("MessagingFlowerBorder.react"),{offset:-10,key:"giftwrap:"+v.message_id});return c("React").createElement(c("MessagingFlowerBorder.react"),{key:"giftwrap:"+v.message_id})},getAdditionalClassNames:function u(){if(!c("MessengerEnvironment").messengerui)return"_337n";return null}},{name:"Reactions",check:function u(v,w){var x=!!(v.reactions&&Object.keys(v.reactions).length>0),y=!!(!w&&(l(v)||j(v)&&c("MercuryConfig").MessengerForwardButtonForSharedLinksQE));return(x||y)&&!k(v)},render:function u(v,w,x,y){var z=l(v)||j(v)&&c("MercuryConfig").MessengerForwardButtonForSharedLinksQE;return c("React").createElement(c("MessengerReactions.react"),{isFromViewer:w,key:v.message_id+"-reactions",message:v,renderQuickAdd:z&&!w,hovered:y,participants:x&&x.participants})},getAdditionalClassNames:function u(){return"_5z-5"}}],p=[],q=[],r=[{name:"MontageReply",check:function u(v){if(!c("MercuryConfig").MontageThreadViewer)return false;var w=v.montage_reply_data&&v.montage_reply_data.message_id;return!!w},render:function u(v,w){var x=v.montage_reply_data&&v.montage_reply_data.message_id,y=v.montage_reply_data&&v.montage_reply_data.reply_action;return c("React").createElement(c("BootloadedComponent.react"),{key:"montagereply:"+v.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MontageReplyDecoratorContainer.react").__setRef("MessengerDecorator"),isFromViewer:w,messageID:x,replyAction:y,replyAuthorID:v.author,threadID:v.thread_id})},getAdditionalClassNames:function u(){return null}}],s=[{name:"ForwardImages",check:function u(v){return l(v)},render:function u(v,w){var x=n(v),y=x.ids,z=x.types;return c("React").createElement(c("BootloadedComponent.react"),{key:"forwardimages:"+v.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("MessengerEnvironment").messengerui?c("JSResource")("MessengerPhotoForwardButton.react").__setRef("MessengerDecorator"):c("JSResource")("ChatPhotoForwardButton.react").__setRef("MessengerDecorator"),attachmentIDs:y,attachmentTypes:z,isFromViewer:w})},getAdditionalClassNames:function u(){return"_ylc"}},{name:"ReactionPrompt",check:function u(v){return m(v)||!l(v)&&!k(v)},render:function u(v,w,x){return c("React").createElement(c("BootloadedComponent.react"),{key:"reactionprompt:"+v.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MessengerReactionsPrompt.react").__setRef("MessengerDecorator"),message:v,messageIsSelected:x&&x.messageIsSelected&&(!c("MercuryConfig").MessengerForwardButtonForSharedLinksQE||c("MercuryConfig").MessengerForwardButtonForSharedLinksQE&&!j(v)),useChatEmojiReact:c("gkx")("AT6A1OO2lJlnHHdkzHOPkllgq2YBSZ42wJAnMnfeaJEnCNUkgcLE__VIZKrcnnkybvVMYEfu3rwvCBYOLMeSgn0B"),onShowMenu:x&&x.onShowMenu})},getAdditionalClassNames:function u(){return null}},{name:"MessageActions",check:function u(v){return c("MessengerEnvironment").messengerui},render:function u(v,w,x){var y=(l(v)||j(v)&&c("MercuryConfig").MessengerForwardButtonForSharedLinksQE)&&!k(v);return c("React").createElement(c("BootloadedComponent.react"),{key:"messageactions:"+v.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MessengerMessageActions.react").__setRef("MessengerDecorator"),message:v,isActive:x&&x.messageIsSelected,onShowMenu:x&&x.onShowMenu,includeReactions:y,isShowingOriginal:x&&x.isShowingOriginal,hasFormatting:x&&x.hasFormatting,onToggleOriginal:x&&x.handleToggleOriginal})},getAdditionalClassNames:function u(){return null}}],t={getBeforeDecorators:function u(){return r},getAfterDecorators:function u(){return o},getInnerDecorators:function u(){return s},getAfterExternalDecorators:function u(){return p},getInsideDecorators:function u(){return q}};f.exports=t}),null);
__d("MessengerHotLikePreviewEvents",["mixInEventEmitter"],(function a(b,c,d,e,f,g){"use strict";var h={START:"start",STOP:"stop",STOP_EMOJI:"stop_emoji",POP:"pop",REMOVE:"remove",FINISH_ANIMATION:"finish_animation",FINISH_EMOJI_ANIMATION:"finish_emoji_animation"};c("mixInEventEmitter")(h,{start:true,stop:true,stop_emoji:true,pop:true,remove:"remove",finish_animation:"finish_animation",finish_emoji_animation:"finish_emoji_animation"});f.exports=h}),null);
__d("MessengerHotLikeUtils",["EmojiLikeConstants","StickerAssetType","StickerConstants","XStickerAssetController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={SizeTimes:{small:1e3,medium:2e3,large:3e3},getStickerIDForTime:function i(j){var k=c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID;switch(true){case j<this.SizeTimes.small:k=c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID;break;case j<this.SizeTimes.medium:k=c("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID;break;case j<this.SizeTimes.large:k=c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID;break}return k},getEmojiSizeForTime:function i(j){var k=c("EmojiLikeConstants").size.SMALL;if(j<this.SizeTimes.small)k=c("EmojiLikeConstants").size.SMALL;else if(j<this.SizeTimes.medium)k=c("EmojiLikeConstants").size.MEDIUM;else if(j<this.SizeTimes.large)k=c("EmojiLikeConstants").size.LARGE;return k},getMetadataForHotLike:function i(j){__p&&__p();var k=void 0;switch(j){case c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID:k=120;break;case c("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID:k=84;break;case c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID:k=35;break;case c("EmojiLikeConstants").size.LARGE:k=64;break;case c("EmojiLikeConstants").size.MEDIUM:k=64;break;case c("EmojiLikeConstants").size.SMALL:k=32;break}return k?{height:k,width:k}:undefined},getPreviewURI:function i(){return c("XStickerAssetController").getURIBuilder().setInt("sticker_id",c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID).setEnum("image_type",c("StickerAssetType").IMAGE).getURI().toString()},getURIWithID:function i(j){return c("XStickerAssetController").getURIBuilder().setInt("sticker_id",j).setEnum("image_type",c("StickerAssetType").IMAGE).getURI().toString()},getCustomEmojiFromThread:function i(j){return j&&j.custom_like_icon}};f.exports=h}),null);
__d("MessengerInnerDecorators.react",["cx","Locale","MessengerDecorator","React","gkx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={shown:false},this.$MessengerInnerDecorators1=function(q){this.setState({shown:q})}.bind(this),m}k.prototype.render=function(){var l=c("MessengerDecorator").getInnerDecorators().map(function(m){if(m.check(this.props.message))return m.render(this.props.message,this.props.isFromViewer,babelHelpers["extends"]({},this.props.messageProps,{messageIsSelected:this.props.hovered||this.state.shown,onShowMenu:this.$MessengerInnerDecorators1}));return null}.bind(this)).filter(Boolean);return c("React").createElement("span",{className:"_40fu"+(c("gkx")("AT70rONwKRIflAfK7-b4vyJ1_mxpZCDSr6xln8L8WEV8pNQI_XsW4Dd8Eel-gRLLo1OcnJGbyGR6AUa0wFCxwPsr")&&c("Locale").isRTL()?" _64wc":"")},c("React").createElement("span",{className:"_2u_d"},l))};f.exports=k}),null);
__d("MessengerQuickCamOrigins",[],(function a(b,c,d,e,f,g){"use strict";var h={CHAT_TAB:"chat tab",MESSENGER:"messenger",getValues:function i(){return[h.CHAT_TAB,h.MESSENGER]}};f.exports=h}),null);
__d("MercuryTriodeSourceUtil",["MessengerEnvironment","MercurySourceType"],(function a(b,c,d,e,f,g){"use strict";var h={getMercuryTriodeSource:function i(){return c("MessengerEnvironment").messengerdotcom?c("MercurySourceType").MESSENGER_WEB:c("MercurySourceType").TITAN_WEB}};f.exports=h}),null);
__d("MessengerHotLikeOutlineSVG.react",["cssVar","fbt","CurrentUser","React","MercuryShareAttachmentRenderLocations","uniqueID","UserAgent"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m="transparent",n=i._("\uc88b\uc544\uc694 \ud45c\uc2dc");j=babelHelpers.inherits(o,c("React").Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={titleId:c("uniqueID")()},q}o.prototype.render=function(){var p=this.props.color||(c("CurrentUser").isWorkUser()?"#1479fb":"#0084ff"),q=c("UserAgent").isBrowser("Safari")?"0 0 40.16 42.24":"-1 -1 40.16 42.24",r={height:this.props.height||"85%"};if(this.props.location!==c("MercuryShareAttachmentRenderLocations").CHAT&&this.props.location!==c("MercuryShareAttachmentRenderLocations").PAGES_INBOX)r.width="66%";return c("React").createElement("svg",{"aria-labelledby":this.state.titleId,version:"1.1",viewBox:q,preserveAspectRatio:"xMinYMax meet",style:r},c("React").createElement("title",{id:this.state.titleId},n),c("React").createElement("path",{d:"M935.36,1582.44a0,0,0,0,0,0,.06,3.59,3.59,0,0,1-.72,6.53,0,0,0,0,0,0,0,3.56,3.56,0,0,1,.71,2.13,3.6,3.6,0,0,1-3,3.54, 0,0,0,0,0,0,.05,3.56,3.56,0,0,1,.38,1.61,3.61,3.61,0,0,1-3.42,3.6H910v-19.6l5.27-7.9a4,4,0,0,0,.66-2.31l-0.1-4c-0.22-2.4-.09-2.06, 1.13-2.37,2-.51,7.16,1.59,5.13,12.17h11.06A3.59,3.59,0,0,1,935.36,1582.44ZM899,1581h7v22h-7v-22Z",transform:"translate(-898.5 -1563.26)",fill:m,fillRule:"evenodd",stroke:p,strokeLinecap:"round",strokeWidth:"5%"}))};o.propTypes={color:l.string,height:l.string,location:l.string};f.exports=o}),null);
__d("MessengerHotLikeButton.react",["cx","fbt","EmojiLikeConstants","Image.react","ImmutableObject","Keys","KeyStatus","Link.react","MercuryMessageObject","MercuryTriodeSourceUtil","MessengerEnvironment","MessengerHotLikePreviewEvents","MessengerHotLikeOutlineSVG.react","MessengerHotLikeUtils","MessengerSupportedEmojiUtils","React","StickerConstants","clearTimeout","ifRequired","joinClasses","setIntervalAcrossTransitions","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MercuryMessageObject").get(),m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MessengerHotLikeButton1=null,this.$MessengerHotLikeButton2=null,this.$MessengerHotLikeButton3=null,this.$MessengerHotLikeButton4=null,this.$MessengerHotLikeButton6=function(t){__p&&__p();if(this.props.disabled||this.$MessengerHotLikeButton3){t.preventDefault();t.stopPropagation()}if(this.props.disabled||t.button!==0)return;this.props.onMouseDown&&this.props.onMouseDown();this.$MessengerHotLikeButton3=Date.now();this.$MessengerHotLikeButton9();this.$MessengerHotLikeButton10()}.bind(this),this.$MessengerHotLikeButton8=function(){if(!(this.props.threadID&&this.$MessengerHotLikeButton3))return;this.$MessengerHotLikeButton3=0;this.$MessengerHotLikeButton11();this.$MessengerHotLikeButton12()}.bind(this),this.$MessengerHotLikeButton14=function(){if(!this.props.threadID)return;c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").POP,this.props.threadID)}.bind(this),this.$MessengerHotLikeButton7=function(){if(this.$MessengerHotLikeButton3){this.$MessengerHotLikeButton3=0;this.$MessengerHotLikeButton11();this.$MessengerHotLikeButton14()}}.bind(this),this.$MessengerHotLikeButton5=function(t){t.stopPropagation();if(this.props.disabled)return;if(c("KeyStatus").getKeyDownCode()===c("Keys").RETURN||!this.props.threadID){var u=this.props.sendCustomLike;if(this.props.customLike&&u)u(this.props.customLike,c("MessengerHotLikeUtils").getEmojiSizeForTime(1));else this.props.sendSticker(c("MessengerHotLikeUtils").getStickerIDForTime(1))}}.bind(this),p}n.prototype.componentDidMount=function(){this.$MessengerHotLikeButton4=c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").FINISH_ANIMATION,function(o,p,q){if(o===this.props.threadID)if(q&&this.props.customLike&&this.props.sendCustomLike)this.props.sendCustomLike(this.props.customLike,q,c("EmojiLikeConstants").source.HOT_LIKE);else this.props.sendSticker(p)}.bind(this))};n.prototype.componentWillUnmount=function(){this.$MessengerHotLikeButton4&&this.$MessengerHotLikeButton4.remove()};n.prototype.render=function(){__p&&__p();var o=null,p={};if(this.props.customLike&&this.props.customLike.emoji){var q=this.props.customLike.emoji,r=c("MessengerSupportedEmojiUtils").getNewEmojiData(q,c("EmojiLikeConstants").size.SMALL),s=this.props.renderSize?this.props.renderSize:16;p.background="none";o=c("React").createElement(c("Image.react"),{src:r&&r.url,style:{padding:s==16?0:3,display:"block",height:s,width:s}})}else if(this.props.CustomRenderer){var t=this.props.CustomRenderer;o=c("React").createElement(t,{color:this.props.customColor,location:this.props.location,renderSize:this.props.renderSize})}else if(this.props.customColor)o=c("React").createElement(c("MessengerHotLikeOutlineSVG.react"),{color:this.props.customColor,location:this.props.location});var u=i._("\uc88b\uc544\uc694 \ubcf4\ub0b4\uae30");return c("React").createElement(c("Link.react"),{"aria-label":u,className:c("joinClasses")(this.props.customColor||this.props.CustomRenderer?"_5j_u":"",this.props.className),disabled:this.props.disabled,href:"#",onClick:this.$MessengerHotLikeButton5,onDragStart:function v(w){return w.preventDefault()},onMouseDown:this.$MessengerHotLikeButton6,onMouseLeave:this.$MessengerHotLikeButton7,onMouseUp:this.$MessengerHotLikeButton8,role:"button",style:p,title:u},o)};n.prototype.$MessengerHotLikeButton9=function(){if(!this.props.threadID)return;c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").START,this.$MessengerHotLikeButton13(),this.props.threadID)};n.prototype.$MessengerHotLikeButton12=function(){__p&&__p();if(!this.props.threadID)return;if(!c("MessengerEnvironment").messengerui)c("ifRequired")("MessengerHotLikePreview.react",function(){c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").STOP,this.props.threadID)}.bind(this),function(){if(this.$MessengerHotLikeButton1!==null)return;this.$MessengerHotLikeButton1=c("setIntervalAcrossTransitions")(function(){c("ifRequired")("MessengerHotLikePreview.react",function(){if(this.$MessengerHotLikeButton1!==null){clearInterval(this.$MessengerHotLikeButton1);this.$MessengerHotLikeButton1=null}c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").STOP,this.props.threadID)}.bind(this))}.bind(this),100)}.bind(this));else c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").STOP,this.props.threadID)};n.prototype.$MessengerHotLikeButton13=function(){__p&&__p();var o=this.props.threadID;if(!o)return null;var p=l.constructStickerMessageObject(c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID,c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),o);l.normalizeNewMessage(p);p.is_like_preview=true;p.like_preview_since=this.$MessengerHotLikeButton3;p.customLike=this.props.customLike&&this.props.customLike.emoji?this.props.customLike:null;p.body="";return new(c("ImmutableObject"))(p)};n.prototype.$MessengerHotLikeButton10=function(){this.$MessengerHotLikeButton11();this.$MessengerHotLikeButton2=c("setTimeoutAcrossTransitions")(this.$MessengerHotLikeButton14,c("MessengerHotLikeUtils").SizeTimes.large)};n.prototype.$MessengerHotLikeButton11=function(){c("clearTimeout")(this.$MessengerHotLikeButton2)};n.propTypes={CustomRenderer:m.func,onMouseDown:m.func,customLike:m.object,customColor:m.string,location:m.string,sendSticker:m.func.isRequired,sendCustomLike:m.func,threadID:m.string,disabled:m.bool,renderSize:m.number};f.exports=n}),null);
__d("MessengerVideoAutoplayActions",["MessengerFluxReduceDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h="messenger_video",i=c("keyMirror")({DESTROY:null,DSTROY_ALL:null,SCROLL:null,UPDATE:null}),j={Types:i,Namespace:h,onScroll:function k(l,m,n,o){c("MessengerFluxReduceDispatcher").dispatch({type:i.SCROLL,namespace:h,threadID:l,messageIDs:m,messageRectMap:n,viewportRect:o})},updateStore:function k(l,m){c("MessengerFluxReduceDispatcher").dispatch({type:i.UPDATE,namespace:h,threadID:l,messageIDs:m})},deleteThread:function k(l){c("MessengerFluxReduceDispatcher").dispatch({type:i.DESTROY,namespace:h,threadID:l})},deleteAllThreads:function k(){c("MessengerFluxReduceDispatcher").dispatch({type:i.DESTROY_ALL,namespace:h})}};f.exports=j}),null);
__d("MessengerVideoAutoplayStore",["FluxReduceStore","immutable","MessengerVideoAutoplayActions","MessengerFluxReduceDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l=c("MessengerVideoAutoplayActions").Types;h=babelHelpers.inherits(m,c("immutable").Record({currentVideoMessageID:null,lastVideoMessageID:null,messageIDs:null,videoVisibilityMap:null}));i=h&&h.prototype;function m(){h.apply(this,arguments)}j=babelHelpers.inherits(n,c("FluxReduceStore"));k=j&&j.prototype;n.prototype.getInitialState=function(){return c("immutable").Map()};n.prototype.reduce=function(o,p){__p&&__p();if(p.namespace!==c("MessengerVideoAutoplayActions").Namespace)return o;switch(p.type){case l.SCROLL:if(p.messageIDs)o=this.$MessengerVideoAutoplayStore1(o,p.threadID,p.messageIDs);return this.$MessengerVideoAutoplayStore2(o,p.threadID,p.messageRectMap,p.viewportRect);case l.UPDATE:return this.$MessengerVideoAutoplayStore1(o,p.threadID,p.messageIDs);case l.DESTROY:return this.$MessengerVideoAutoplayStore3(o,p.threadID);case l.DESTROY_ALL:return o.clear()}return o};n.prototype.$MessengerVideoAutoplayStore1=function(o,p,q){if(!q)return o["delete"](p);return o.set(p,new m({currentVideoMessageID:null,lastVideoMessageID:q.first(),messageIDs:q,videoVisibilityMap:null}))};n.prototype.$MessengerVideoAutoplayStore3=function(o,p){return o["delete"](p)};n.prototype.$MessengerVideoAutoplayStore4=function(o,p,q,r,s){var t=null,u=q.map(function(v){if(t)return[v,false];else{var w=this.$MessengerVideoAutoplayStore5(v,r,s);if(w)t=v;return[v,w]}}.bind(this)).fromEntrySeq().toOrderedMap();return o.mergeIn([p],{currentVideoMessageID:t,videoVisibilityMap:u})};n.prototype.$MessengerVideoAutoplayStore2=function(o,p,q,r){__p&&__p();var s=o.getIn([p,"messageIDs"]);if(!s||!q||!r)return o;if(!o.getIn([p,"currentVideoMessageID"]))return this.$MessengerVideoAutoplayStore4(o,p,s,q,r);else{var t=o.getIn([p,"videoVisibilityMap"]),u=o.getIn([p,"lastVideoMessageID"]),v=o.getIn([p,"currentVideoMessageID"]);if(this.$MessengerVideoAutoplayStore5(u,q,r)){if(t&&t.first())return o}else if(this.$MessengerVideoAutoplayStore5(v,q,r))return o;o=o.setIn([p,"currentVideoMessageID"],null);return this.$MessengerVideoAutoplayStore4(o,p,s,q,r)}};n.prototype.$MessengerVideoAutoplayStore6=function(o,p){if(!o)return false;return o.top>p.top&&o.bottom<p.bottom};n.prototype.$MessengerVideoAutoplayStore5=function(o,p,q){var r=p.get(o);return this.$MessengerVideoAutoplayStore6(r,q)};n.prototype.getVideoVisibilityMap=function(o){return this.getState().getIn([o,"videoVisibilityMap"])};n.prototype.getMessageIDs=function(o){return this.getState().getIn([o,"messageIDs"])};n.prototype.isVisible=function(o,p){return!!this.getState().getIn([o,"videoVisibilityMap",p])};function n(){j.apply(this,arguments)}f.exports=new n(c("MessengerFluxReduceDispatcher"))}),null);
__d("MNPlatformAttributionTags",[],(function a(b,c,d,e,f,g){f.exports={ATTRIBUTION_TAGS_PREFIX:"bnp:trigger:",CUSTOMER_CHAT_PLUGIN:"customer_chat_plugin",MESSENGER_WEB:"messenger_web",MESSENGER_WEB_SEARCH:"messenger_web_search",M_DOT_ME:"m_dot_me"}}),null);
__d("MessengerStore",["MessengerDispatcher","mixInEventEmitter"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.$MessengerStore1=c("MessengerDispatcher").register(this.__onDispatch.bind(this))}h.prototype.getDispatchToken=function(){return this.$MessengerStore1};h.prototype.emitChange=function(){this.emit("change")};h.prototype.destroy=function(){c("MessengerDispatcher").unregister(this.$MessengerStore1)};c("mixInEventEmitter")(h,{change:true});f.exports=h}),null);
__d("MessengerAttributionTagsStore",["MessengerActions","MessengerStore"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("MessengerStore"));i=h&&h.prototype;function j(){"use strict";i.constructor.call(this);this.$MessengerAttributionTagsStore1={messagingTags:null,threadID:null}}j.prototype.getState=function(){"use strict";return this.$MessengerAttributionTagsStore1};j.prototype.__onDispatch=function(k){"use strict";__p&&__p();switch(k.type){case c("MessengerActions").Types.UPDATE_THREAD_TAG:this.$MessengerAttributionTagsStore1.messagingTags=k.messagingTags;this.$MessengerAttributionTagsStore1.threadID=k.threadID;this.emitChange();break;case c("MessengerActions").Types.SELECT_THREAD:this.$MessengerAttributionTagsStore1.messagingTags=null;this.$MessengerAttributionTagsStore1.threadID=null;this.emitChange();break}};f.exports=new j()}),null);
__d("MNPlatformTagsDataManager",["MessagingSourceEnum","MessengerActions","MessengerAttributionTagsStore","MNPlatformAttributionTags"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports={getTags:function h(){__p&&__p();var i=arguments.length<=0||arguments[0]===undefined?null:arguments[0],j=null;switch(i){case c("MessagingSourceEnum").PAGES_MESSAGE_SHORTLINK:j=c("MNPlatformAttributionTags").M_DOT_ME;break;case c("MessagingSourceEnum").MESSENGER_WEB:j=c("MNPlatformAttributionTags").MESSENGER_WEB;break;case c("MessagingSourceEnum").MESSENGER_WEB_SEARCH:j=c("MNPlatformAttributionTags").MESSENGER_WEB_SEARCH;break;case c("MessagingSourceEnum").CUSTOMER_CHAT_PLUGIN:j=c("MNPlatformAttributionTags").CUSTOMER_CHAT_PLUGIN;break;default:j="";break}if(j!=="")j=c("MNPlatformAttributionTags").ATTRIBUTION_TAGS_PREFIX+j;return[j]},updateThreadTabAfterSelectThread:function h(){var i=arguments.length<=0||arguments[0]===undefined?null:arguments[0],j=arguments.length<=1||arguments[1]===undefined?null:arguments[1],k=this.getTags(i);c("MessengerActions").changeThreadTag(k,j)},hasThreadTags:function h(i){var j=c("MessengerAttributionTagsStore").getState();return!!(j.messagingTags&&i&&j.threadID&&j.threadID.toString()===i)},getThreadTags:function h(){var i=c("MessengerAttributionTagsStore").getState();return i.messagingTags}}}),null);
__d("XMNCommercePostbackCTAController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messages/commerce/postback/",{cta_id:{type:"String",required:true},message_id:{type:"String"},ref:{type:"String"},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}})}),null);
__d("MNCommercePostbackCTADataManager",["AsyncRequest","BanzaiODS","CurrentUser","getPageIDFromThreadID","MercuryMessageActions","MercuryMessageObject","MercurySourceType","MNPlatformTagsDataManager","XMNCommercePostbackCTAController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MercuryMessageActions").get();i.prototype.send=function(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1],l=arguments.length<=2||arguments[2]===undefined?null:arguments[2],m=arguments.length<=3||arguments[3]===undefined?null:arguments[3],n=c("XMNCommercePostbackCTAController").getURIBuilder().setString("cta_id",j).setString("ref",l).setString("message_id",m).getURI();if(k!==null)new(c("AsyncRequest"))().setURI(n).setMethod("POST").setErrorHandler(k).send();else new(c("AsyncRequest"))().setURI(n).setMethod("POST").send()};i.prototype.sendAndConfirm=function(j,k,l,m){var n=arguments.length<=4||arguments[4]===undefined?null:arguments[4],o=arguments.length<=5||arguments[5]===undefined?null:arguments[5],p=arguments.length<=6||arguments[6]===undefined?[]:arguments[6],q=arguments.length<=7||arguments[7]===undefined?null:arguments[7];if(k!==null)this.sendConfirmationText(k,l,m,p);this.send(j,n,o,q)};i.prototype.sendConfirmationText=function(j,k,l){if(!k)c("BanzaiODS").bumpEntityKey("messenger_commerce","confirm_message_failed.empty_threadID");else{var m=new(c("MercuryMessageObject"))(c("CurrentUser").getID()),n=[],o=c("getPageIDFromThreadID")(k);if(c("MNPlatformTagsDataManager").hasThreadTags(o))n=c("MNPlatformTagsDataManager").getThreadTags();h.send(m.constructCTAConfirmationMessageObject(j,c("MercurySourceType").TITAN_WEB,k,l,n));if(n&&n.length>0)c("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread()}};function i(){}f.exports=new i()}),null);
__d("MessengerMDotMeReferralStore",["MessengerActions","MessengerStore"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("MessengerStore"));i=h&&h.prototype;function j(){"use strict";i.constructor.call(this);this.$MessengerMDotMeReferralStore1={refCode:null,refThreadID:null}}j.prototype.getState=function(){"use strict";return this.$MessengerMDotMeReferralStore1};j.prototype.__onDispatch=function(k){"use strict";switch(k.type){case c("MessengerActions").Types.UPDATE_MDOT_ME:this.$MessengerMDotMeReferralStore1.refCode=k.refCode;this.$MessengerMDotMeReferralStore1.refThreadID=k.refThreadID;this.emitChange()}};f.exports=new j()}),null);
__d("XMNCommercePostbackRefSendController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messages/commerce/postback_ref/",{page_id:{type:"String",required:true},ref:{type:"String",required:true},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}})}),null);
__d("MNCommercePostbackRefSendManager",["AsyncRequest","MessengerActions","MessengerMDotMeReferralStore","XMNCommercePostbackRefSendController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();h.prototype.sendMDotMeRef=function(i,j){var k=this.getMdotMeRef();if(this.shouldSendRef(j,i)){var l=c("XMNCommercePostbackRefSendController").getURIBuilder().setString("page_id",i).setString("ref",k).getURI();new(c("AsyncRequest"))().setURI(l).setMethod("POST").send();c("MessengerActions").changeMDotMeReferral()}};h.prototype.shouldSendRef=function(i,j){if(!j||!i)return false;return this.hasMDotMeRef(j)};h.prototype.hasMDotMeRef=function(i){var j=c("MessengerMDotMeReferralStore").getState();return!!(j.refCode&&i&&j.refThreadID&&j.refThreadID===i)};h.prototype.getMdotMeRef=function(){var i=c("MessengerMDotMeReferralStore").getState();return i.refCode};function h(){}f.exports=new h()}),null);
__d("bs_js_dict",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=function h(n,o){delete n[o];return 0};function i(n){var o=Object.keys(n),p=o.length,j=new Array(p);for(var q=0,r=p-1|0;q<=r;++q){var s=o[q];j[q]=[s,n[s]]}return j}function j(n){var o=Object.keys(n),p=o.length,q=new Array(p);for(var r=0,s=p-1|0;r<=s;++r)q[r]=n[o[r]];return q}function k(i){__p&&__p();var n={},o=i;while(true){var p=o;if(p){var q=p[0];n[q[0]]=q[1];o=p[1];continue}else return n}}function l(i){var n={},o=i.length;for(var p=0,q=o-1|0;p<=q;++p){var r=i[p];n[r[0]]=r[1]}return n}function m(n,o){var p={},q=Object.keys(o),r=q.length;for(var s=0,t=r-1|0;s<=t;++s){var u=q[s];p[u]=n(o[u])}return p}g.unsafeDeleteKey=h;g.entries=i;g.values=j;g.fromList=k;g.fromArray=l;g.map=m}),null);
__d("MessengerDomIDs.bs",["uniqueID"],(function a(b,c,d,e,f,g){"use strict";var h={COMPOSER_INPUT_DESCRIPTION:c("uniqueID")(),CONVERSATION:c("uniqueID")(),MAIN_LABEL:c("uniqueID")(),MUTE_DIALOG_TITLE:c("uniqueID")(),THREAD_INFO_PANEL:c("uniqueID")(),THREAD_TITLE:c("uniqueID")()};g.ids=h}),null);
__d("MessengerUploadFilesUtil.bs",["bs_array","bs_curry","FantaTypeFileUploader"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i=(h={},h[c("FantaTypeFileUploader").fileTypes.ANIMATED_IMAGE]="gif_ids",h[c("FantaTypeFileUploader").fileTypes.AUDIO]="audio_ids",h[c("FantaTypeFileUploader").fileTypes.FILE]="file_ids",h[c("FantaTypeFileUploader").fileTypes.GENERIC_ATTACHMENT]="generic_attachment_ids",h[c("FantaTypeFileUploader").fileTypes.IMAGE]="image_ids",h[c("FantaTypeFileUploader").fileTypes.VIDEO]="video_ids",h);function j(n,o){if(n==null)return null;else{var p=n.getTypeIDs(o);if(p.length)return p;else return null}}function k(n){__p&&__p();if(n==null)return 0;else{var o=n.get("uploadedFiles"),p=[],q=[],r=[];o.forEach(function(s,t,u){__p&&__p();var v=s.file;if(v.type.startsWith("image/")){p.push(v);return 0}else if(v.type.startsWith("video/")){q.push(v);return 0}else{r.push(v);return 0}});return[[p,q,r]]}}function l(n,o){if(o.length)return c("bs_curry")._1(n,o);else return 0}function m(n,o){__p&&__p();if(n==null)return 0;else if(o==null)return 0;else{var p=k(n);if(p){var q=p[0];c("bs_array").iter(function(r){return l(o,[r])},q[1]);l(o,q[0]);return l(o,q[2])}else return 0}}g.supportAttachments=i;g.getAttachmentIDs=j;g.getAttachments=k;g.sendAttchment=l;g.sendAttchments=m}),null);
__d("messengerCustomColorUtils",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j){j=j||{};j.backgroundColor=i;return j}f.exports={customBubbleStyle:h}}),null);
__d("MessengerBotComposerWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1193572474099061"};j.getQueryID=function(){"use strict";return"1132183563559860"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("XMessengerBotsMenuController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messenger/commerce/bots/menu/",{page_id:{type:"String",required:true}})}),null);
__d("MessengerBotMenuDataFetcher",["AsyncRequest","Cache","MessengerBotComposerWebGraphQLQuery","XMessengerBotsMenuController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.$MessengerBotMenuDataFetcher1=new(c("Cache"))();this.$MessengerBotMenuDataFetcher2=new(c("Cache"))()}h.prototype.getMenuItems=function(i,j,k){__p&&__p();if(this.$MessengerBotMenuDataFetcher1.has(i)){j(this.$MessengerBotMenuDataFetcher1.get(i));return}var l=c("XMessengerBotsMenuController").getURIBuilder().setString("page_id",i).getURI();new(c("AsyncRequest"))().setURI(l).setHandler(function(m){var n=m.payload.menu;this.$MessengerBotMenuDataFetcher1.set(i,n);j(n)}.bind(this)).setErrorHandler(function(m){k()}).send()};h.prototype.getHasPageSetting=function(i,j,k,l){__p&&__p();if(!this.$MessengerBotMenuDataFetcher2.has(i)){var m=c("MessengerBotComposerWebGraphQLQuery").getURI({node_id:i});new(c("AsyncRequest"))().setURI(m).setHandler(function(o){var p=o.payload.data.node,n=p&&p.commerce_page_settings||[];this.$MessengerBotMenuDataFetcher2.set(i,n);j(n.indexOf(l)!==-1)}.bind(this)).setErrorHandler(function(o){this.$MessengerBotMenuDataFetcher2.set(i,[]);k()}.bind(this)).send()}var n=this.$MessengerBotMenuDataFetcher2.get(i)||[];j(n.indexOf(l)!==-1);return n.indexOf(l)!==-1};f.exports=new h()}),null);
__d("AutoFocusableLink.react",["Link.react","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("Link.react"));i=h&&h.prototype;j.prototype.componentDidMount=function(){if(this.props.autoFocus)c("ReactDOM").findDOMNode(this).focus()};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("CustomColorHighlighting.react",["cssVar","csx","cx","React","UserAgent","guid","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("React").PropTypes,n="._fy2",o="._43by",p="._mh6",q=c("UserAgent").isEngine("Gecko")?"._mh6 *::-moz-selection":"._mh6 ::selection",r=c("UserAgent").isEngine("Gecko")?"._43by *::-moz-selection":"._43by ::selection",s=n+n,t=o+o,u=p+q,v=p+p,w=o+r,x="rgba(255, 255, 255, 0.3)";k=babelHelpers.inherits(y,c("React").PureComponent);l=k&&k.prototype;function y(z){l.constructor.call(this,z);this.state={id:"cch_"+c("guid")()}}y.prototype.componentWillMount=function(){this.$CustomColorHighlighting1()};y.prototype.componentWillUnmount=function(){this.$CustomColorHighlighting2();if(this.state.styleTag)document.head.removeChild(this.state.styleTag)};y.prototype.componentWillReceiveProps=function(z){if(this.props.customColor&&!z.customColor)this.$CustomColorHighlighting2();else if(z.customColor!==this.props.customColor)this.$CustomColorHighlighting3(z.customColor)};y.prototype.render=function(){return c("React").createElement("span",{className:c("joinClasses")("_mh6",this.props.className),id:this.state.id},this.props.children)};y.prototype.$CustomColorHighlighting1=function(){var z=document.createElement("style");z.appendChild(document.createTextNode(""));document.head.appendChild(z);this.setState({styleSheet:z.sheet,styleTag:z},function(){return this.$CustomColorHighlighting3(this.props.customColor)}.bind(this))};y.prototype.$CustomColorHighlighting4=function(z,A,B){if(z.insertRule)z.insertRule(A+"{"+B+"}",0);else if(z.addRule)z.addRule(A,B,0)};y.prototype.$CustomColorHighlighting5=function(z){if("removeRule"in z)z.removeRule(0);else if("deleteRule"in z)z.deleteRule(0)};y.prototype.$CustomColorHighlighting2=function(){if(this.state.styleSheet){if(this.state.styleSheet.rules)while(this.state.styleSheet.rules.length)this.$CustomColorHighlighting5(this.state.styleSheet);if(this.state.styleSheet.cssRules)while(this.state.styleSheet.cssRules.length)this.$CustomColorHighlighting5(this.state.styleSheet)}};y.prototype.$CustomColorHighlighting6=function(z){var A=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(z),B=parseInt(A[1],16),C=parseInt(A[2],16),D=parseInt(A[3],16);return"rgba("+B+","+C+","+D+",0.2)"};y.prototype.$CustomColorHighlighting3=function(z){this.$CustomColorHighlighting2();var A=z||this.props.customColor;if(A){var B=this.$CustomColorHighlighting6(A),C="background: "+B;this.$CustomColorHighlighting4(this.state.styleSheet,"#"+this.state.id+u,C);this.$CustomColorHighlighting4(this.state.styleSheet,"#"+this.state.id+" "+s,"color: "+A);this.$CustomColorHighlighting4(this.state.styleSheet,"#"+this.state.id+" "+t,"background-color: "+A);this.$CustomColorHighlighting4(this.state.styleSheet,"#"+this.state.id+v+" "+w,"background-color: "+x)}};y.propTypes={className:m.string,customColor:m.string};f.exports=y}),null);
__d("EmojiOnlyMessage.react",["cx","EmojiImageURL","EmojiLikeConstants","Image.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){var m="_1ift _1ifu",n=0,o=this.props.contents.map(function(p){n++;if(p.emojiKey){var q=c("EmojiImageURL").getMessengerURL(p.emojiKey,c("EmojiLikeConstants").sizeMap.dp32);return c("React").createElement(c("Image.react"),{alt:p.text,className:m,key:n,src:q})}else return c("React").createElement("span",{key:n},p.text)});return c("React").createElement("div",{tabIndex:"0"},o)};function l(){i.apply(this,arguments)}l.propTypes={contents:k.arrayOf(k.shape({emojiKey:k.string,text:k.string.isRequired})).isRequired};f.exports=l}),null);
__d("MercuryBootloadOnInteraction.react",["React","createCancelableFunction"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;function j(){__p&&__p();var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.state={Component:null},this.$MercuryBootloadOnInteraction2=function(p){var q=this.state.interactionType==="click"?"click":p.type;this.setState({interactionType:q},function(){this.props.loader.load().done(this.$MercuryBootloadOnInteraction1)}.bind(this))}.bind(this),this.$MercuryBootloadOnInteraction3=function(p){this.setState({Component:p})}.bind(this),this.$MercuryBootloadOnInteraction4=function(p){if(this.state.interactionType!=="click")this.setState({interactionType:undefined})}.bind(this),l}j.prototype.componentDidMount=function(){this.$MercuryBootloadOnInteraction1=c("createCancelableFunction")(this.$MercuryBootloadOnInteraction3)};j.prototype.componentWillUnmount=function(){this.$MercuryBootloadOnInteraction1.cancel()};j.prototype.render=function(){__p&&__p();var k={onFocus:this.$MercuryBootloadOnInteraction2,onMouseOver:this.$MercuryBootloadOnInteraction2,onClick:this.$MercuryBootloadOnInteraction2,onBlur:this.$MercuryBootloadOnInteraction4};if(!this.state.Component)return c("React").cloneElement(this.props.placeholder,k);var l=this.state.Component,m={};switch(this.state.interactionType){case"focus":m.autoFocus=true;break;case"click":m.clicked=true;break}return c("React").cloneElement(this.props.component,babelHelpers["extends"]({},m,{LazyLoadedComponent:l}))};f.exports=j}),null);
__d("MessageRequestUtils",["MessagingTag"],(function a(b,c,d,e,f,g){"use strict";var h={isMessageRequest:function i(j){return(j.folder===c("MessagingTag").PENDING||j.folder===c("MessagingTag").OTHER)&&j.can_reply},isFiltered:function i(j){return j.folder===c("MessagingTag").OTHER}};f.exports=h}),null);
__d("MessengerMentionSource",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({REPLY:"reply",ATSIGN:"@",TYPEAHEAD:"typeahead"});f.exports=h}),null);
__d("applyMessengerEmoticonToContentBlock",["CharacterMetadata","EmoticonEmojiList","immutable"],(function a(b,c,d,e,f,g){"use strict";var h=c("immutable").List,i="\u3000";function j(k,l,m,n){if(!c("EmoticonEmojiList").names[m])return l;var o=k.createEntity("EMOTICON","IMMUTABLE",{type:c("EmoticonEmojiList").names[m],originalEmoticon:m}),p=o.getLastCreatedEntityKey(),q=l.getText(),r=l.getCharacterList(),s=m.length,t=r.get(n);return l.merge({text:q.slice(0,n)+i+q.slice(n+s),characterList:r.slice(0,n).concat(h.of(c("CharacterMetadata").applyEntity(t,p)),r.slice(n+s))})}f.exports=j}),null);
__d("getTextAfterNearestEntity",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j){var k=j;while(k>0&&i.getEntityAt(k-1)===null)k--;return i.getText().slice(k,j)}f.exports=h}),null);
__d("applyMessengerEmoticonToContentState",["EmoticonEmojiList","applyMessengerEmoticonToContentBlock","getTextAfterNearestEntity"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){var k=j.getAnchorKey(),l=j.getAnchorOffset(),m=i.getBlockForKey(k),n=c("getTextAfterNearestEntity")(m,l),o=c("EmoticonEmojiList").regexp.exec(n);if(!o)return i;var p=o[1];if(!p&&l!==n.length)return i;var q=o[2],r=l-n.length,s=r+o.index+o[1].length,t=i.getBlockMap().set(k,c("applyMessengerEmoticonToContentBlock")(i,m,q,s));l-=q.length-1;return i.merge({blockMap:t,selectionBefore:j,selectionAfter:j.merge({anchorOffset:l,focusOffset:l})})}f.exports=h}),null);
__d("MercuryMessageGroup",["MercuryActionType","MercuryAttachmentType","MercuryShareAttachmentRenderLocations","MercuryThreadlistConstants","MessengerLightweightActionUtils","enumerate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={calculateMessageGroups:function k(l,m){__p&&__p();var n=[],o=null,p={value:null},q=c("enumerate")(l),r=void 0;while(!(r=q.next()).done){var s=h.canAppendMessageToLastGroup(p.value,r.value,m);if(!s){o=[];n.push(o)}o.push(r.value);p=r}return n},canAppendMessageToLastGroup:function k(l,m,n){var o=c("MercuryThreadlistConstants").GROUPING_THRESHOLD;if(!l||i(l,n)||i(m,n)||l.author!=m.author||l.timestamp<m.timestamp-o||l.is_spoof_warning!==m.is_spoof_warning||l.page_admin_notes)return false;return true}};function i(k,l){var m=k.has_attachment;if(m&&(l===c("MercuryShareAttachmentRenderLocations").MESSENGER||l===c("MercuryShareAttachmentRenderLocations").CHAT))m=j(k);return!!(c("MessengerLightweightActionUtils").isLWAMessage(k)||k.action_type==c("MercuryActionType").LOG_MESSAGE||m||k.html_body||k.body&&k.body.length>c("MercuryThreadlistConstants").MAX_CHARS_BEFORE_BREAK)}function j(k){var l=k.attachments[0];return!l||l.attach_type===c("MercuryAttachmentType").STICKER||l.attach_type===c("MercuryAttachmentType").ANIMATED_IMAGE}f.exports=h}),null);
__d("PagesMessagingMercuryChatTabActionKeys",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({REQUEST_GREETING_CONFIG:null,NOTIFY_GREETING_CONFIG_RECEIVED:null});f.exports=h}),null);
__d("PagesMessagingMercuryChatTabDispatcher",["ExplicitRegistrationDispatcher"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("ExplicitRegistrationDispatcher"))({strict:false})}),null);
__d("PagesMessagingMercuryChatTabActions",["PagesMessagingMercuryChatTabActionKeys","PagesMessagingMercuryChatTabDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h={requestGreetingConfig:function i(j){c("PagesMessagingMercuryChatTabDispatcher").dispatch({actionType:c("PagesMessagingMercuryChatTabActionKeys").REQUEST_GREETING_CONFIG,threadID:j})},notifyGreetingConfigReceived:function i(j,k){c("PagesMessagingMercuryChatTabDispatcher").dispatch({actionType:c("PagesMessagingMercuryChatTabActionKeys").NOTIFY_GREETING_CONFIG_RECEIVED,threadID:j,payload:k})}};f.exports=h}),null);
__d("PagesMessagingMercuryChatTabState",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("immutable").Record({pagesGreetingShouldShow:false,pagesGreetingContent:null,pageResponsiveness:null,coverPhotoData:null,connectionContext:null,pageOnlineMessage:null,pageOneClickMessages:null}));i=h&&h.prototype;function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("XMercuryChatTabPagesNullStateConfigController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pages/messaging/mercury/greeting/",{})}),null);
__d("PagesMessagingMercuryChatTabStore",["invariant","PagesMessagingMercuryChatTabActionKeys","PagesMessagingMercuryChatTabActions","AsyncRequest","PagesMessagingMercuryChatTabDispatcher","FluxStore","Map","MercuryIDs","PagesMessagingMercuryChatTabState","XMercuryChatTabPagesNullStateConfigController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("FluxStore"));j=i&&i.prototype;function k(){j.constructor.call(this,c("PagesMessagingMercuryChatTabDispatcher"));this.$PagesMessagingMercuryChatTabStore1=new(c("Map"))()}k.prototype.getStateByThread=function(l){if(!this.$PagesMessagingMercuryChatTabStore1.has(l))this.$PagesMessagingMercuryChatTabStore1.set(l,new(c("PagesMessagingMercuryChatTabState"))());var m=this.$PagesMessagingMercuryChatTabStore1.get(l);m||h(0);return m};k.prototype.__onDispatch=function(l){var m=l.actionType,n=l.payload,o=l.threadID,p=this.getStateByThread(o);p||h(0);switch(m){case c("PagesMessagingMercuryChatTabActionKeys").REQUEST_GREETING_CONFIG:this.$PagesMessagingMercuryChatTabStore2(o);break;case c("PagesMessagingMercuryChatTabActionKeys").NOTIFY_GREETING_CONFIG_RECEIVED:this.$PagesMessagingMercuryChatTabStore3(o,this.$PagesMessagingMercuryChatTabStore4(n,p));break}};k.prototype.$PagesMessagingMercuryChatTabStore2=function(l){var m=c("XMercuryChatTabPagesNullStateConfigController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(m).setMethod("POST").setData({page_id:c("MercuryIDs").getUserIDFromThreadID(l)}).setHandler(function(n){return c("PagesMessagingMercuryChatTabActions").notifyGreetingConfigReceived(l,n.payload)}).send()};k.prototype.$PagesMessagingMercuryChatTabStore3=function(l,m){this.$PagesMessagingMercuryChatTabStore1.set(l,m);this.__emitChange()};k.prototype.$PagesMessagingMercuryChatTabStore4=function(l,m){var n=m.set("pagesGreetingShouldShow",l.pagesGreetingShouldShow).set("pagesGreetingContent",l.pagesGreetingContent).set("pageResponsiveness",l.pageResponsiveness).set("coverPhotoData",l.coverPhotoData).set("connectionContext",l.connectionContext).set("pageOnlineMessage",l.pageOnlineMessage);if(m.pageOneClickMessages===null||m.pageOneClickMessages===undefined||Object.keys(m.pageOneClickMessages).length===0)n=n.set("pageOneClickMessages",l.pageOneClickMessages);return n};f.exports=new k()}),null);
__d("PagesMessageListGreeting.react",["cx","FluxContainer","PagesMessagingMercuryChatTabActions","PagesMessagingMercuryChatTabStore","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.getStores=function(){return[c("PagesMessagingMercuryChatTabStore")]};k.calculateState=function(l,m){if(m.messageCount>0)return{shouldShowGreeting:false};var n=c("PagesMessagingMercuryChatTabStore").getStateByThread(m.threadID);return{greetingContent:n.pagesGreetingContent,shouldShowGreeting:n.pagesGreetingShouldShow}};k.prototype.componentDidMount=function(){c("PagesMessagingMercuryChatTabActions").requestGreetingConfig(this.props.threadID)};k.prototype.render=function(){if(!this.state.shouldShowGreeting||!this.state.greetingContent||this.state.greetingContent.trim().length===0)return null;return c("React").createElement("div",{className:"_4fsh _3-8z"},this.state.greetingContent)};function k(){i.apply(this,arguments)}f.exports=c("FluxContainer").create(k,{withProps:true})}),null);
__d("MessageList.react",["cx","immutable","ImmutableObject","MercuryActionType","MercuryIDs","MercuryLogMessageType","MercuryMessageGroup","MessagingGenericAdminTextType","MessengerAdminGroupUtils","MessengerDomIDs.bs","MessengerLightweightActionUtils","PagesMessageListGreeting.react","React","ReactDOM","MercuryShareAttachmentRenderLocations","idx"],(function aa(ba,a,ca,da,b,ea,fa){"use strict";__p&&__p();var c,d,e=a("MessengerDomIDs.bs").ids,f=a("React").PropTypes,g=1e3*60*60,h=function h(p){var q,r,s,t=(q=p)!=null?(q=q.log_message_data)!=null?q.message_type:q:q;switch(t){case a("MessagingGenericAdminTextType").GROUP_POLL:return(r=p)!=null?(r=r.log_message_data)!=null?(r=r.untypedData)!=null?r.question_id:r:r:r;case a("MessagingGenericAdminTextType").INSTANT_GAME_UPDATE:return(s=p)!=null?(s=s.log_message_data)!=null?(s=s.untypedData)!=null?s.game_id:s:s:s;default:return null}},i=function i(p){if(a("MessengerLightweightActionUtils").isLWAMessage(p))return"lwa";return null};c=babelHelpers.inherits(j,a("React").PureComponent);d=c&&c.prototype;function j(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=d.constructor).call.apply(p,[this].concat(s)),this.state={activeMessageID:null,messageGroups:a("MercuryMessageGroup").calculateMessageGroups(this.props.messages,this.props.location)},this.$MessageList4=function(u){this.setState(function(v){return{activeMessageID:v.activeMessageID===u?null:v.activeMessageID}})}.bind(this),this.$MessageList5=function(u){this.setState({activeMessageID:u})}.bind(this),q}j.prototype.componentWillReceiveProps=function(p){if(p.messages!==this.props.messages)this.setState({messageGroups:a("MercuryMessageGroup").calculateMessageGroups(p.messages,p.location)})};j.prototype.render=function(){__p&&__p();var p=this.props,q=p.DateBreak,r=p.location,s=p.MessageGroup,t=p.CollapsedLogMessageGroup,u=[],v=[],w=void 0,x=this.props.thread&&this.props.thread.custom_color,y=x?{backgroundColor:x}:null,z=this.state.activeMessageID,A=this.state.messageGroups,B=A.length,C=this.props.readReceipts,D=C.last(),E=D?D.watermark:0,F=a("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),G=a("MessengerAdminGroupUtils").isJoinableThread(this.props.thread),H={};for(var I=this.props.messages.size-1;I>=0;I--){var J=this.props.messages.get(I),K=h(J)||i(J);if(K&&!H[K])H[K]=J.message_id}for(var L=0;L<B;L++){var M=L>0?A[L-1]:null,N=M&&M.length>0?M[M.length-1]:null,O=A[L],P=O[0],Q=O[O.length-1],R=false;if(!N||P.timestamp-N.timestamp>g){R=true;var S=a("React").createElement(q,{date:new Date(P.timestamp),key:"db:"+P.message_id,ref:"db:"+P.message_id});if(v.length===0)u.push(S)}if(a("MessengerLightweightActionUtils").isLWAMessage(P))if(H[i(P)]!==P.message_id){var T=this.$MessageList1(P,H);u.push(T);continue}if(P.action_type==a("MercuryActionType").LOG_MESSAGE){var U,V=(U=P)!=null?(U=U.log_message_data)!=null?U.message_type:U:U,W=V===a("MessagingGenericAdminTextType").INSTANT_GAME_UPDATE,ga=V===a("MessagingGenericAdminTextType").GROUP_POLL;if((r===a("MercuryShareAttachmentRenderLocations").CHAT||r===a("MercuryShareAttachmentRenderLocations").MESSENGER)&&(P.log_message_type===a("MercuryLogMessageType").VIDEO_CALL||P.log_message_type===a("MercuryLogMessageType").PHONE_CALL)){var ha=this.$MessageList2(P,F,A,B,L,C,E,Q);u.push(ha)}else{var X=this.$MessageList3(P,H);w=P.message_id;if(G&&!W&&!ga)v.push(X);else{if(v.length!==0){if(v.length>1)u.push(a("React").createElement(t,{key:"mg:"+w,style:y},v));else u.push(a("React").createElement("div",{key:"mg:"+w},v));v=[]}u.push(X)}}continue}if(v.length!==0){if(v.length>1)u.push(a("React").createElement(t,{key:"mg:"+w,style:y},v));else u.push(a("React").createElement("div",{key:"mg:"+w},v));v=[]}O=a("immutable").List(O);var Y=l(A,B,L),ia=!n(C,O,Y),ja=m(E,Q),ka=o(this.props.deliveryTimestamp,Q),la=this.props.onlineUsers!==undefined&&this.props.onlineUsers.includes(a("MercuryIDs").getUserIDFromParticipantID(O.first().author));u.push(a("React").createElement(s,{activeMessageID:k(z,O),author:O.first().author,deliveryTimestamp:ka,hasDateBreak:R,isCanonical:this.props.isCanonical,isFromViewer:F===P.author,isPageMessage:this.props.isPageMessage,isOnline:la,key:"mg:"+P.message_id,lastReadTimestamp:ja,maxBubbleWidth:this.props.maxBubbleWidth,messages:O,nextTimestamp:Y,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$MessageList4,onMessageSelect:this.$MessageList5,onStickerClick:this.props.onStickerClick,pageID:this.props.isPageMessage?this.props.viewer:null,readReceipts:ia?C:a("immutable").OrderedMap(),ref:"mg:"+P.message_id,thread:this.props.thread,threadID:this.props.threadID}))}if(v.length!==0){if(v.length>1)u.push(a("React").createElement(t,{key:"mg:"+w,style:y},v));else u.push(a("React").createElement("div",{key:"mg:"+w},v));v=[]}var Z=this.props.threadID||this.props.thread&&this.props.thread.thread_id||this.props.thread&&this.props.thread.thread_fbid,$=null;if(r===a("MercuryShareAttachmentRenderLocations").MESSENGER&&Z&&this.props.isPageMessage)$=a("React").createElement(a("PagesMessageListGreeting.react"),{messageCount:v.length+B,threadID:Z});return a("React").createElement("div",{id:r===a("MercuryShareAttachmentRenderLocations").MESSENGER?e.CONVERSATION:null},$,u)};j.prototype.getMessageElement=function(p,q){__p&&__p();if(q){var r=this.refs["db:"+p];if(r)return a("ReactDOM").findDOMNode(r)}var s=this.state.messageGroups.find(function(v){return v.some(function(w){return w.message_id===p})});if(!s)return null;var t=s[0].message_id,u=this.refs["mg:"+t];if(!u)return null;if(q&&t===p)return a("ReactDOM").findDOMNode(u);return u.getMessageElement(p)};j.prototype.$MessageList2=function(p,q,r,s,t,u,v,w){var x=this.props.MessageGroup,y={attach_type:"share",share:{style_list:["rtc_call_log","fallback"],log_message_body:p.log_message_body,log_message_data:p.log_message_data,log_message_type:p.log_message_type,timestamp:p.timestamp}},z=a("ImmutableObject").setProperty(p,"attachments",[y]);z=a("ImmutableObject").setProperty(z,"body","");var A=a("immutable").List([z]),B=l(r,s,t),C=!n(u,A,B),D=m(v,w),E=o(this.props.deliveryTimestamp,w);return a("React").createElement(x,{author:A.first().author,deliveryTimestamp:E,isFromViewer:q===p.author,key:p.message_id,lastReadTimestamp:D,maxBubbleWidth:this.props.maxBubbleWidth,messages:A,nextTimestamp:B,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$MessageList4,onMessageSelect:this.$MessageList5,onStickerClick:this.props.onStickerClick,readReceipts:C?u:a("immutable").OrderedMap(),thread:this.props.thread,threadID:this.props.threadID})};j.prototype.$MessageList3=function(p,q){var r=this.props.LogMessage,s=q[h(p)];if(p.log_message_type!==a("MercuryLogMessageType").SERVER_ERROR)return a("React").createElement(r,{className:this.props.location===a("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,key:p.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:p,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,isPageMessage:this.props.isPageMessage,thread:this.props.thread,isLastOfType:s===p.message_id});return null};j.prototype.$MessageList1=function(p,q){var r=q[i(p)],s=this.props.LogMessage;return a("React").createElement(s,{className:this.props.location===a("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,key:p.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:p,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,thread:this.props.thread,isLastOfType:r===p.message_id})};j.propTypes={CollapsedLogMessageGroup:f.func.isRequired,DateBreak:f.func.isRequired,deliveryTimestamp:f.number.isRequired,isCanonical:f.bool,isPageMessage:f.bool,location:f.string.isRequired,LogMessage:f.func.isRequired,loadMoreMessages:f.func,MessageGroup:f.func.isRequired,messages:f.instanceOf(a("immutable").List).isRequired,onAttachmentLoad:f.func,onlineUsers:f.instanceOf(a("immutable").List),onStickerClick:f.func,readReceipts:f.instanceOf(a("immutable").OrderedMap).isRequired,viewer:f.string.isRequired,thread:f.object,threadID:f.string};function k(p,q){return q.find(function(r){return r.message_id===p})?p:null}function l(p,q,r){return r<q-1?p[r+1][0].timestamp:Infinity}function m(p,q){return q.timestamp>p?p:Infinity}function n(p,q,r){return q.isEmpty()||p.last()<q.first().timestamp||p.first()>=r}function o(p,q){return q.timestamp>p?p:Infinity}b.exports=j}),null);
__d("MessengerEmojiSpan.react",["cx","EmojiLikeConstants","MessengerSupportedEmojiUtils","React","cssURL"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.contentState.getEntity(this.props.entityKey),n=m.getData(),o=n.type,p=c("MessengerSupportedEmojiUtils").getUrl(o,c("EmojiLikeConstants").size.SMALL);p=p?p:"";return c("React").createElement("span",{className:"_21wj",style:{backgroundImage:c("cssURL")(p)},"data-offset-key":this.props.offsetKey},c("React").createElement("span",{className:"_21wk"},this.props.children))};function l(){i.apply(this,arguments)}l.propTypes={children:k.arrayOf(k.object),contentState:k.object.isRequired,entityKey:k.string.isRequired,offsetKey:k.string};f.exports=l}),null);
__d("MessengerEmoticonSpan.react",["cx","EmojiLikeConstants","MessengerSupportedEmojiUtils","EmoticonEmojiList","React","cssURL"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.contentState.getEntity(this.props.entityKey),n=m.getData(),o=n.type,p=c("EmoticonEmojiList").emote2emojis[o],q=c("MessengerSupportedEmojiUtils").getUrl(p,c("EmojiLikeConstants").size.XSMALL);q=q?q:"";return c("React").createElement("span",{className:"_21wj",style:{backgroundImage:c("cssURL")(q)},"data-offset-key":this.props.offsetKey},c("React").createElement("span",{className:"_21wk"},this.props.children))};function l(){i.apply(this,arguments)}l.propTypes={children:k.arrayOf(k.object),contentState:k.object.isRequired,entityKey:k.string.isRequired,offsetKey:k.string};f.exports=l}),null);
__d("MessengerMentionsEntityDecorator.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement("span",{className:"_fy2"},this.props.children)};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("convertMIGColorToFIGColor",["cssVar"],(function a(b,c,d,e,f,g,h){"use strict";var i={"#0077e5":"#4080ff","#44bec7":"#54C7EC","#ffc300":"#f5c33b","#fa3c4c":"#F35369","#d696bb":"#d696bb","#6699cc":"#7596c8","#13cf13":"#42b72a","#ff7e29":"#F7923B","#e68585":"#e68585","#7646ff":"#8C72CB","#20cef5":"#54C7EC","#67b868":"#A3CE71","#d4a88c":"#cfa588","#ff5ca1":"#EC7EBD","#a695c7":"#AF9CDA"};function j(k){return k&&i[k]||k||""}f.exports=j}),null);
__d("createMessengerMentionDraftEntity",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return i.createEntity("MENTION","SEGMENTED",{mid:j.getUniqueID()})}f.exports=h}),null);
__d("getEveryoneMentionIndex",[],(function a(b,c,d,e,f,g){"use strict";function h(i){return i.findIndex(function(j){return j.type=="t"})}f.exports=h}),null);
__d("getProfileRangesForContentState",["EmojiFormat","emptyFunction"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("emptyFunction").thatReturnsTrue;function i(j,k){__p&&__p();var l=[],m=0;j.getBlockMap().forEach(function(n){__p&&__p();var o=0,p=n.getText();n.findEntityRanges(h,function(q,r){__p&&__p();var s=n.getEntityAt(q);if(s){var t=j.getEntity(s);if(t.getType()==="EMOTICON")o+=t.getData().originalEmoticon.length-1;else if(t.getType()==="EMOJI"){var u=t.getData().type,v=c("EmojiFormat").codeStringToCodeArray(u),w=String.fromCodePoint.apply(String,v);o+=w.length-1}else if(t.getType()==="MENTION"){var x=t.getData().mid,y=q+o+m,z=x===k;if(/^\d+$/.test(x)||z)l.push({id:x,offset:y,length:r-q,type:z?"t":"p"})}}});m+=p.length+o+1});return l}f.exports=i}),null);
__d("getVisibleValueForContentStateWithMessengerEmoji",["EmojiFormat","emptyFunction"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){__p&&__p();var j=i.getBlockMap().map(function(k){__p&&__p();var l=k.getText(),m="";k.findEntityRanges(c("emptyFunction").thatReturnsTrue,function(n,o){__p&&__p();var p=k.getEntityAt(n);if(!p)m+=l.slice(n,o);else{var q=i.getEntity(p);if(q.getType()==="EMOTICON")m+=q.getData().originalEmoticon;else if(q.getType()==="EMOJI"){var r=q.getData().type,s=c("EmojiFormat").codeStringToCodeArray(r);m+=String.fromCodePoint.apply(String,s)}else m+=l.slice(n,o)}});return m});return j.join("\n")}f.exports=h}),null);
__d("insertMessengerEmojiIntoContentState",["DraftModifier","EmojiFormat"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l){var m=j.createEntity("EMOJI","IMMUTABLE",{type:i}),n=m.getLastCreatedEntityKey();return c("DraftModifier").insertText(j,k,c("EmojiFormat").codeStringToUnicode(i),l,n)}f.exports=h}),null);
__d("handleBeforeInputForMessengerEmoji",["EditorState","MessengerSupportedEmojiUtils","insertMessengerEmojiIntoContentState"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){var k=i.getSelection();if(!k.isCollapsed()||!j)return i;var l=c("MessengerSupportedEmojiUtils").getEmojiMatchObj(j);if(!l||!l.is_supported)return i;var m=c("insertMessengerEmojiIntoContentState")(l.emoji_key,i.getCurrentContent(),k,i.getCurrentInlineStyle());return c("EditorState").push(i,m,"insert-characters")}f.exports=h}),null);
__d("handleBeforeInputForMessengerEmoticon",["DraftModifier","EditorState","applyMessengerEmoticonToContentState"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new RegExp(/[\s\'\".,!?]/);function i(j,k){var l=j.getSelection();if(!l.isCollapsed()||!k||!h.test(k))return j;var m=j.getCurrentContent(),n=c("applyMessengerEmoticonToContentState")(m,l);if(n===m)return j;var o=c("DraftModifier").insertText(n,n.getSelectionAfter(),k);return c("EditorState").push(j,o,"insert-characters")}f.exports=i}),null);
__d("handleSoftNewlineForMessengerEmoticon",["DraftModifier","EditorState","applyMessengerEmoticonToContentState"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j=i.getCurrentContent(),k=i.getSelection(),l=c("applyMessengerEmoticonToContentState")(j,k),m=c("DraftModifier").splitBlock(l,j===l?k:l.getSelectionAfter());return c("EditorState").push(i,m,"split-block")}f.exports=h}),null);
__d("StickersDispatcher",["ExplicitRegistrationDispatcher"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("ExplicitRegistrationDispatcher"))({strict:false})}),null);
__d("StickersActions",["StickersDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({ADD_RECENT_STICKER:null,HIDE_FLYOUT:null,LOAD_RECENT_STICKERS:null,SELECT_STORE_PACK:null,SELECT_TRAY_PACK:null,SHOW_FLYOUT:null,TRAY_LOADED:null}),i={Types:h,addRecentSticker:function j(k){c("StickersDispatcher").dispatch({type:h.ADD_RECENT_STICKER,sticker:k})},hideStickerFlyout:function j(){c("StickersDispatcher").dispatch({type:h.HIDE_FLYOUT})},loadRecentStickers:function j(k){c("StickersDispatcher").dispatch({type:h.LOAD_RECENT_STICKERS,stickers:k})},selectStorePack:function j(k){c("StickersDispatcher").dispatch({type:h.SELECT_STORE_PACK,packID:k})},selectTrayPack:function j(k){c("StickersDispatcher").dispatch({type:h.SELECT_TRAY_PACK,packID:k})},showStickerFlyout:function j(k){c("StickersDispatcher").dispatch({type:h.SHOW_FLYOUT,threadID:k})},trayLoaded:function j(){c("StickersDispatcher").dispatch({type:h.TRAY_LOADED})}};f.exports=i}),null);
__d("applyEmoticonToContentBlock",["CharacterMetadata","DraftEntity","EmoticonsList","immutable"],(function a(b,c,d,e,f,g){"use strict";var h=c("immutable").List,i="\u3000";function j(k,l,m){if(!c("EmoticonsList").emotes[l])return k;var n=c("DraftEntity").create("EMOTICON","IMMUTABLE",{type:c("EmoticonsList").emotes[l],originalEmoticon:l}),o=k.getText(),p=k.getCharacterList(),q=l.length,r=p.get(m);return k.merge({text:o.slice(0,m)+i+o.slice(m+q),characterList:p.slice(0,m).concat(h.of(c("CharacterMetadata").applyEntity(r,n)),p.slice(m+q))})}f.exports=j}),null);
__d("insertEmoticonIntoContentState",["DraftModifier","applyEmoticonToContentBlock"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){var l=c("DraftModifier").replaceText(j,k,i),m=k.getAnchorKey(),n=k.getAnchorOffset(),o=l.getBlockForKey(m),p=l.getBlockMap().set(m,c("applyEmoticonToContentBlock")(o,i,n));n++;return j.merge({blockMap:p,selectionBefore:k,selectionAfter:k.merge({anchorOffset:n,focusOffset:n})})}f.exports=h}),null);
__d("insertEmoticonIntoEditorState",["DraftModifier","EditorState","insertEmoticonIntoContentState"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=" ";function i(j,k){__p&&__p();var l=k.getSelection(),m=k.getCurrentContent(),n=l.getStartOffset(),o=l.getEndOffset(),p=m.getBlockForKey(l.getStartKey()).getText(),q=m.getBlockForKey(l.getEndKey()).getText(),r="";if(o<=q.length&&q[o]!==h)r=h;if(n>0&&p[n-1]!==h){m=c("DraftModifier").insertText(m,l,h);l=m.getSelectionAfter()}var s=c("insertEmoticonIntoContentState")(j,m,l);m=c("DraftModifier").insertText(s,s.getSelectionAfter(),r);return c("EditorState").push(k,m,"insert-characters")}f.exports=i}),null);
__d("isWebGLEnabled",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=null;function i(){try{var k=document.createElement("canvas");return Boolean(window.WebGLRenderingContext)&&Boolean(k.getContext("webgl")||k.getContext("experimental-webgl"))}catch(l){return false}}function j(){if(h===null)h=i();return h}f.exports=j}),null);
__d("MessengerViewerContactMethodsWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1342409575886656"};j.getQueryID=function(){"use strict";return"304829463257788"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);