if (self.CavalryLogger) { CavalryLogger.start_js(["5tOUB"]); }

__d("NotifType",[],(function a(b,c,d,e,f,g){f.exports={LIKE:"like",OPEN_GRAPH_ACTION_LIKE:"open_graph_action_like",LIKE_TAGGED:"like_tagged",PAGE_FAN:"page_fan",IG_MEDIA_LIKE:"ig_media_like",FEEDBACK_REACTION_GENERIC:"feedback_reaction_generic",FEEDBACK_REACTION_GENERIC_TAGGED:"feedback_reaction_generic_tagged",MESSENGER_REACTIONS:"messenger_reactions",MARKETPLACE_RECEIVED_RATING:"marketplace_received_rating",MARKETPLACE_RECEIVED_RATING_COMPLETED:"marketplace_received_rating_completed"}}),null);
__d("asyncSleep",["regeneratorRuntime","Promise"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){return c("regeneratorRuntime").async(function j(k){while(1)switch(k.prev=k.next){case 0:k.next=2;return c("regeneratorRuntime").awrap(new(c("Promise"))(function(l){return setTimeout(l,i)}));case 2:case"end":return k.stop()}},null,this)}f.exports=h}),null);
__d("NotificationGenericBucket",["NotificationSeenState"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){this.$NotificationGenericBucket2=[];this.$NotificationGenericBucket3={};this.$NotificationGenericBucket4={};this.$NotificationGenericBucket7=function(j,k){var l=this.$NotificationGenericBucket4[j],m=this.$NotificationGenericBucket4[k];return Number(m)-Number(l)}.bind(this);this.$NotificationGenericBucket1=i}h.prototype.reset=function(){this.$NotificationGenericBucket2=[];this.$NotificationGenericBucket3={};this.$NotificationGenericBucket4={}};h.prototype.getType=function(){return this.$NotificationGenericBucket1.bucket_type};h.prototype.getTitle=function(){return this.$NotificationGenericBucket1.title};h.prototype.getSortedIDs=function(){return this.$NotificationGenericBucket2.slice()};h.prototype.insertIfEligible=function(i){var j=this.$NotificationGenericBucket5(i);if(!j.eligible)return j;this.$NotificationGenericBucket6(i);return{eligible:true}};h.prototype.remove=function(i){if(!this.$NotificationGenericBucket3[i])return false;delete this.$NotificationGenericBucket3[i];delete this.$NotificationGenericBucket4[i];var j=this.$NotificationGenericBucket2.indexOf(i);j>-1&&this.$NotificationGenericBucket2.splice(j,1);return true};h.prototype.$NotificationGenericBucket6=function(i){__p&&__p();var j=i.alert_id;if(this.$NotificationGenericBucket3[j])return true;this.$NotificationGenericBucket2.push(j);this.$NotificationGenericBucket3[j]=true;var k=this.$NotificationGenericBucket8(this.$NotificationGenericBucket1.sort_key_index);if(k>-1){var l=i.sort_keys?i.sort_keys[k]:null;if(l){this.$NotificationGenericBucket4[j]=l;this.$NotificationGenericBucket9()}}return true};h.prototype.$NotificationGenericBucket9=function(){this.$NotificationGenericBucket2.sort(this.$NotificationGenericBucket7)};h.prototype.$NotificationGenericBucket5=function(i){__p&&__p();if(!this.$NotificationGenericBucket10(i))return{eligible:false,type:"bucket",data:i.eligible_buckets};if(!this.$NotificationGenericBucket11(i))return{eligible:false,type:"exp_time"};if(!this.$NotificationGenericBucket12(i))return{eligible:false,type:"seen_filter"};if(!this.$NotificationGenericBucket13(i))return{eligible:false,type:"max_count"};if(!this.$NotificationGenericBucket14(i))return{eligible:false,type:"seen_evict",data:this.$NotificationGenericBucket15(i)};if(!this.$NotificationGenericBucket16(i))return{eligible:false,type:"read_evict"};return{eligible:true}};h.prototype.$NotificationGenericBucket8=function(i){return Number.isInteger(i)?Number(i):-1};h.prototype.$NotificationGenericBucket10=function(i){if(!i.eligible_buckets)return false;return i.eligible_buckets.includes(this.getType())};h.prototype.$NotificationGenericBucket12=function(i){return c("NotificationSeenState").validateFilter(i.alert_id,this.$NotificationGenericBucket1.seen_filter)};h.prototype.$NotificationGenericBucket11=function(i){var j=this.$NotificationGenericBucket8(this.$NotificationGenericBucket1.min_to_expire);return j===-1?true:Date.now()-i.creation_time<j*60*1e3};h.prototype.$NotificationGenericBucket13=function(i){var j=this.$NotificationGenericBucket8(this.$NotificationGenericBucket1.max_count);return j===-1?true:this.$NotificationGenericBucket2.length<j};h.prototype.$NotificationGenericBucket15=function(i){var j=this.$NotificationGenericBucket8(this.$NotificationGenericBucket1.sec_to_evict_seen);return{secToEvict:j,firstTime:i.first_seen_time||0,currentTime:Date.now()/1e3}};h.prototype.$NotificationGenericBucket17=function(i){var j=this.$NotificationGenericBucket8(this.$NotificationGenericBucket1.sec_to_evict_read);return{secToEvict:j,firstTime:i.first_read_time||0,currentTime:Date.now()/1e3}};h.prototype.$NotificationGenericBucket18=function(i){var j=i.secToEvict,k=i.firstTime,l=i.currentTime;return j===-1||k===0?true:l-k<j};h.prototype.$NotificationGenericBucket14=function(i){return this.$NotificationGenericBucket18(this.$NotificationGenericBucket15(i))};h.prototype.$NotificationGenericBucket16=function(i){return this.$NotificationGenericBucket18(this.$NotificationGenericBucket17(i))};h.prototype.$NotificationGenericBucket19=function(i){return true};f.exports=h}),null);
__d("NotificationServerTransport",["invariant","AsyncResponse","DOM","UIPagelet","compactArray","ifRequired","normalizeNotificationUpdatePayload","objectValues","once","promiseFinally","setImmediateAcrossTransitions","uniqueID"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i={},j={},k={},l={};function m(w){if(l[w]==null){l[w]=c("DOM").create("div",{"class":"hidden_elem",id:w});c("DOM").appendContent(document.documentElement,l[w])}return l[w].id}function n(w){return w.reduce(function(x,y){var z=y.targetNumToLoad;return Math.max(x,z)},0)}function o(w,x){__p&&__p();var y=x.getHash(),z=i[y];if(!z||z.clientRequestID!==w)return;delete i[y];z.calls.forEach(function(A){var B=A.onCompleted;if(B)B()});if(j[y]!=null)q(x)}function p(w,x,y){__p&&__p();var z=x.getHash(),A=i[z];if(!A||A.clientRequestID!==w)return;delete i[z];A.calls.forEach(function(B){var C=B.onError;if(C)C(y)});if(j[z]!=null)q(x)}function q(w){__p&&__p();var x=w.getHash();if(k[x]!=null)return;k[x]=c("setImmediateAcrossTransitions")(function(){__p&&__p();delete k[x];var y=c("uniqueID")(),z=j[x];delete j[x];if(z==null)return;var A=n(z),B=w.getRequestParams(A);if(B.length<=0){z.forEach(function(F){var G=F.onCompleted;if(G)G()});return}var C=function C(F){p(y,w,F.toError())},D=w.getStreamingTransportPageletName();D!=null||h(0);var E=c("UIPagelet").loadFromEndpoint(D,m(y),babelHelpers["extends"]({},B,{clientRequestID:y}),{allowIrrelevantRequests:true,automatic:false,crossPage:true,errorHandler:C,jsNonblock:true,transportErrorHandler:C,usePipe:true,usePostRequest:false});i[x]={calls:z,clientRequestID:y,endpointState:w,transport:E}})}var r={makeRequest:function w(x,y,z){__p&&__p();var A=z.onChunkResponse,B=z.onCompleted,C=z.onError,D=x.getHash(),E={onChunkResponse:A,onCompleted:B,onError:C,targetNumToLoad:y};v(D);var F=i[D],G=F?n(F.calls)>=y:false;if(G){F!=null||h(0);F.calls.push(E)}else{if(j[D]==null)j[D]=[];j[D].push(E);if(F==null)q(x)}return{remove:function H(){__p&&__p();var F=i[D];if(F!=null){var I=F.calls.indexOf(E);if(I!==-1)F.calls.splice(I,1);if(F.calls.length===0){if(F.transport)F.transport.abandon();delete i[D];if(j[D]!=null)q(x)}}var J=j[D];if(J!=null){var K=J.indexOf(E);if(K!==-1)J.splice(K,1)}}}},handleResponseChunk:function w(x,y){var z=s(x);z.forEach(function(A){A(c("normalizeNotificationUpdatePayload")(y))})},handleRequestCompleted:function w(x){var y=c("objectValues")(i).find(function(y){return y&&y.clientRequestID===x});y||h(0);o(x,y.endpointState)},handleRequestFailed:function w(x,y){__p&&__p();var z=c("objectValues")(i).find(function(z){return z&&z.clientRequestID===x});z||h(0);var A=z.endpointState.getHash(),B=i[A];if(!B||B.clientRequestID!==x)return;delete i[A];B.calls.forEach(function(C){var D=C.onError;if(D)D(new Error(y))});if(j[A]!=null)q(z.endpointState)}};function s(w){__p&&__p();var x=Object.keys(i).find(function(B){var C=i[B];return C&&C.clientRequestID===w}),y=x&&i[x];if(!y||!x)return[];var z=y.calls,A=j[x];if(A)z=z.concat(A);return c("compactArray")(z.map(function(B){return B.onChunkResponse}))}function t(w,x){__p&&__p();var y=x.targetNumToLoad,z=x.endpointState,A=x.payloadPromise;if(i[w]!=null)return;var B=c("uniqueID")(),C={calls:[{targetNumToLoad:y}],clientRequestID:B,endpointState:z};i[w]=C;A||h(0);var D=A.then(function(E){var F=s(B);F.forEach(function(G){G(E)})});c("promiseFinally")(D,function(){o(B,z)}).done()}var u=function u(w){c("ifRequired")("NotificationEagerLoader",function(x){var y=x.eagerlyLoadedData;if(y.hasData&&w===y.endpointState.getHash())t(w,y)})},v=c("once")(u);f.exports=r}),null);
__d("NotificationServerTransportLegacy",["AsyncRequest","normalizeNotificationUpdatePayload"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={makeRequest:function i(j,k,l){__p&&__p();var m=l.onError,n=l.onChunkResponse,o=l.onCompleted,p=true;function q(u){if(!p)return;var v=c("normalizeNotificationUpdatePayload")(u.getPayload());try{n(v)}finally{o()}}function r(u){if(!p)return;if(m)m(u.toError())}var s=j.getRequestParams(k);if(s.length<=0){o();return{remove:function u(){}}}var t=new(c("AsyncRequest"))(j.endpointURI).setAllowCrossPageTransition(true).setData(s).setErrorHandler(r).setTransportErrorHandler(r).setHandler(q);t.send();return{remove:function u(){p=false;t.abandon()}}}};f.exports=h}),null);
__d("NotificationStore",["ErrorUtils","NotificationConstants","NotificationEndpointState","NotificationListConfig","NotificationsDefaultEndpointURI","NotificationServerTransport","NotificationServerTransportLegacy","NotificationUpdates","QE2Logger","createObjectBy","distinctArrayBy","flatMapArray","objectValues","sortBy","sprintf"],(function a(b,c,d,e,f,g){__p&&__p();var h={};function i(n,o,p){return n.page_info!=null&&o.classification==p.classification&&o.endpointURI===p.endpointURI&&o.readness==p.readness}function j(n,o){__p&&__p();var p={};c("NotificationEndpointState").getAllInstances(o.endpointURI).forEach(function(q){__p&&__p();var r=void 0;if(i(n,q,o)){q.graphQLPageInfo=n.page_info;r=n}else if(n.payloadsource===c("NotificationConstants").PayloadSourceType.SYNC&&o.endpointURI===c("NotificationsDefaultEndpointURI")&&q.classification==null&&q.readness==null)r=n;else r=babelHelpers["extends"]({},n,{nodes:n.nodes?n.nodes.filter(function(t){return k(t,q)}):undefined});if(r.nodes&&r.nodes.length>0){var s=l(q,r);if(s!=null)s.forEach(function(t){p[t]=true})}});c("NotificationUpdates").didUpdateNotifications(Object.keys(p))}function k(n,o){__p&&__p();var p=o.classification,q=o.notifications,r=o.order,s=o.readness,t=r.getAllResources();t.length===0;if(t.length>0){var u=t[0],v=q.getResource(u);if(v.creation_time>=n.creation_time)return false}if(p&&(!n.classifications||!n.classifications.includes(p)))return false;if(s&&s==="SEEN_AND_READ"!==(n.seen_state==="SEEN_AND_READ"))return false;return true}function l(n,o){__p&&__p();var p=[],q={};if(o.nodes&&o.nodes.length>0)o.nodes.forEach(function(r){var s=r.alert_id,t=n.notifications.getResource(s);if(!t||t.creation_time<r.creation_time){p.push(s);q[s]=r}});n.notifications.addResourcesAndExecute(q);n.order.addResources(p);return p}c("NotificationUpdates").subscribe("update-notifications",function(n,o){if(o.payloadsource!==c("NotificationConstants").PayloadSourceType.ENDPOINT)j(o,{endpointURI:o.endpoint!=null?o.endpoint:c("NotificationsDefaultEndpointURI")})});var m={getNotifications:function n(o,p,q){__p&&__p();var r=c("NotificationEndpointState").getInstance(p),s=r.notifications,t=r.order,u=void 0,v=t.executeOrEnqueue(0,o,function(E){if(q){u=s.executeOrEnqueue(E,q);var F=s.getUnavailableResources(u);if(F.length>0)c("ErrorUtils").reportError(new Error(c("sprintf")("The range for this endpoint contained notification IDs for which we have no payload (Notification IDs: `%s`. Endpoint config: `%s`).",JSON.stringify(F),JSON.stringify(r.getConfig()))))}});function w(){t.unsubscribe(v);if(u)s.unsubscribe(u)}if(t.getUnavailableResources(v).length===0)return{remove:w};if(!m.canFetchMore(p)){t.forceRunCallbacks();return{remove:w}}var x=r.getHash();if(h[x]==null)h[x]=1;else h[x]++;function y(){h[x]--;if(h[x]===0)t.forceRunCallbacks()}function z(E){if(!(E&&E.nodes))return;c("NotificationUpdates").handleUpdate(c("NotificationConstants").PayloadSourceType.ENDPOINT,E,p.readness,p.classification);j(babelHelpers["extends"]({},E,{payloadsource:c("NotificationConstants").PayloadSourceType.ENDPOINT}),p)}function A(){h[x]--;if(h[x]===0)t.forceRunCallbacks()}var B=void 0;if(c("NotificationListConfig").useStreamingTransport&&r.getStreamingTransportPageletName()!=null)B=c("NotificationServerTransport");else B=c("NotificationServerTransportLegacy");if(p.endpointURI===c("NotificationsDefaultEndpointURI"))c("QE2Logger").logExposureForUser("www_notifications_perf_h2_2017");var C=B.makeRequest(r,o,{onChunkResponse:z,onCompleted:A,onError:y}),D=C.remove;return{remove:function E(){w();D()}}},getNotification:function n(o){var p=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],q=p.classification,r=p.endpointURI,s=r===undefined?c("NotificationsDefaultEndpointURI"):r,t=p.readness,u=c("NotificationEndpointState").getInstance({classification:q,endpointURI:s,readness:t}),v=u.notifications;return v.getResource(o)},getAllForAllEndpoints:function n(){var o=c("NotificationEndpointState").getAllInstances(),p=c("flatMapArray")(o,function(t){var u=this.getAll(t.getConfig());return c("objectValues")(u)}.bind(this)),q=c("sortBy")(p,function(t){return t.creation_time}),r=q.reverse(),s=c("distinctArrayBy")(r,function(t){return t.alert_id});return c("createObjectBy")(s,function(t){return t.alert_id})},getAll:function n(o){var p=c("NotificationEndpointState").getInstance(o),q=p.notifications,r=p.order,s={};r.getAllResources().forEach(function(t){var u=q.getResource(t);if(u==null)c("ErrorUtils").reportError(new Error(c("sprintf")("The range for this endpoint contained a notification ID for which we have no payload (Notification ID: `%s`. Endpoint config: `%s`).",t,JSON.stringify(o))));else s[t]=u});return s},getCount:function n(o){var p=c("NotificationEndpointState").getInstance(o);return p.order.getAllResources().length},canFetchMore:function n(o){var p=c("NotificationEndpointState").getInstance(o),q=p.graphQLPageInfo;return!q||!Object.prototype.hasOwnProperty.call(q,"has_next_page")||q.has_next_page},registerEndpoint:function n(o){c("NotificationEndpointState").getInstance(o)}};m.registerEndpoint({endpointURI:c("NotificationsDefaultEndpointURI")});f.exports=m}),null);
__d("NotificationBucketStore",["Arbiter","Banzai","JSLogger","NotificationConstants","NotificationGenericBucket","NotificationsBucketList","NotificationsDefaultEndpointURI","NotificationStore","NotificationUpdates"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("NotificationConstants").PayloadSourceType,i=[],j={},k={},l=[],m=false,n={},o={},p="notif_jewel_buckets",q=function q(){if(m)return;m=true;c("NotificationsBucketList").buckets.forEach(function(D){D.bucket_type=D.bucket_type.toUpperCase();var E=new(c("NotificationGenericBucket"))(D);i.push(E);j[E.getType()]=E});A()},r=function r(){l=i.map(function(D){return{ids:D.getSortedIDs(),title:D.getTitle()||"",bucketType:D.getType()}})},s=function s(D){__p&&__p();var E=D.alert_id;if(!n[E])n[E]=[];var F=[];for(var G=0,H=i.length;G<H;G++){var I=i[G],J=I.insertIfEligible(D);F.push({bucket:I.getType(),result:J});if(J.eligible){n[E].push(F);u(D,I);return I.getType()}}n[E].push(F);return null},t=function t(D,E){var F="PRIORITY_INBOX";if(!j[F]||E.getType()===F)return;var G=D.alert_id;if(o[G]||D.creation_time>Date.now()/1e3-60*60){var H=n[G],I=H[H.length-1]||[],J={notif_data:{alert_id:D.alert_id.split(":")[1],creation_time:D.creation_time,eligible_buckets:D.eligible_buckets,first_seen_time:D.first_seen_time,notif_type:D.notif_type,seen_state:D.seen_state,sort_keys:D.sort_keys},eviction_data:I,was_live_send:o[G]===true,priority_eviction_reason:I[0]?I[0].result.type:null};c("Banzai").post(p,{event_type:"bucketing_error",data:J})}},u=function u(D,E){k[D.alert_id]=E.getType();t(D,E)},v=function v(D,E){delete k[D.alert_id]},w=function w(D){var E=D.alert_id,F=x(E);if(F){var G=y(F);if(G){G.remove(E);v(D,G)}}s(D)},x=function x(D){return k[D]},y=function y(D){return j[D]},z=function z(){k={};i.forEach(function(D){return D.reset()});n={};r()},A=function A(){var D=c("NotificationStore").getAll({endpointURI:c("NotificationsDefaultEndpointURI")});B(Object.keys(D).map(function(E){return D[E]}))},B=function B(D){D.forEach(w);r()};c("NotificationUpdates").subscribe("update-notifications",function(D,E){__p&&__p();if(!E.nodes||E.nodes.length===0)return;if(E.payloadsource===h.LIVE_SEND){E.nodes.forEach(function(F){return o[F.alert_id]=true});z();A()}else if(E.nodes){E.nodes.forEach(function(F){return o[F.alert_id]=false});B(E.nodes)}});c("Arbiter").subscribe(c("JSLogger").DUMP_EVENT,function(D,E){E.notifs_bucket_data={bucketInfo:l,data:l.reduce(function(F,E){var G=E.ids.map(function(H){return{id:H,results:n[H]}});return[].concat(F,G)},[])}});q();var C={getBucketListData:function D(){return l},isEmptyBucketListData:function D(){var E=l.reduce(function(F,G){return F+G.ids.length},0);return E===0}};f.exports=C}),null);
__d("NotificationHiddenState",["NotificationConstants","NotificationUpdates","isEmpty"],(function a(b,c,d,e,f,g){__p&&__p();var h={};c("NotificationUpdates").subscribe("update-notifications",function(j,k){__p&&__p();var l,m=k.nodes,n=k.payloadsource;if(n===c("NotificationConstants").PayloadSourceType.LIVE_SEND&&m&&m.length)(function(){var o={};m.forEach(function(p){var q=p.alert_id;if(h[q])o[q]=false});if(!c("isEmpty")(o)){h=Object.assign(h,o);c("NotificationUpdates").didUpdateHiddenState(Object.keys(o))}})()});c("NotificationUpdates").subscribe("update-hidden",function(j,k){if(k.hiddenState){var l=k.hiddenState;h=Object.assign(h,l);c("NotificationUpdates").didUpdateHiddenState(Object.keys(l))}});var i={isHidden:function j(k){if(h[k])return h[k];return false}};f.exports=i}),null);
__d("NotificationVPVs",["MarauderLogger","Set","getElementRect"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new(c("Set"))();function i(o){if(j(o))return;c("MarauderLogger").log("notifications_vpv",undefined,null,"notification",o);h.add(o)}function j(o){return h.has(o)}function k(){h.clear()}function l(o,p){if(!o||!p)return false;return!(o.bottom<p.top||o.top>p.bottom||o.right<p.left||o.left>p.right)}function m(o){var p=c("getElementRect")(o);if(!p||p.top==0&&p.bottom==0&&p.left==0&&p.right==0)return null;return p}var n={logImpression:i,clearImpressions:k,hasLoggedImpression:j,getValidatedRectangle:m,areRectsOverlapping:l};f.exports=n}),null);
__d("retry",["regeneratorRuntime","asyncSleep"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,Error);i=h&&h.prototype;function j(G,H,I,J){i.constructor.call(this,G);this.message=G;this.values=H;this.errors=I;this.options=J}function k(G){this.$Retry1=babelHelpers["extends"]({},k.RETRY_OPTION_DEFAULTS,G);this.$Retry2=0;this.$Retry3=false;this.$Retry4=false;this.$Retry5=[];this.$Retry6=[];this.$Retry7=null;this.$Retry8=0;this.$Retry9()}k.prototype.$Retry9=function(){if(this.$Retry1.interval&&this.$Retry1.interval<0)throw new j("C'mon, interval < 0 makes no sense.",[],[],this.$Retry1);if(this.$Retry1.backoff&&this.$Retry1.backoff<1)throw new j("backoff must be >= 1",[],[],this.$Retry1);if(this.$Retry1.jitter&&(this.$Retry1.jitter<0||this.$Retry1.jitter>1))throw new j("jitter must be in range [0, 1]",[],[],this.$Retry1)};k.prototype.onValue=function(){if(!this.$Retry1.retryValues)this.$Retry1.retryValues=[];for(var G=arguments.length,H=Array(G),I=0;I<G;I++)H[I]=arguments[I];this.$Retry1.retryValues=this.$Retry1.retryValues.concat(H);return this};k.prototype.untilValue=function(){for(var G=arguments.length,H=Array(G),I=0;I<G;I++)H[I]=arguments[I];return this.untilValueMatches(function(J){return H.indexOf(J)!==-1})};k.prototype.onFalsy=function(){return this.onValueMatches(function(G){return!G})};k.prototype.onTruthy=function(){return this.onValueMatches(function(G){return!!G})};k.prototype.untilTruthy=function(){return this.onFalsy()};k.prototype.untilFalsy=function(){return this.onTruthy()};k.prototype.onNull=function(){return this.onValueMatches(function(G){return G===null})};k.prototype.onUndefined=function(){return this.onValueMatches(function(G){return G===undefined})};k.prototype.onValueMatches=function(){if(!this.$Retry1.retryValueMatchers)this.$Retry1.retryValueMatchers=[];for(var G=arguments.length,H=Array(G),I=0;I<G;I++)H[I]=arguments[I];this.$Retry1.retryValueMatchers=this.$Retry1.retryValueMatchers.concat(H);return this};k.prototype.untilValueMatches=function(){for(var G=arguments.length,H=Array(G),I=0;I<G;I++)H[I]=arguments[I];return this.onValueMatches.apply(this,H.map(function(J){return function(K){return!J(K)}}))};k.prototype.onError=function(){for(var G=arguments.length,H=Array(G),I=0;I<G;I++)H[I]=arguments[I];if(H.length===0)return this.onErrorMatches(function(J){return true});if(!this.$Retry1.retryErrorClasses)this.$Retry1.retryErrorClasses=[];this.$Retry1.retryErrorClasses=this.$Retry1.retryErrorClasses.concat(H);return this};k.prototype.onErrorMatches=function(){if(!this.$Retry1.retryErrorMatchers)this.$Retry1.retryErrorMatchers=[];for(var G=arguments.length,H=Array(G),I=0;I<G;I++)H[I]=arguments[I];this.$Retry1.retryErrorMatchers=this.$Retry1.retryErrorMatchers.concat(H);return this};k.prototype.limit=function(G){this.$Retry1.retries=G;this.$Retry9();return this};k.prototype.once=function(){return this.limit(1)};k.prototype.twice=function(){return this.limit(2)};k.prototype.withInterval=function(G){this.$Retry1.interval=G;this.$Retry9();return this};k.prototype.withMaxInterval=function(G){this.$Retry1.maxInterval=G;return this};k.prototype.withMinInterval=function(G){this.$Retry1.minInterval=G;return this};k.prototype.withBackoff=function(G){this.$Retry1.backoff=G;this.$Retry9();return this};k.prototype.withJitter=function(G){this.$Retry1.jitter=G;this.$Retry9();return this};k.prototype.abort=function(){this.$Retry3=true};k.prototype.getCallCount=function(){return this.$Retry2};k.prototype.getValues=function(){return this.$Retry5};k.prototype.getErrors=function(){return this.$Retry6};k.prototype.isRunning=function(){return this.$Retry4};k.prototype.call=function G(H){__p&&__p();var I,J;return c("regeneratorRuntime").async(function K(L){__p&&__p();while(1)switch(L.prev=L.next){case 0:if(!this.$Retry4){L.next=2;break}throw new j("Cannot reuse a retry object while it is still running!",[],[],this.$Retry1);case 2:this.$Retry4=true;L.prev=3;this.$Retry7=H;this.$Retry6=[];this.$Retry5=[];case 7:if(!(!this.$Retry1.retries||this.$Retry2<this.$Retry1.retries+1)){L.next=33;break}if(!(this.$Retry2>0)){L.next=12;break}I=this.$Retry10();L.next=12;return c("regeneratorRuntime").awrap(c("asyncSleep")(I));case 12:if(!this.$Retry3){L.next=14;break}throw new j("Retry aborted.",this.$Retry5,this.$Retry6,this.$Retry1);case 14:L.prev=14;this.$Retry2++;L.next=18;return c("regeneratorRuntime").awrap(H());case 18:J=L.sent;this.$Retry5.push(J);if(!this.$Retry11(J)){L.next=22;break}return L.abrupt("continue",7);case 22:return L.abrupt("return",J);case 25:L.prev=25;L.t0=L["catch"](14);this.$Retry6.push(L.t0);if(!this.$Retry12(L.t0)){L.next=30;break}return L.abrupt("continue",7);case 30:throw L.t0;case 31:L.next=7;break;case 33:throw new j("Max call count exceeded.",this.$Retry5,this.$Retry6,this.$Retry1);case 34:L.prev=34;this.$Retry4=false;return L.finish(34);case 37:case"end":return L.stop()}},null,this,[[3,,34,37],[14,25]])};k.prototype.$Retry10=function(){return Math.max(0,this.$Retry13(this.$Retry14()))};k.prototype.$Retry13=function(G){var H=G;if(this.$Retry1.minInterval)H=Math.max(H,this.$Retry1.minInterval);if(this.$Retry1.maxInterval)H=Math.min(H,this.$Retry1.maxInterval);return H};k.prototype.$Retry14=function(){return this.$Retry15()+this.$Retry16()};k.prototype.$Retry17=function(){return this.$Retry1.interval?this.$Retry1.interval:0};k.prototype.$Retry18=function(){return this.$Retry1.backoff?this.$Retry1.backoff:1};k.prototype.$Retry15=function(){var G=this.$Retry17(),H=this.$Retry18();return G*Math.pow(H,this.$Retry2-1)};k.prototype.$Retry16=function(){var G=this.$Retry19(),H=G-this.$Retry8;this.$Retry8=G;return H};k.prototype.$Retry19=function(){var G=this.$Retry1.jitter;if(!G)return 0;var H=Math.random()*2-1,I=H*H*H*G/2,J=this.$Retry17(),K=this.$Retry18(),L=K-1;if(L<1e-6)return J*Math.pow(K,this.$Retry2)*(I+L*(I*I-I)/2);return J*Math.pow(K,this.$Retry2)*(Math.pow(K,I)-1)/(K-1)};k.prototype.$Retry11=function(G){return!!this.$Retry1.retryValues&&this.$Retry1.retryValues.indexOf(G)!==-1||!!this.$Retry1.retryValueMatchers&&this.$Retry1.retryValueMatchers.some(function(H){return H(G)})};k.prototype.$Retry12=function(G){return!!this.$Retry1.retryErrorClasses&&this.$Retry1.retryErrorClasses.some(function(H){return G instanceof H})||!!this.$Retry1.retryErrorMatchers&&this.$Retry1.retryErrorMatchers.some(function(H){return H(G)})};k.RETRY_OPTION_DEFAULTS={interval:1e3,backoff:1,jitter:.25};function l(G,H){return c("regeneratorRuntime").async(function I(J){while(1)switch(J.prev=J.next){case 0:J.next=2;return c("regeneratorRuntime").awrap(new k(H).call(G));case 2:return J.abrupt("return",J.sent);case 3:case"end":return J.stop()}},null,this)}l.Retry=k;l.RetryError=j;function m(){var G;return(G=new k()).onValue.apply(G,arguments)}l.onValue=m;function n(){var G;return(G=new k()).untilValue.apply(G,arguments)}l.untilValue=n;function o(){return new k().onFalsy()}l.onFalsy=o;function p(){return new k().onTruthy()}l.onTruthy=p;function q(){return new k().untilTruthy()}l.untilTruthy=q;function r(){return new k().untilFalsy()}l.untilFalsy=r;function s(){return new k().onNull()}l.onNull=s;function t(){return new k().onUndefined()}l.onUndefined=t;function u(){var G;return(G=new k()).onValueMatches.apply(G,arguments)}l.onValueMatches=u;function v(){var G;return(G=new k()).untilValueMatches.apply(G,arguments)}l.untilValueMatches=v;function w(){var G;return(G=new k()).onError.apply(G,arguments)}l.onError=w;function x(){var G;return(G=new k()).onErrorMatches.apply(G,arguments)}l.onErrorMatches=x;function y(G){return new k().limit(G)}l.limit=y;function z(){return new k().once()}l.once=z;function A(){return new k().twice()}l.twice=A;function B(G){return new k().withInterval(G)}l.withInterval=B;function C(G){return new k().withMaxInterval(G)}l.withMaxInterval=C;function D(G){return new k().withMinInterval(G)}l.withMinInterval=D;function E(G){return new k().withBackoff(G)}l.withBackoff=E;function F(G){return new k().withJitter(G)}l.withJitter=F;f.exports=l}),null);
__d("NotificationList.react",["regeneratorRuntime","Promise","Arbiter","FunnelLogger","NotificationBucketStore","NotificationConstants","NotificationHiddenState","NotificationJewelFunnelLoggingConstants","NotificationListConfig","NotificationsDefaultEndpointURI","NotificationSeenState","NotificationStore","NotificationUpdates","NotificationUserActions","NotificationVPVs","NotifType","React","SubscriptionsHandler","TimeSlice","createCancelableFunction","getObjectValues","isEmpty","mapObject","retry"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("NotificationJewelFunnelLoggingConstants").FUNNEL_LOGGING_NAME,k=c("NotificationJewelFunnelLoggingConstants").FUNNEL_LOGGING_EVENT,l=c("React").PropTypes,m=c("NotificationConstants").PayloadSourceType.LIVE_SEND,n=3,o="notification_clicked";function p(r){return{classification:r.classification,endpointURI:r.endpoint!=null?r.endpoint:c("NotificationsDefaultEndpointURI"),readness:r.readness}}h=babelHelpers.inherits(q,c("React").Component);i=h&&h.prototype;function q(r){__p&&__p();var s;"use strict";for(var t=arguments.length,u=Array(t>1?t-1:0),v=1;v<t;v++)u[v-1]=arguments[v];(s=i.constructor).call.apply(s,[this,r].concat(u));this.$NotificationList1={};this.$NotificationList2=false;this.$NotificationList3=new(c("SubscriptionsHandler"))();this.$NotificationList4=0;this.$NotificationList9=function(){this.setState({retryLimitReached:false});this.$NotificationList10()}.bind(this);this.$NotificationList11=function(){var y={};Object.keys(this.$NotificationList1).forEach(function(z){var A=c("NotificationHiddenState").isHidden(z);if(A!=this.state.hiddenState[z])y[z]=A}.bind(this));if(!c("isEmpty")(y))this.setState({hiddenState:babelHelpers["extends"]({},this.state.hiddenState,y)});this.$NotificationList1={};this.$NotificationList8(c("NotificationStore").getCount(p(this.props)))}.bind(this);this.$NotificationList12=function(y,z,A){if(this.state.currentlyFetching||!this.state.canFetchMore)return;if(y){c("FunnelLogger").appendAction(j,k.FETCH_NEXT_SET);this.$NotificationList10()}this.$NotificationList13(z,A)}.bind(this);this.$NotificationList14=function(){this.setState({showingChevron:true})}.bind(this);this.$NotificationList15=function(){this.setState({showingChevron:false})}.bind(this);this.$NotificationList18=function(y){c("Arbiter").inform(o,{endpointConfig:p(this.props),alertID:y})}.bind(this);this.$NotificationList19=function(y){if(this.props.paused&&this.props.readness==="UNREAD"){var z=babelHelpers["extends"]({},this.state.readWhilePausedOrNavigating);z[y]=true;this.setState({readWhilePausedOrNavigating:z})}}.bind(this);this.$NotificationList20=function(y){this.$NotificationList4=y}.bind(this);var w=p(r);c("NotificationStore").registerEndpoint(w);var x=c("NotificationStore").getAll(w);this.state={currentlyFetching:false,canFetchMore:c("NotificationStore").canFetchMore(w),notifs:x,hiddenState:c("mapObject")(x,function(y,z){return c("NotificationHiddenState").isHidden(z)}),readState:c("mapObject")(x,function(y,z){return c("NotificationSeenState").isRead(z)}),showingChevron:false,readWhilePausedOrNavigating:{},retryLimitReached:false}}q.prototype.componentWillMount=function(){"use strict";__p&&__p();c("FunnelLogger").appendAction(j,k.FETCH_NOTIFICATIONS);this.$NotificationList3.addSubscriptions(c("NotificationUpdates").subscribe("notifications-updated",function(r,s){if(s.source==m&&!c("isEmpty")(s.updates)){this.$NotificationList2=true;var t=this.props.paused;if(t){this.$NotificationList1=babelHelpers["extends"]({},this.$NotificationList1,s.updates);return}}this.$NotificationList5(c("NotificationStore").getAll(p(this.props)))}.bind(this)),c("NotificationUpdates").subscribe(["hidden-state-updated","read-state-updated"],function(r,s){__p&&__p();if(r=="hidden-state-updated"){if(s.source!==m||!this.props.paused){var t=c("mapObject")(s.updates,function(v,w){return c("NotificationHiddenState").isHidden(w)});this.setState({hiddenState:babelHelpers["extends"]({},this.state.hiddenState,t)})}}else{var u=c("mapObject")(s.updates,function(v,w){return c("NotificationSeenState").isRead(w)});this.setState({readState:babelHelpers["extends"]({},this.state.readState,u)})}}.bind(this)))};q.prototype.componentWillUnmount=function(){"use strict";this.$NotificationList3.release()};q.prototype.componentWillReceiveProps=function(r){"use strict";if(!this.$NotificationList6(r)&&r.paused)return;if(this.props.enableHubView&&this.props.readness==="UNREAD")return;this.setState({readWhilePausedOrNavigating:{}})};q.prototype.$NotificationList6=function(r){"use strict";return r.classification!==this.props.classification||r.readness!==this.props.readness};q.prototype.$NotificationList7=function(r){"use strict";__p&&__p();var s=Object.keys(this.state.notifs),t=Object.keys(r).filter(function(v){return!this.state.notifs[v]}.bind(this));s=s.concat(t);var u={};s.forEach(function(v){if(this.$NotificationList1[v]){if(this.state.notifs[v])u[v]=this.state.notifs[v]}else u[v]=r[v]||this.state.notifs[v]}.bind(this));return u};q.prototype.$NotificationList5=function(r){"use strict";var s=c("isEmpty")(this.$NotificationList1)?r:this.$NotificationList7(r),t={},u={};c("getObjectValues")(s).forEach(function(w){var x=w.alert_id;t[x]=c("NotificationSeenState").isRead(x);u[x]=c("NotificationHiddenState").isHidden(x)});var v=p(this.props);this.setState({notifs:s,canFetchMore:c("NotificationStore").canFetchMore(v)||c("NotificationStore").getCount(v)!==Object.keys(s).length,readState:babelHelpers["extends"]({},this.state.readState,t),hiddenState:babelHelpers["extends"]({},this.state.hiddenState,u)})};q.prototype.$NotificationList8=function r(s){__p&&__p();var t,u,v;return c("regeneratorRuntime").async(function w(x){__p&&__p();while(1)switch(x.prev=x.next){case 0:"use strict";this.setState({currentlyFetching:true});t=p(this.props);u=c("createCancelableFunction")(function(){this.setState({currentlyFetching:false,retryLimitReached:true})}.bind(this));this.$NotificationList3.addSubscriptions({remove:function y(){u.cancel()}});v=c("retry").limit(n).onError().withBackoff(2).withInterval(100).withJitter(.1);x.prev=6;x.next=9;return c("regeneratorRuntime").awrap(v.call(function(){__p&&__p();return new(c("Promise"))(function(y,z){var A=c("NotificationStore").getNotifications(s,t,function(C){this.$NotificationList5(C);if(Object.keys(C).length<s&&c("NotificationStore").canFetchMore(t))z();else y()}.bind(this)),B=A.remove;this.$NotificationList3.addSubscriptions({remove:function C(){B();v.abort();z()}})}.bind(this))}.bind(this)));case 9:this.setState({currentlyFetching:false});x.next=19;break;case 12:x.prev=12;x.t0=x["catch"](6);if(!(x.t0 instanceof c("retry").RetryError)){x.next=18;break}u();x.next=19;break;case 18:throw x.t0;case 19:case"end":return x.stop()}},null,this,[[6,12]])};q.prototype.$NotificationList10=function(){"use strict";if(!this.state.currentlyFetching){var r=Object.keys(this.state.notifs).length;this.$NotificationList8(r+this.props.numPerPage)}};q.prototype.$NotificationList13=function(r,s){"use strict";__p&&__p();if(!r||!s)return;for(var t=0,u=r.children.length;t<u;t++){var v=r.children[t];if(v){var w=v.getAttribute("data-alert-id");if(w&&!c("NotificationVPVs").hasLoggedImpression(w)){var x=c("NotificationVPVs").getValidatedRectangle(v);if(x&&c("NotificationVPVs").areRectsOverlapping(s,x))c("NotificationVPVs").logImpression(w)}}}};q.prototype.$NotificationList16=function(r){"use strict";if(c("NotificationListConfig").requestFullViewportOfNotificationsOnFirstOpen){var s=Math.max(this.props.numPerPage,Math.ceil(this.$NotificationList4));if(s>0)this.$NotificationList8(s)}else if(r.length>this.props.numPerPage)this.$NotificationList8(r.length);else this.$NotificationList10()};q.prototype.$NotificationList17=function(r){"use strict";__p&&__p();var s=c("NotificationSeenState").getUnseenIDs();if(!c("isEmpty")(this.$NotificationList1))s=s.filter(function(t){return!this.$NotificationList1[t]}.bind(this));if(s.length&&(this.props.paused||this.props.enableHubView))c("TimeSlice").guard(function(){return c("NotificationUserActions").markNotificationsAsSeen(s)},"NotificationList _populateList markNotificationsAsSeen",{propagationType:c("TimeSlice").PropagationType.ORPHAN})();if(this.props.hasEverBeenOpened)if(!r||!r.hasEverBeenOpened)this.$NotificationList16(s)};q.isReaction=function(r){"use strict";return r===c("NotifType").LIKE||r===c("NotifType").OPEN_GRAPH_ACTION_LIKE||r===c("NotifType").LIKE_TAGGED||r===c("NotifType").PAGE_FAN||r===c("NotifType").IG_MEDIA_LIKE||r===c("NotifType").FEEDBACK_REACTION_GENERIC||r===c("NotifType").FEEDBACK_REACTION_GENERIC_TAGGED||r===c("NotifType").MESSENGER_REACTIONS};q.prototype.componentDidUpdate=function(r){__p&&__p();var s,t=this,u;"use strict";this.$NotificationList17(r);if(r.paused&&!this.props.paused){var s=function(){t.$NotificationList2=false;var v=setTimeout(t.$NotificationList11,0);t.$NotificationList3.addSubscriptions({remove:function w(){clearTimeout(v)}});return{v:void 0}}();if(typeof s==="object")return s.v}if(this.props.paused&&this.$NotificationList6(r)){var u=function(){var v=setTimeout(t.$NotificationList11,0);t.$NotificationList3.addSubscriptions({remove:function w(){clearTimeout(v)}});return{v:void 0}}();if(typeof u==="object")return u.v}};q.prototype.componentDidMount=function(){"use strict";this.$NotificationList17()};q.prototype.render=function(){__p&&__p();var r;"use strict";var s=this.props.listRenderer,t=this.state,u=t.notifs,v=t.readState,w=t.readWhilePausedOrNavigating,x={};if(this.props.readness==null)x=u;else Object.keys(u).forEach(function(A){var B=u[A],C=B.alert_id,D=v[C];if(this.props.readness==="UNREAD")D=!D||Object.prototype.hasOwnProperty.call(w,C);if(D)x[C]=B}.bind(this));if(this.props.hideReactions)(function(){var A={};Object.keys(x).forEach(function(B){var C=u[B];if(!q.isReaction(C.notif_type))A[C.alert_id]=C});x=A})();var y=this.props.classification;if(y)Object.keys(u).forEach(function(A){var B=u[A];if(!B.classifications||!B.classifications.includes(y))delete x[B.alert_id]});var z=!c("NotificationBucketStore").isEmptyBucketListData()?c("NotificationBucketStore").getBucketListData():null;return c("React").createElement(s,{paused:this.props.paused,target:this.props.target,tracking:this.props.tracking,shortenTimestamp:this.props.shortenTimestamp,maxHeight:this.props.maxHeight,useChevron:this.props.useChevron,chevronType:this.props.chevronType,buckets:z,notifs:x,afterScroll:this.$NotificationList12,onChevronShow:this.$NotificationList14,onChevronHide:this.$NotificationList15,currentlyFetching:this.state.currentlyFetching,canFetchMore:this.state.canFetchMore,hiddenState:this.state.hiddenState,readState:this.state.readState,showingChevron:this.state.showingChevron,shouldScroll:this.$NotificationList2,upsell:this.props.upsell||null,isRHC:this.props.isRHC,enableMarkUnread:this.props.enableMarkUnread,onClick:this.$NotificationList18,onRead:this.$NotificationList19,onNumNotificationsViewableChange:this.$NotificationList20,onResetRetryCount:this.$NotificationList9,retryLimitReached:this.state.retryLimitReached})};q.propTypes={hasEverBeenOpened:l.bool,enableHubView:l.bool,enableMarkUnread:l.bool,maxHeight:l.number,paused:l.bool,tracking:l.string,useChevron:l.bool,chevronType:l.string,numPerPage:l.number.isRequired,listRenderer:l.func.isRequired,upsell:l.object,endpoint:l.string,readness:l.string,classification:l.string};f.exports=q}),null);
__d("NotificationListDelightUtils",["RelationshipDelightUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=-1,i={canShowHeartDelight:function j(k,l,m){if(l)return false;if(!c("RelationshipDelightUtils").shouldHeartNotification(k))return false;if(h<0||h>m)h=m;return true},getFirstDelightRow:function j(){return h}};f.exports=i}),null);
__d("NotificationListDelights.react",["cx","BootloadedComponent.react","JSResource","NotificationListDelightUtils","NotificationSeenState","React","RelationshipDelightUtils"],(function a(b,c,d,e,f,g,h){"use strict";var i=-1;function j(k){var l=k.rowIndex,m=k.notification,n=m.alert_id,o=c("NotificationListDelightUtils").getFirstDelightRow()===l&&!c("NotificationSeenState").isSeen(n)?1:2;c("RelationshipDelightUtils").logNotificationAnimation(n,o,l);return c("React").createElement("div",{className:"_3u5l _3u5m"},c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("RelationshipDelightsActorAnimation.react").__setRef("NotificationListDelights.react"),animationPhase:o}))}f.exports=j}),null);
__d("NotificationListItem.react",["cx","Bootloader","Event","Keys","Link.react","NotificationListConfig","NotificationListDelights.react","NotificationListDelightUtils","NotificationListItemBaseModule","NotificationListRendererUtils","NotificationURI","NotificationUserActions","PageTransitions","React","URI"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("NotificationListItemBaseModule").NotificationListItemBase;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$NotificationListItem5=function(r){__p&&__p();var s,t=this.props.notification,u=t.primerAttributes,v=t.url;if(u&&u.ajaxify)(function(){var z=new(c("URI"))(u.ajaxify),A=z.getQueryData(),B=A.app_id,C=A.page_id,D=A.post_id,E=A.ref;if(E==="aymt_auto_opened_dialog")c("Bootloader").loadModules(["BoostedComponentAYMTActionsV2"],function(F){F.aymtAutoOpenDialogLinkClick(B,C,D,E)},"NotificationListItem.react")})();else if(v){var w=new(c("URI"))(v),x=w.getQueryData(),y=x.aymt_tip;if(y==="1")c("PageTransitions").go(w.addQueryData("aymt_link_click",Date.now()))}}.bind(this),this.$NotificationListItem6=function(r){this.props.onClick&&this.props.onClick(this.$NotificationListItem4());this.$NotificationListItem7(r);c("NotificationListRendererUtils").openNotification(r,this.props.notification)}.bind(this),this.$NotificationListItem8=function(r){if(c("Event").getKeyCode(r.nativeEvent)==c("Keys").RETURN){var s=this.$NotificationListItem4();this.props.onSelected&&this.props.onSelected(s);this.$NotificationListItem7(r)}}.bind(this),this.$NotificationListItem7=function(r){var s=this.$NotificationListItem4();if(this.props.onRead&&r)this.props.onRead(s);c("NotificationUserActions").markNotificationsAsRead([s],null)}.bind(this),this.$NotificationListItem9=function(){var r=this.$NotificationListItem4();c("NotificationUserActions").markNotificationsAsUnread([r],null)}.bind(this),this.$NotificationListItem11=function(r){var s=void 0;if(!c("NotificationListRendererUtils").isStoryOnlyLiveVideoNotification(this.props.notification))s=c("NotificationURI").localize(new(c("URI"))(this.props.notification.url));return c("React").createElement("a",babelHelpers["extends"]({},this.props.notification.primerAttributes,{target:this.props.target?this.props.target:"_self",href:s,role:"button",tabIndex:0,className:"_33e _1_0e",onClick:this.$NotificationListItem5,onClickCapture:this.$NotificationListItem6,onKeyUp:this.$NotificationListItem8}),r,this.$NotificationListItem10())}.bind(this),n}l.prototype.$NotificationListItem2=function(){return c("NotificationListConfig").canMarkUnread||(this.props.enableHubView||false)&&c("NotificationListConfig").canMarkUnreadInHub};l.prototype.$NotificationListItem3=function(){var m=this.props,n=m.notification,o=m.isRead,p=m.rowIndex;return c("NotificationListDelightUtils").canShowHeartDelight(n,o,p)};l.prototype.$NotificationListItem4=function(){return this.props.notification.alert_id};l.prototype.$NotificationListItem10=function(){if(!this.$NotificationListItem3()||!this.props.paused)return null;return c("React").createElement(c("NotificationListDelights.react"),{notification:this.props.notification,rowIndex:this.props.rowIndex})};l.prototype.render=function(){return c("React").createElement(k,babelHelpers["extends"]({},this.props,{canMarkUnread:this.$NotificationListItem2(),hasCustomForeground:this.$NotificationListItem3(),renderLink:this.$NotificationListItem11,onMarkItemRead:this.$NotificationListItem7,onMarkItemUnread:this.$NotificationListItem9,hideIcon:false}))};f.exports=l}),null);
__d("NotificationListPropTypes",["React"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").PropTypes,i={tracking:h.string,notifs:h.object,afterScroll:h.func,onChevronShow:h.func,onChevronHide:h.func,onRead:h.func,canFetchMore:h.bool,hiddenState:h.object,readState:h.object,showingChevron:h.bool,paused:h.bool,maxHeight:h.number,shouldScroll:h.bool,listItemRenderer:h.func};f.exports=i}),null);
__d("NotificationPageList.react",["cx","fbt","ErrorBoundary.react","Event","LoadingIndicator.react","LogicalGrid.react","NotificationListItem.react","NotificationListPropTypes","NotifTestIDs","React","ReactDOM","Vector","debounce","getObjectValues","getViewportDimensions","isEmpty"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){__p&&__p();var m,n;"use strict";for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$NotificationPageList5=function(){var r=c("ReactDOM").findDOMNode(this.$NotificationPageList2),s=this.$NotificationPageList4();if(this.props.afterScroll)this.props.afterScroll(this.$NotificationPageList3(),r,s)}.bind(this),this.$NotificationPageList7=function(){return c("getObjectValues")(this.props.notifs).map(function(r){return JSON.stringify(r)})}.bind(this),n}l.prototype.$NotificationPageList3=function(){"use strict";if(!this.$NotificationPageList1)return false;var m=c("ReactDOM").findDOMNode(this.$NotificationPageList1);if(!m)return false;var n=c("Vector").getElementPosition(m,"viewport").y;return n<c("Vector").getViewportDimensions().y};l.prototype.$NotificationPageList4=function(){"use strict";var m=c("getViewportDimensions").withoutScrollbars();return{top:0,bottom:m.height,left:0,right:m.width}};l.prototype.$NotificationPageList6=function(m,n){"use strict";return n.indexOf(m)};l.prototype.componentDidUpdate=function(){"use strict";this.$NotificationPageList5()};l.prototype.componentDidMount=function(){"use strict";c("Event").listen(window,"scroll",c("debounce")(this.$NotificationPageList5,200));this.$NotificationPageList5()};l.prototype.$NotificationPageList8=function(){"use strict";var m=c("getObjectValues")(this.props.notifs).map(function(o){return o.alert_id}),n=this.props.listItemRenderer;return c("getObjectValues")(this.props.notifs).map(function(o,p){var q=o.alert_id,r=this.$NotificationPageList6(q,m);return c("React").createElement(c("ErrorBoundary.react"),{key:q},c("React").createElement(n,{getDebugData:this.$NotificationPageList7,enableMarkUnread:this.props.enableMarkUnread,isNotifsPage:true,isRead:this.props.readState[q],isSelected:this.props.selectedID===q,noPhotoPreviews:true,notification:o,onRead:this.props.onRead,onChevronHide:this.props.onChevronHide,onChevronShow:this.props.onChevronShow,paused:!!this.props.paused,row:r,rowIndex:p,shortenTimestamp:this.props.shortenTimestamp,visible:!this.props.hiddenState[q]}))}.bind(this))};l.prototype.render=function(){"use strict";__p&&__p();var m=null,n=null,o=c("React").createElement("ul",{"data-gt":this.props.tracking,"data-testid":c("NotifTestIDs").SEE_ALL_LIST});if(!c("isEmpty")(this.props.notifs))m=c("React").createElement(c("LogicalGrid.react"),{ref:function(s){return this.$NotificationPageList2=s}.bind(this),component:o},this.$NotificationPageList8());else if(!this.props.canFetchMore)m=c("React").createElement("div",{className:"_44_s","data-testid":c("NotifTestIDs").SEE_ALL_LIST},i._("\uc0c8 \uc54c\ub9bc\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."));if(this.props.canFetchMore)n=c("React").createElement(c("LoadingIndicator.react"),{color:"white",size:"large",ref:function(s){return this.$NotificationPageList1=s}.bind(this),className:"_44_t"});var p=null;if(this.props.upsell){var q=this.props.upsell.module;p=c("React").createElement(q,babelHelpers["extends"]({isPage:true},this.props.upsell.props))}var r="_44_u"+(this.props.showingChevron?" _44_v":"");return c("React").createElement("div",{className:r},p,m,n)};l.propTypes=c("NotificationListPropTypes");l.defaultProps={listItemRenderer:c("NotificationListItem.react")};f.exports=l}),null);
__d("DeprecatedCSSMiscellany",["$","ge","CSS"],(function a(b,c,d,e,f,g){__p&&__p();function h(){for(var m=0;m<arguments.length;m++){var n=c("ge")(arguments[m]);if(n)c("CSS").show(n)}return false}function i(){for(var m=0;m<arguments.length;m++){var n=c("ge")(arguments[m]);if(n)c("CSS").hide(n)}return false}function j(m){m=c("ge")(m);if(m)return c("CSS").shown(m);else return false}function k(){for(var m=0;m<arguments.length;m++){var n=c("$")(arguments[m]);if(n)c("CSS").toggle(n)}return false}function l(){for(var m=0;m<arguments.length;m++){var n=c("$")(arguments[m]);if(n)c("CSS").toggle(n)}return false}f.exports={show:h,hide:i,shown:j,toggle:k,toggleDisplayNone:l}}),null);
__d("MobileSmsActivationController",["AsyncRequest","AsyncResponse","Dialog","goURI","ge","ReloadPage","$","DeprecatedCSSMiscellany"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("DeprecatedCSSMiscellany").hide,i=c("DeprecatedCSSMiscellany").show;function j(k,l,m,n,o,p){Object.assign(this,{profile_id:k,parent:parent,source:l,misc:m,carrier:null,AJAX_URI:"/ajax/mobile/activation.php",redirect_uri:null,cb_obj:n,status_id:p||"mobile_throbber"});if(o)this.goVerification();else this.start();j.instance=this}j.instance={};j.getInstance=function(){return j.instance};j.show_carriers=function(){var k=c("$")("selected_country").value,l=c("$")("carrier_country").value;if(k)h(c("$")(k+"_carrier_select"));c("$")("selected_country").value=l;c("$")("selected_carrier").value=0;i(c("$")(l+"_carrier_select"))};j.update_carrier=function(){var k=c("$")("selected_country").value+"_carrier_select";c("$")("selected_carrier").value=c("$")(k).value};Object.assign(j.prototype,{goStep:function k(l){if(l==2){this.getShortCode();return}else if(l==3){this.getConfirmCode();return}this.start()},start:function k(l){new(c("AsyncRequest"))().setURI(this.AJAX_URI).setData({profile_id:this.profile_id,get_carriers:1,source:this.source,misc:this.misc,error:l}).setHandler(this.showCarriers.bind(this)).setStatusElement(c("$")(this.status_id)).send()},showCarriers:function k(l){var m=l.getPayload();if(!m)return;if(this.cb_obj&&this.cb_obj.onShowCarriers)this.cb_obj.onShowCarriers(m);else new(c("Dialog"))().setTitle(m.title).setBody(m.html).setHandler(this.getShortCode.bind(this)).setButtons([c("Dialog").NEXT,c("Dialog").CANCEL]).show()},getShortCode:function k(){__p&&__p();if(!this.carrier){this.carrier=parseInt(c("$")("selected_carrier").value,10);if(!this.carrier){this.start(true);return false}}c("Dialog").getCurrent()&&c("Dialog").getCurrent().setButtonsMessage('<img src="/images/loaders/indicator_blue_small.gif" />');new(c("AsyncRequest"))().setURI(this.AJAX_URI).setData({profile_id:this.profile_id,get_code:1,carrier:this.carrier,source:this.source,misc:this.misc}).setHandler(this.showShortCode.bind(this)).send();return false},showShortCode:function k(l){var m=l.getPayload();if(this.cb_obj&&this.cb_obj.onShowShortCode)this.cb_obj.onShowShortCode(m);else new(c("Dialog"))().setTitle(m.title).setBody(m.html).setHandler(this.activate.bind(this)).setButtons([c("Dialog").NEXT,c("Dialog").CANCEL]).show()},activate:function k(){var l=c("$")("sms_code").value;if(!l)return;var m=c("ge")("profile_add");m=m?m.checked:null;var n=c("ge")("message_on");n=n?n.checked:null;new(c("AsyncRequest"))().setURI(this.AJAX_URI).setData({profile_id:this.profile_id,confirm:1,code:l,profile_add:m,message_on:n,source:this.source,misc:this.misc}).setHandler(this.confirmCode.bind(this)).setErrorHandler(this.confirmCode.bind(this)).send()},confirmCode:function k(l){__p&&__p();var m=l.getPayload();if(!l.error&&m.success)if(this.cb_obj&&this.cb_obj.onActivationSuccess)this.cb_obj.onActivationSuccess(m);else{if(m.redirect_now){c("goURI")(m.redirect,m.force_redirect);return}if(m.redirect==null)return;this.redirect_uri=m.redirect;new(c("Dialog"))().setTitle(m.title).setBody(m.html).setHandler(this.redirect.bind(this)).setButtons([c("Dialog").OK]).show()}else if(this.cb_obj&&this.cb_obj.onActivationFailure)this.cb_obj.onActivationFailure(l);else c("AsyncResponse").defaultErrorHandler.call(this,l)},redirect:function k(){if(this.redirect_uri=="reload")c("ReloadPage").now();else c("goURI")(this.redirect_uri)},goVerification:function k(){new(c("AsyncRequest"))().setURI(this.AJAX_URI).setData({profile_id:this.profile_id,show_verification:1,source:this.source,misc:this.misc}).setHandler(this.displayVerification.bind(this)).send();return false},displayVerification:function k(l){var m=l.getPayload();if(this.cb_obj&&this.cb_obj.onDisplayVerification)this.cb_obj.onDisplayVerification(m);else new(c("Dialog"))().setTitle(m.title).setBody(m.html).setHandler(this.completeVerification.bind(this,l)).setButtons([c("Dialog").OK]).show()},completeVerification:function k(l){var m=l.getPayload();if(this.cb_obj)this.cb_obj.onVerificationComplete(m)}});f.exports=j}),null);
__d("legacy:mobile-sms-activation",["MobileSmsActivationController"],(function a(b,c,d,e,f,g){b.MobileSmsActivationController=c("MobileSmsActivationController");b.mobile_activation_show_carriers=c("MobileSmsActivationController").show_carriers;b.mobile_activation_update_carrier=c("MobileSmsActivationController").update_carrier}),3);
__d("SettingsMobileRemoveLink",["AsyncRequest","DOMQuery","Button","Event"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j,k,l,m){"use strict";__p&&__p();this.$SettingsMobileRemoveLink1=i;this.$SettingsMobileRemoveLink2=j;this.$SettingsMobileRemoveLink3=k;c("Event").listen(i,"click",function(){j.conditionShow(!j.isShown())});if(k.canDelete)j.subscribe("confirm",this.$SettingsMobileRemoveLink4.bind(this));if(l&&m)c("Event").listen(l,"change",function(n){c("Button").setEnabled(m,n.target.checked)})}h.prototype.getRoot=function(){"use strict";return this.$SettingsMobileRemoveLink1};h.prototype.getLink=function(){"use strict";return c("DOMQuery").find(this.getRoot(),"a")};h.prototype.$SettingsMobileRemoveLink4=function(){"use strict";this.$SettingsMobileRemoveLink2.hide();new(c("AsyncRequest"))("/ajax/settings/mobile/delete_phone.php").setData({phone_number:this.$SettingsMobileRemoveLink3.phoneNumber,profile_id:this.$SettingsMobileRemoveLink3.profileID,shared:this.$SettingsMobileRemoveLink3.shared}).send()};f.exports=h}),null);