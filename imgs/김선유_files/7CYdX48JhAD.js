if (self.CavalryLogger) { CavalryLogger.start_js(["gXw4T"]); }

__d("OptimisticPostMetadata.react",["cx","React","XUIText.react","Link.react","BackgroundImage.react","getDOMImageSize"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=470,l=263,m=472;i=babelHelpers.inherits(n,c("React").Component);j=i&&i.prototype;function n(){var o,p;"use strict";for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.state={height:l},this.onGetSize=function(t,u,v){var w=t<u?k:l;this.setState({height:w})}.bind(this),p}n.prototype.componentDidMount=function(){"use strict";c("getDOMImageSize")(this.props.image,this.onGetSize)};n.prototype.render=function(){"use strict";return c("React").createElement("div",null,c("React").createElement("div",{className:"_1gi0"},c("React").createElement(c("XUIText.react"),{size:"body2",weight:"bold",display:"block"},c("React").createElement(c("Link.react"),null,this.props.title)),c("React").createElement(c("XUIText.react"),{size:"body2",weight:"normal",display:"block"},this.props.description)),c("React").createElement("div",{className:"_2bc-"},c("React").createElement(c("BackgroundImage.react"),{src:this.props.image,backgroundSize:"contain",width:m,height:this.state.height})))};f.exports=n}),null);
__d("OptimisticPostMetadataWithoutThumbnail.react",["cx","EventListener","OptimisticPostMetadata.react","React","ReactDOM","generateVideoThumbnails"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;"use strict";for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={thumbnail:""},this.$OptimisticPostMetadataWithoutThumbnail1=null,this.generateVideoThumbnails=function(){var q=c("ReactDOM").findDOMNode(this.refs.videoPlayer);c("generateVideoThumbnails")(q,200,200,1).done(function(r){this.setState({thumbnail:r.thumbnails[0].getURL()})}.bind(this))}.bind(this),m}k.prototype.componentDidMount=function(){"use strict";var l=c("ReactDOM").findDOMNode(this.refs.videoPlayer);this.$OptimisticPostMetadataWithoutThumbnail1=c("EventListener").listen(l,"loadedmetadata",this.generateVideoThumbnails)};k.prototype.componentWillUnmount=function(){"use strict";if(this.$OptimisticPostMetadataWithoutThumbnail1){this.$OptimisticPostMetadataWithoutThumbnail1.remove();this.$OptimisticPostMetadataWithoutThumbnail1=null}};k.prototype.render=function(){"use strict";return c("React").createElement("div",null,c("React").createElement(c("OptimisticPostMetadata.react"),{title:this.props.title,description:this.props.description,image:this.state.thumbnail}),c("React").createElement("video",{key:"videoPlayer",ref:"videoPlayer",className:"_2mpk",src:this.props.videoFileUrl}))};f.exports=k}),null);
__d("OptimisticPostUFISection.react",["cx","fbt","Image.react","React","UFICommentLink.react","UFILikeLink.react","UFIShareLink.react","XUICardSection.react","XUIPopoverButton.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){"use strict";var m=null;if(this.props.isPagePost)m=c("React").createElement("div",{className:"_1f6t _3uni"},c("React").createElement("div",{className:"_3m9g"},c("React").createElement("div",{className:"_40yk"},c("React").createElement(c("XUIPopoverButton.react"),{haschevron:true,image:c("React").createElement(c("Image.react"),{width:16,height:16,src:this.props.profilePicture}),ref:"open-menu-button",suppressed:true,type:"button"}))));return c("React").createElement(c("XUICardSection.react"),null,c("React").createElement("div",{className:"_sa_"},m,c("React").createElement("div",{className:"_a7s _3399"},c("React").createElement("div",{className:"_524d"},c("React").createElement("div",{className:"_42nr"},c("React").createElement("span",null,c("React").createElement(c("UFILikeLink.react"),{likeAction:true})),c("React").createElement("span",null,c("React").createElement(c("UFICommentLink.react"),null,i._("\ub313\uae00 \ub2ec\uae30"))),c("React").createElement("span",null,c("React").createElement(c("UFIShareLink.react"),{href:"#"})))))))};function l(){"use strict";j.apply(this,arguments)}f.exports=l}),null);
__d("StoryProfile.react",["cx","BackgroundImage.react","FBProfilePhotoShadow.react","Image.react","ImageBlock.react","InlineBlock.react","Link.react","PrivacyConst","React","XUIGrayText.react","XUIText.react","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;"use strict";for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$StoryProfile1=function(){__p&&__p();var r=null;if(this.props.privacyIndicator)r=this.props.privacyIndicator;else if(this.props.privacySetting){var s=this.props.privacySetting==c("PrivacyConst").BaseValue.EVERYONE,t=this.props.privacySetting==c("PrivacyConst").BaseValue.ALL_FRIENDS;r=c("React").createElement(c("BackgroundImage.react"),{width:13,height:12,"data-hover":"tooltip","data-tooltip-content":this.props.privacyTooltip,className:"_14g-"+(s?" _14g_":"")+(t?" _5qhp":"")+(!t&&!s?" _14h0":"")})}if(!r)return null;return c("React").createElement("span",null,c("React").createElement(c("XUIGrayText.react"),{shade:"light",size:"meta1",display:"inline"},"\xa0\xb7\xa0"),r)}.bind(this),this.$StoryProfile2=function(){__p&&__p();var r,s;if(this.props.profileURL){var t;if(this.props.openProfileURLInNewPage)t="_blank";s="bold";r=c("React").createElement(c("Link.react"),{href:this.props.profileURL,target:t},this.props.username)}else r=this.props.username;if(this.props.description)return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{className:"_14gz",size:"body2",weight:s},r)," ",this.props.description);else return c("React").createElement(c("XUIText.react"),{className:"_14gz",size:"body2",weight:s,display:"block"},r)}.bind(this),this.$StoryProfile3=function(){if(this.props.additionalLinks)return c("React").createElement(c("XUIGrayText.react"),{shade:"light",size:"meta1",display:"inline"},this.props.additionalLinks.map(function(r,s){return c("React").createElement("span",{key:s},"\xa0\xb7\xa0",c("React").createElement(c("Link.react"),{href:r.URL,target:"_blank"},r.text))}));return null}.bind(this),n}l.prototype.render=function(){"use strict";return c("React").createElement(c("ImageBlock.react"),{spacing:"medium",className:c("joinClasses")(this.props.className,"_56-3")},this.props.profilePicture?c("React").createElement(c("FBProfilePhotoShadow.react"),null,c("React").createElement(c("Image.react"),{className:"_56-4",src:this.props.profilePicture})):c("React").createElement("span",null),c("React").createElement(c("InlineBlock.react"),{alignv:"middle",height:40,fullWidth:true},this.$StoryProfile2(),c("React").createElement("div",null,c("React").createElement(c("XUIGrayText.react"),{shade:"light",size:"meta1",display:"inline"},this.props.uploadTime),this.$StoryProfile1(),this.$StoryProfile3())))};l.propTypes={privacySetting:k.number,privacyIndicator:k.object,profilePicture:k.string,privacyTooltip:k.node,username:k.string.isRequired,uploadTime:k.node.isRequired,profileURL:k.string,openProfileURLInNewPage:k.bool,additionalLinks:k.arrayOf(k.shape({URL:k.string,text:k.node})),description:k.node};l.defaultProps={openProfileURLInNewPage:false};f.exports=l}),null);
__d("OptimisticVideoPost.react",["fbt","cx","ActorURI","AsyncRequest","Layout.react","LeftRight.react","OptimisticPostMetadata.react","OptimisticPostMetadataWithoutThumbnail.react","OptimisticPostUFISection.react","PrivacyConst","ProgressBar.react","PublishingToolsSource","React","StoryProfile.react","VideoEditSource","VideoLibraryButton.react","VideoLibrarySource","VideoThumbnailConfig","XUIAmbientNUX.react","XUIButton.react","XUICard.react","XUICardSection.react","XVideoEditController","XVideoEditDialogController"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("Layout.react").Column,m=c("Layout.react").FillColumn,n=c("React").PropTypes;j=babelHelpers.inherits(o,c("React").Component);k=j&&j.prototype;function o(){__p&&__p();var p,q;"use strict";for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={shouldShowVideoLibraryNux:this.props.shouldShowVideoLibraryNux,videoLibraryNuxImpression:0},this.getThumbnail=function(){if(this.props.thumbnail)return this.props.thumbnail;return c("VideoThumbnailConfig").defaultThumbnailURL}.bind(this),this.onEditClick=function(){__p&&__p();var u;if(this.props.shouldShowVideoEditDialog){u=c("XVideoEditDialogController").getURIBuilder().setInt("video_id",this.props.videoID).setEnum("source",c("VideoEditSource").OPTIMISTIC_VIDEO_POST).getURI();if(this.props.targetID)u=c("ActorURI").create(u,this.props.targetID);new(c("AsyncRequest"))(u).send()}else{u=c("XVideoEditController").getURIBuilder().setInt("v",this.props.videoID).setEnum("source",c("VideoEditSource").OPTIMISTIC_VIDEO_POST).getURI();window.open(u,"_blank")}}.bind(this),this.onNuxDismiss=function(){this.setState({shouldShowVideoLibraryNux:false});this.props.onVideoLibraryNuxDismiss()}.bind(this),this.renderLayers=function(){if(!this.props.shouldShowVideoLibraryNux)return null;return c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.video_library_button}.bind(this),shown:true,position:"above",onCloseButtonClick:this.props.onVideoLibraryNuxDismiss,key:"videoLibraryNux"},"Manage your videos, all in one place.")}.bind(this),q}o.prototype.render=function(){"use strict";__p&&__p();var p=h._("\ubc29\uae08"),q=void 0;if(this.props.progress>=100&&this.props.progressCompleteText)q=this.props.progressCompleteText;else q=h._("\uc900\ube44 \uc911... {number}\u0025",[h.param("number",this.props.progress)]);var r=null;if(this.props.shouldShowVideoLibraryButton)r=c("React").createElement(c("VideoLibraryButton.react"),{ref:"video_library_button",pageID:this.props.targetID,source:c("VideoLibrarySource").OPTIMISTIC_VIDEO_POST,refSource:c("PublishingToolsSource").OPTIMISTIC_VIDEO_POST});var s=null;if(this.props.shouldShowVideoEditButton)s=c("React").createElement(c("XUIButton.react"),{className:"_4p26",label:"Edit",size:"small",onClick:this.onEditClick});var t=c("React").createElement(c("XUICardSection.react"),{background:"light-wash"},c("React").createElement("div",{className:"_pro"},c("React").createElement("div",{className:"_2uu3"},c("React").createElement(c("Layout.react"),{className:"_1mg"},c("React").createElement(m,null,c("React").createElement("div",null,c("React").createElement(c("ProgressBar.react"),{className:"_prp",value:this.props.progress,label:q}))),c("React").createElement(l,null,c("React").createElement("div",null,r,s)))))),u=this.props.profilePicture||"",v=this.props.username||"",w=this.props.privacySetting||-1,x=c("React").createElement(c("StoryProfile.react"),{className:"_4r8g",profilePicture:u,username:v,uploadTime:p,privacySetting:w}),y=this.props.thumbnail?c("React").createElement(c("OptimisticPostMetadata.react"),{title:this.props.metadataTitle,description:this.props.metadataDescription,image:this.getThumbnail()}):c("React").createElement(c("OptimisticPostMetadataWithoutThumbnail.react"),{title:this.props.metadataTitle,description:this.props.metadataDescription,videoFileUrl:this.props.videoFileUrl}),z=h._("\uac8c\uc2dc\ubb3c \ud64d\ubcf4\ud558\uae30"),A=this.props.isPagePost?c("React").createElement("div",{className:"_5c_1"},c("React").createElement(c("LeftRight.react"),null,c("React").createElement("div",null),c("React").createElement(c("XUIButton.react"),{label:z,use:"confirm"}))):null,B=c("React").createElement(c("OptimisticPostUFISection.react"),{profilePicture:this.props.profilePicture,isPagePost:this.props.isPagePost}),C=c("React").createElement("div",null,x,y,A,B),D=c("React").createElement("div",{className:"_5c_3"});return c("React").createElement("div",{className:!!this.props.isPagePost?"_5ctl":""},c("React").createElement(c("XUICard.react"),{className:"_4p28"},t,c("React").createElement("div",{className:"_prq"},C,D)),this.renderLayers())};o.propTypes={profilePicture:n.string,username:n.string,privacySetting:n.number,metadataTitle:n.string,metadataDescription:n.string,thumbnail:n.string,videoID:n.string,isPagePost:n.bool,progress:n.number,progressCompleteText:n.string,shouldShowVideoEditButton:n.bool,shouldShowVideoEditDialog:n.bool,targetID:n.string,videoFileUrl:n.string,shouldShowVideoLibraryNux:n.bool};o.defaultProps={profilePicture:"",username:"",privacySetting:c("PrivacyConst").BaseValue.EVERYONE,metadataTitle:"",metadataDescription:"",thumbnail:"",progress:0,videoID:"",isPagePost:false,progressCompleteText:"",shouldShowVideoEditButton:true,shouldShowVideoEditDialog:false,videoFileUrl:"",shouldShowVideoLibraryNux:false};f.exports=o}),null);
__d("OptimisticVideoPostEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({VIDEO_POST_ADDED:"video_post_added",VIDEO_POST_REMOVED:"video_post_removed",POST_REMOVED_WITHOUT_REPLACEMENT:"post_removed_without_replacement"})}),null);
__d("OptimisticVideoPostLogger",["BanzaiLogger"],(function a(b,c,d,e,f,g){var h={logEvent:function i(event,j,k,l,m){c("BanzaiLogger").log("OptimisticVideoPostLoggerConfig",{number_of_posts:k,source:j,event:event,target_id:l,video_id:m})}};f.exports=h}),null);
__d("OptimisticVideoPostSource",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PAGES_TIMELINE:"pages_timeline",VIDEO_HUB:"video_hub",USERS_TIMELINE:"users_timeline"})}),null);
__d("VideoLibraryNuxAction",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({IMPRESSION:"impression",DISMISS:"dismiss"})}),null);
__d("VideoLibraryNuxType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({HIGHLIGHTED_VIDEOS_NUX:"highlighted_videos_nux",OPTIMISTIC_POST_NUX:"optimistic_post_nux",VIDEO_HUB_NUX:"video_hub_nux",VIDEO_INSIGHTS_NUX:"video_insights_nux"})}),null);
__d("XVideoCaptionRenderGenerateHeaderAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/videos/captioneditor/pagePosts/",{video_id:{type:"Int"}})}),null);
__d("VideoPostGenerateCaptionHeader",["csx","AsyncRequest","DOM","Parent","XVideoCaptionRenderGenerateHeaderAsyncController"],(function a(b,c,d,e,f,g,h){__p&&__p();var i={renderHeader:function j(k,l){__p&&__p();var m=c("Parent").bySelector(k,"#pagelet_timeline_main_column");if(!m)return;var n=c("DOM").scry(m,"._5sem")[0];if(n){var o=c("DOM").create("div");c("DOM").prependContent(n,o);var p=c("XVideoCaptionRenderGenerateHeaderAsyncController").getURIBuilder().setInt("video_id",l).getURI();new(c("AsyncRequest"))().setMethod("GET").setRelativeTo(o).setURI(p).setReadOnly(true).setAllowCrossPageTransition(true).send()}}};f.exports=i}),null);
__d("XProfileVideoRefreshController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/profile/picture/refresh_profile_video/",{video_id:{type:"FBID",required:true}})}),null);
__d("XVideoGenerateStoryController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/generate_story/",{video_id:{type:"Int"},feed_location:{type:"Enum",enumType:0},timeline_identifier:{type:"String"}})}),null);
__d("XVideoLibraryNuxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pages/video_library/nux/",{action:{type:"Enum",required:true,enumType:1},nux_type:{type:"Enum",required:true,enumType:1}})}),null);
__d("XVideoOptimisticPostingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/optimistic_posting/",{video_id:{type:"Int",required:true}})}),null);
__d("OptimisticVideoPostList.react",["Arbiter","AsyncRequest","ChannelConstants","FBFeedLocations","OptimisticVideoPost.react","OptimisticVideoPostEvent","OptimisticVideoPostLogger","OptimisticVideoPostSource","OptimisticVideoPostUtils","PagesComposer","ProfileVideoWWWFrontendActionTypedLogger","React","ReactDOM","ReloadPage","Run","TimelineComposer","VideoLibraryNuxAction","VideoLibraryNuxType","VideoPostGenerateCaptionHeader","XProfileVideoRefreshController","XVideoGenerateStoryController","XVideoLibraryNuxController","XVideoOptimisticPostingController"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=b.URL||b.webkitURL||{},k="video_encode",l=7,m=99.8,n=5e3,o=2,p=1e3;h=babelHelpers.inherits(q,c("React").Component);i=h&&h.prototype;function q(){__p&&__p();var r,s;"use strict";for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=i.constructor).call.apply(r,[this].concat(u)),this.state={videoPostsMetadata:{},videoPosts:[],shouldRefreshAfterEncoding:false,shouldShowVideoEditButton:true,shouldShowVideoLibraryButton:this.props.shouldShowVideoLibraryButton,shouldShowVideoLibraryNux:this.props.shouldShowVideoLibraryNux,videoLibraryNuxImpression:0,videoLibraryNuxImpressionLogged:false},this.initializePosts=function(){__p&&__p();var w=[],x={};for(var y=0;y<this.props.data.length;y++){if(!c("OptimisticVideoPostUtils").shouldShowOptimisticPost(this.props.data[y]))break;var z=babelHelpers["extends"]({},this.props.data[y],{shouldRender:false});z.progress=0;z.progressWithoutFake=0;var A=z.videoID;z.inactivityTimer=this.startInactivityTimer(A);w.push(A);x[A]=z}this.setState({videoPostsMetadata:x,videoPosts:w})}.bind(this),this.getChannelType=function(){return c("ChannelConstants").getArbiterType(k)},this.updateVideoData=function(w){__p&&__p();var x={};x[w.videoID]=babelHelpers["extends"]({},w,{shouldRender:true,fakeProgressTimer:setInterval(function(){return this.fakeInitialProgress(w.videoID)}.bind(this),3e3),inactivityTimer:this.startInactivityTimer(w.videoID)});x[w.videoID].progress=0;x[w.videoID].progressWithoutFake=0;var y=babelHelpers["extends"]({},this.state.videoPostsMetadata,x),z=[w.videoID].concat(this.state.videoPosts);this.$OptimisticVideoPostList1=w.refreshTimeout;this.$OptimisticVideoPostList2=w.originalComposerID;this.$OptimisticVideoPostList3=w.progressCompleteText;this.setState({shouldRefreshAfterEncoding:!!w.shouldRefreshAfterEncoding,shouldShowVideoEditButton:w.shouldShowVideoEditButton!=null?w.shouldShowVideoEditButton:true,shouldShowVideoLibraryButton:w.shouldShowVideoLibraryButton!=null?w.shouldShowVideoLibraryButton:this.state.shouldShowVideoLibraryButton,videoPostsMetadata:y,videoPosts:z});this.logEvent(c("OptimisticVideoPostEvent").VIDEO_POST_ADDED,w.videoID)}.bind(this),this.onVideoPostSubmitted=function(w,x){if(!c("OptimisticVideoPostUtils").shouldShowOptimisticPost(x))return;if(!x.isToUserProfile){this.updateVideoData(x);return}var y=c("XVideoOptimisticPostingController").getURIBuilder().setInt("video_id",x.videoID).getURI();new(c("AsyncRequest"))().setURI(y).setHandler(function(z){this.updateVideoData(babelHelpers["extends"]({},z.payload,{videoFileUrl:x.videoFileURL}))}.bind(this)).send()}.bind(this),this.checkVideoStatus=function(w){c("OptimisticVideoPostUtils").checkVideoStatus(w,this.onEncodeFinish,this.onEncodeFinish,this.restartInactivityTimer)}.bind(this),this.startInactivityTimer=function(w){return setTimeout(function(){return this.checkVideoStatus(w)}.bind(this),n)}.bind(this),this.restartInactivityTimer=function(w){this.stopInactivityTimer(w);var x=babelHelpers["extends"]({},this.state.videoPostsMetadata),y=babelHelpers["extends"]({},x[w]);y.inactivityTimer=this.startInactivityTimer(w);x[w]=y;this.setState({videoPostsMetadata:x})}.bind(this),this.stopInactivityTimer=function(w){clearTimeout(this.state.videoPostsMetadata[w].inactivityTimer)}.bind(this),this.logEvent=function(event,w){c("OptimisticVideoPostLogger").logEvent(event,this.props.isPagePost?c("OptimisticVideoPostSource").PAGES_TIMELINE:c("OptimisticVideoPostSource").USERS_TIMELINE,this.state.videoPosts.length,this.props.targetID,w)}.bind(this),this.fakeInitialProgress=function(w){__p&&__p();var x=this.state.videoPostsMetadata[w].progress;if(x>l){this.stopFakeInitialProgress(w);return}var y=babelHelpers["extends"]({},this.state.videoPostsMetadata),z=babelHelpers["extends"]({},y[w]);z.progress+=1;y[w]=z;this.setState({videoPostsMetadata:y});this.restartInactivityTimer(w)}.bind(this),this.stopFakeInitialProgress=function(w){if(!this.state.videoPostsMetadata[w].fakeProgressTimer)return;var x=babelHelpers["extends"]({},this.state.videoPostsMetadata);clearTimeout(x[w].fakeProgressTimer);var y=babelHelpers["extends"]({},x[w]);y.fakeProgressTimer=null;x[w]=y;this.setState({videoPostsMetadata:x})}.bind(this),this.onEncodeUpdate=function(w,x){__p&&__p();var y=String(x.obj.videoID);if(!this.state.videoPostsMetadata[y])return;var z=babelHelpers["extends"]({},this.state.videoPostsMetadata),A=babelHelpers["extends"]({},z[y]),B={progress:A.progress,progressWithoutFake:A.progressWithoutFake};if(x.obj.cached_progress&&B.progress<x.obj.cached_progress){B.progress=x.obj.cached_progress;B.progressWithoutFake=x.obj.cached_progress}var C=this.getOptimizedProgress(B,x.obj.progress,x.obj.stage,x.obj.max_percent?x.obj.max_percent:0,x.obj.sve_report);if(C.progress!==-1){this.stopFakeInitialProgress(y);A.progress=C.progress;A.shouldRender=true}A.progressWithoutFake=C.progressWithoutFake;z[y]=A;this.setState({videoPostsMetadata:z});if(this.$OptimisticVideoPostList4(x.obj.stage))this.onEncodeFinish(y);else this.restartInactivityTimer(y)}.bind(this),this.$OptimisticVideoPostList4=function(w){return w==="finish"},this.onEncodeFinish=function(w){if(!this.state.videoPostsMetadata[w])return;this.stopInactivityTimer(w);var x=this.props.isPagePost?c("FBFeedLocations").PAGE_TIMELINE:c("FBFeedLocations").TIMELINE,y=c("XVideoGenerateStoryController").getURIBuilder().setInt("video_id",w).setEnum("feed_location",x).getURI();new(c("AsyncRequest"))().setURI(y).setData({video_id:w,feed_location:x}).setHandler(function(z){return this.handleRequest(z,w)}.bind(this)).send()}.bind(this),this.refreshWhenDone=function(w){__p&&__p();var x=true,y=Date.now(),z=setInterval(function(){__p&&__p();if(x){x=false;var A=c("XProfileVideoRefreshController").getURIBuilder().setFBID("video_id",w).getURI();new(c("AsyncRequest"))().setURI(A).setHandler(function(B){x=true;if(B.payload.profile_video_is_set){clearInterval(z);new(c("ProfileVideoWWWFrontendActionTypedLogger"))().setEvent("profile_video_set").setSessionID(this.$OptimisticVideoPostList2).log();c("ReloadPage").now()}else if(Date.now()-y>this.$OptimisticVideoPostList1)clearInterval(z)}.bind(this)).send()}}.bind(this),p)}.bind(this),this.removeOptimisticPost=function(w){var x=babelHelpers["extends"]({},this.state.videoPostsMetadata);delete x[w];var y=this.state.videoPosts;y=this.removeVideoID(y,w);this.setState({videoPostsMetadata:x,videoPosts:y});this.logEvent(c("OptimisticVideoPostEvent").VIDEO_POST_REMOVED,w)}.bind(this),this.removeVideoID=function(w,x){var y=w.indexOf(x);w.splice(y,1);return w},this.onVideoLibraryNuxShown=function(){var w=this.state.videoLibraryNuxImpression+1;this.setState({videoLibraryNuxImpression:w});if(w>=o)this.setState({shouldShowVideoLibraryNux:false})}.bind(this),this.onVideoLibraryNuxDismiss=function(){this.setState({shouldShowVideoLibraryNux:false});var w=c("XVideoLibraryNuxController").getURIBuilder().setEnum("action",c("VideoLibraryNuxAction").DISMISS).setEnum("nux_type",c("VideoLibraryNuxType").OPTIMISTIC_POST_NUX).getURI();new(c("AsyncRequest"))().setURI(w).send()}.bind(this),this.renderOptimisticPost=function(w,x){__p&&__p();if(!w.shouldRender)return c("React").createElement("div",{key:w.videoID});var y;if(w.videoThumbnail)y=w.videoThumbnail;else if(j.createObjectURL&&w&&w.videoThumbnailBlob){y=j.createObjectURL(w.videoThumbnailBlob);this.setThumbnailURL(y,w.videoID)}else y="";return c("React").createElement(c("OptimisticVideoPost.react"),{username:w.userDisplayName,profilePicture:w.userProfilePictureURI,metadataTitle:w.videoTitle,metadataDescription:w.videoDescription,thumbnail:y,videoID:w.videoID,videoFileUrl:w.videoFileUrl,key:w.videoID,progress:w.progress,privacySetting:w.privacySetting,isPagePost:this.props.isPagePost,shouldShowVideoEditButton:this.state.shouldShowVideoEditButton,shouldShowVideoEditDialog:this.props.shouldShowVideoEditDialog,targetID:this.props.targetID,progressCompleteText:this.$OptimisticVideoPostList3,shouldShowVideoLibraryButton:this.state.shouldShowVideoLibraryButton,shouldShowVideoLibraryNux:x,onVideoLibraryNuxDismiss:this.onVideoLibraryNuxDismiss,onVideoLibraryNuxShown:this.onVideoLibraryNuxShown})}.bind(this),this.setThumbnailURL=function(w,x){var y=babelHelpers["extends"]({},this.state.videoPostsMetadata);y[x].videoThumbnail=w;this.setState({videoPostsMetadata:y})}.bind(this),s}q.prototype.componentDidUpdate=function(){"use strict";if(!this.state.videoLibraryNuxImpressionLogged&&this.state.videoPosts.length>0&&this.state.shouldShowVideoLibraryNux){var r=c("XVideoLibraryNuxController").getURIBuilder().setEnum("action",c("VideoLibraryNuxAction").IMPRESSION).setEnum("nux_type",c("VideoLibraryNuxType").OPTIMISTIC_POST_NUX).getURI();new(c("AsyncRequest"))().setURI(r).send();this.setState({videoLibraryNuxImpressionLogged:true})}};q.prototype.componentDidMount=function(){"use strict";var r=c("Arbiter").subscribe("videoUpload/complete",this.onVideoPostSubmitted),s=c("Arbiter").subscribe(this.getChannelType(),this.onEncodeUpdate);c("Run").onLeave(function(){return r.unsubscribe()});c("Run").onLeave(function(){return s.unsubscribe()});if(this.props.data.length>0)this.initializePosts()};q.prototype.getOptimizedProgress=function(r,s,t,u,v){"use strict";__p&&__p();var w={progress:s,progressWithoutFake:r.progressWithoutFake};if(!v)return w;var x=r.progress+s;if(!(s>0)||u>0&&x>u){w.progress=-1;return w}x=Number(x.toFixed(1));if(t==="finish"||t==="notify")x=100;else if(x>=100)x=r.progress<100?r.progress:m;w.progress=x;w.progressWithoutFake=x;return w};q.prototype.handleRequest=function(r,s){"use strict";__p&&__p();var t=r.payload;if(t)if(this.props.isPagePost){c("PagesComposer").renderStory(c("ReactDOM").findDOMNode(this),t);if(this.props.shouldShowVideoCaptionHeader)c("VideoPostGenerateCaptionHeader").renderHeader(c("ReactDOM").findDOMNode(this),s)}else c("TimelineComposer").renderCapsuleBasedStory(c("ReactDOM").findDOMNode(this),t);else this.logEvent(c("OptimisticVideoPostEvent").POST_REMOVED_WITHOUT_REPLACEMENT,s);if(this.state.shouldRefreshAfterEncoding)this.refreshWhenDone(s);else this.removeOptimisticPost(s)};q.prototype.render=function(){"use strict";var r=this.state.videoPostsMetadata,s=this.state.videoPosts.map(function(t,u){return this.renderOptimisticPost(r[t],u===0&&this.state.shouldShowVideoLibraryNux)}.bind(this));return c("React").createElement("ul",null,s)};f.exports=q}),null);
__d("OptimisticVideoPostController",["React","ReactDOM","CSS","OptimisticVideoPostList.react"],(function a(b,c,d,e,f,g){var h={init:function i(j,k,l,m,n,o,p,q){this._postsContainer=j;c("ReactDOM").render(c("React").createElement(c("OptimisticVideoPostList.react"),{data:k,targetID:l,isPagePost:m,shouldShowVideoEditDialog:n,shouldShowVideoLibraryButton:o,shouldShowVideoLibraryNux:p,shouldShowVideoCaptionHeader:q}),this._postsContainer);c("CSS").show(this._postsContainer)}};f.exports=h}),null);
__d("FollowLink",["Arbiter","CSS","ge"],(function a(b,c,d,e,f,g){var h={subscribeEvents:function i(j,k,l){c("Arbiter").subscribe(["FollowUser","UnfollowUser"],function(event,m){if(m.profile_id!=j)return;var n=c("ge")(k),o=c("ge")(l),p=event=="FollowUser";n&&c("CSS").conditionShow(n,!p);o&&c("CSS").conditionShow(o,p)})}};f.exports=h}),null);
__d("Optimus",["Event","Parent"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={};function i(k,l){__p&&__p();var m=l.getTarget();if(!m)return;var n=h[k];for(var o in n){var p=c("Parent").byAttribute(m,o);if(p)do{var q=n[o][p.getAttribute(o)];if(q&&q.handleOptimus(k,p,l)===false)break}while(p=c("Parent").byAttribute(p.parentNode,o))}}function j(k,l,m,f){if(!h[k]){h[k]={};c("Event").listen(document.documentElement,k,i.bind(null,k))}if(!h[k][l])h[k][l]={};if(!h[k][l][m])h[k][l][m]=f}f.exports={addRelClick:function k(l,f){j("click","rel",l,f)},addEventListener:j}}),null);
__d("EgoUnitClickHandler",["csx","CSS","DOM","Event","goURI"],(function a(b,c,d,e,f,g,h){__p&&__p();var i={};i.stealHref=function(j){var k=c("DOM").find(j.parentNode,"a.ego_title");j.setAttribute("href",k.href)};i.register=function(j){__p&&__p();c("Event").listen(j,"click",function(k){var l=c("DOM").find(j,"a.ego_title");if(i.enabled&&l&&l.href)c("goURI")(l.href)});c("Event").listen(j,"mouseover",function(k){__p&&__p();var l=c("DOM").find(j,"a.ego_title"),m=c("DOM").find(j,"a._8o .img"),n=k.getTarget(),o;if(n.tagName==="A"||n.tagName==="a")o=n;else{var p=c("DOM").scry(n,"^a");if(p.length===1)o=p[0]}if(o&&o.href!=l.href&&(!m||o.href!=m.href)){c("CSS").removeClass(l,"always_underlined");i.enabled=false}else{c("CSS").addClass(l,"always_underlined");i.enabled=true}});c("Event").listen(j,"mouseout",function(k){var l=c("DOM").find(j,"a.ego_title");c("CSS").removeClass(l,"always_underlined");i.enabled=false})};f.exports=i}),null);
__d("ProfileActionBarLogger",["FBJSON","MarauderLogger","Optimus"],(function a(b,c,d,e,f,g){function h(){c("Optimus").addEventListener("mouseup","data-loggable","ProfileHighQualityLogger",{handleOptimus:function i(j,k,l){c("MarauderLogger").log("profile_high_quality_action",null,c("FBJSON").parse(k.getAttribute("data-store")));return false}})}g.init=h}),null);
__d("ProfileIntroCardLogger",["csx","cx","BanzaiLogger","CSS","DataStore","Event","Parent","tidyEvent"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=null,k=null;function l(o,p,q,r){j=p;k=r;c("tidyEvent")(c("Event").listen(o,"click",function(s){var t=s.getTarget(),u=c("Parent").byAttribute(t,q);if(u){if(c("CSS").matchesSelector(u,"._md0")&&t.nodeName!=="A")return;n(JSON.parse(c("DataStore").get(u,"store")))}}))}function m(o){n(o)}function n(o){c("BanzaiLogger").log(j,babelHelpers["extends"]({},k,o))}f.exports={init:l,logClick:m}}),null);
__d("ProfileEscapeHatch",["CSS","ProfileTabUtils","Run","TimelineComponentKeys","TimelineController"],(function a(b,c,d,e,f,g){__p&&__p();var h=[],i=false;function j(k){"use strict";this.$ProfileEscapeHatch1=k;h.push(this);if(!i){c("TimelineController").register(c("TimelineComponentKeys").ESCAPE_HATCH,j);c("Run").onLeave(function(){h=[]});i=true}}j.handleTabChange=function(k){"use strict";h.forEach(function(l){c("CSS").conditionShow(l.$ProfileEscapeHatch1,c("CSS").shown(l.$ProfileEscapeHatch1)||c("ProfileTabUtils").isTimelineTab(k))})};f.exports=j}),null);
__d("TimelineDOMID",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({COMPOSER_CONTAINER:"timeline_composer_container",MEMORIES:"pagelet_timeline_memories",RECENT:"pagelet_timeline_recent",RECENT_CAPSULE_CONTAINER:"recent_capsule_container",STICKY_HEADER:"timeline_sticky_header",TAB_CONTENT:"timeline_tab_content",TAB_CONTENT_EXTRA:"timeline_tab_content_extra",ABOVE_COMPOSER:"timeline_above_composer",UNDER_COMPOSER:"timeline_under_composer",SERP_ENTRY_POINT:"serp_entry_point",UNSEEN_STORIES_INDICATOR:"recent_unseen_stories_indicator",TIMELINE_SCHEDULED_POSTS:"timeline_scheduled_posts",PREFIX_MONTH_ALL:"pagelet_timeline_month_all_",PREFIX_YEAR:"pagelet_timeline_year_",SUFFIX_MORE_PAGER:"_more_pager"})}),null);
__d("TimelineOverviewDOMID",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({TAB_CONTENT:"timeline_overview"})}),null);
__d("ProfileNavigation",["Arbiter","CSS","PageTransitions","ProfileDOMID","ProfileOverviewDOMID","ProfileTabConst","ProfileTabUtils","ScriptPath","TimelineComponentKeys","TimelineController","TimelineDOMID","TimelineOverviewDOMID","TimelineURI","UIPagelet","URI","$","ge"],(function a(b,c,d,e,f,g){__p&&__p();var h=7,i="/profile_book.php",j=null,k=null;function l(y){__p&&__p();var z=c("URI").getMostRecentURI(),A=c("TimelineURI").getSectionKeyFromURI(z),B=c("TimelineURI").getTabKeyFromURI(z),C=c("TimelineURI").getSectionKeyFromURI(y),D=c("TimelineURI").getTabKeyFromURI(y),E=y.getQueryData();if(u(z,y)||v(D)||v(B)||!!E.and||c("TimelineURI").isVideoPermalink(y))return false;if(E.hc_location==="profile_browser")return false;if(Object.prototype.hasOwnProperty.call(E,"theater")){c("Arbiter").subscribeOnce("PhotoSnowlift.CLOSE",w);return false}if(Object.prototype.hasOwnProperty.call(E,"force-refresh"))return false;if(c("ProfileTabUtils").normalizeTabKey(B)===c("ProfileTabUtils").normalizeTabKey(D)&&c("ProfileTabUtils").normalizeTabKey(A)===c("ProfileTabUtils").normalizeTabKey(C))return false;if(!c("ProfileTabUtils").isMedleyTab(B)&&c("ProfileTabUtils").isMedleyTab(D)&&t(C)){j=C;o(C,m(D),n(B),n(D),E);return true}if(!c("ProfileTabUtils").isMedleyTab(D)){if(c("ProfileTabUtils").isMedleyTab(B))j=A;o(c("ProfileTabUtils").normalizeTabKey(D),m(D),n(B),n(D),E);return true}return false}function m(y){if(c("ProfileTabUtils").isTimelineTab(y))return"TimelineWallColumn";if(c("ProfileTabUtils").isTimelineOverviewTab(y))return"TimelineOverviewColumn";return"TimelineMedleyView"}function n(y){if(c("ProfileTabUtils").isTimelineTab(y))return c("TimelineDOMID").TAB_CONTENT;if(c("ProfileTabUtils").isTimelineOverviewTab(y))return c("TimelineOverviewDOMID").TAB_CONTENT;return c("ProfileOverviewDOMID").MEDLEY_ROOT}function o(y,z,A,B,C){__p&&__p();c("CSS").hide(c("$")(A));c("Arbiter").inform("save_facebar_query",true);var D=c("ge")(B);if(D){c("CSS").show(D);s(y)}else p(z,y,C);var E=c("ge")("pageFooter");if(E)c("CSS").conditionShow(E,!c("ProfileTabUtils").isTimelineTab(y));c("TimelineController").registerCurrentKey(y)}function p(y,z,A){q();var B=babelHelpers["extends"]({},k,{tab_key:z});if(A)B=babelHelpers["extends"]({},B,A);var C=function C(E){r();E()},D={append:true,displayCallback:C,finallyHandler:s.bind(null,z),usePipe:true};c("UIPagelet").loadFromEndpoint(y,c("ProfileDOMID").MAIN_COLUMN_PERSONAL,B,D)}function q(){c("CSS").show(c("$")(c("ProfileDOMID").TAB_LOAD_INDICATOR))}function r(){c("CSS").hide(c("$")(c("ProfileDOMID").TAB_LOAD_INDICATOR))}function s(y){var z=i;if(y&&!c("ProfileTabUtils").isTimelineTab(y))z+=":"+y;c("ScriptPath").set(z);c("PageTransitions").transitionComplete()}function t(y){return j===null||y===j}function u(y,z){var A=c("TimelineURI").getVanityFromURI(y),B=y.getQueryData().id,C=c("TimelineURI").getVanityFromURI(z),D=z.getQueryData().id;if(A&&C)return A!==C;if(B&&D)return B!==D;return true}function v(y){return c("ProfileTabUtils").isActivityLogTab(y)||y===c("ProfileTabConst").MEMORIAL_CONTACT||y===c("ProfileTabConst").POSTS}function w(){c("PageTransitions").registerHandler(l,h)}var x={init:function y(z){k=z.profileContextData;c("TimelineController").register(c("TimelineComponentKeys").ASYNC_NAV,this);w()},reset:function y(){k=null;j=null;c("PageTransitions").removeHandler(l)}};f.exports=x}),null);
__d("TimelineContextItemLogger",["cx","BanzaiLogger","Event","FBJSON","Parent","Run","tidyEvent"],(function a(b,c,d,e,f,g,h){__p&&__p();var i="MTimelineXContextItemsLoggerConfig",j="impression",k="click",l="context_item_url",m="event",n="_md0",o=[];function p(r,s,t){var u=c("FBJSON").parse(r.getAttribute("data-store"));u[m]=s;if(t)u[l]=t;c("BanzaiLogger").log(i,u)}var q={logWhenVisible:function r(s){if(!o.length)c("Run").onLeave(function(){o=[]});o.push(s)},logWhenClicked:function r(s){c("tidyEvent")(c("Event").listen(s,"click",function(t){var u=t.getTarget();if(u.nodeName!=="A")return;var v=c("Parent").byClass(u,n);v&&p(v,k,u.href)}))},listenToExpand:function r(s){c("tidyEvent")(s.addListener("expanded",function(){while(o.length)p(o.pop(),j)}))}};f.exports=q}),null);
__d("TimelineNavLight",["csx","cx","invariant","Arbiter","CSS","DataStore","DOM","DOMQuery","Event","Parent","ProfileOverviewDOMID","ProfileOverviewSection","ProfileTabConst","ProfileTimelineUILogger","TimelineAppSectionConstants","TimelineComponentKeys","TimelineController","destroyOnUnload","queryThenMutateDOM","requireWeak"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k="_6-7",l="_6-6",m="_529n",n="_5215",o="_9rw",p="_70k",q="._6-7",r="._6-6";function s(t){"use strict";__p&&__p();!s.$TimelineNavLight1||j(0);this.$TimelineNavLight2=t;this.$TimelineNavLight3=c("DOMQuery").scry(t,q)[0];this.$TimelineNavLight4=c("DOMQuery").scry(t,r);this.$TimelineNavLight5();c("ProfileOverviewSection").subscribe("Medley/transitionToSection",function(v,w){this.$TimelineNavLight6(w.slice(c("ProfileOverviewDOMID").PREFIX_MEDLEY.length))}.bind(this));c("TimelineController").register(c("TimelineComponentKeys").COVER_NAV,this);var u=c("Event").listen(this.$TimelineNavLight2,"click",this.$TimelineNavLight7.bind(this));s.$TimelineNavLight1=this;c("destroyOnUnload")(function(){this.$TimelineNavLight2=null;this.$TimelineNavLight3=null;this.$TimelineNavLight4=null;u.remove();if(this.$TimelineNavLight8)this.$TimelineNavLight8.remove();s.$TimelineNavLight1=null}.bind(this))}s.prototype.handleTabChange=function(t){"use strict";this.$TimelineNavLight6(t)};s.prototype.setMoreMenuInstance=function(t){"use strict";this.$TimelineNavLight8=c("Event").listen(t.getRoot(),"click",this.$TimelineNavLight9.bind(this))};s.setMoreMenuInstance=function(t){"use strict";!!s.$TimelineNavLight1||j(0);s.$TimelineNavLight1.setMoreMenuInstance(t)};s.prototype.$TimelineNavLight6=function(t){"use strict";__p&&__p();this.$TimelineNavLight3&&c("CSS").removeClass(this.$TimelineNavLight3,k);this.$TimelineNavLight4.some(function(u){var v=c("TimelineAppSectionConstants").collectionTabKeyToAppTabKey[t]||t;if(c("DataStore").get(u,"tab-key")===v){c("CSS").addClass(u,k);this.$TimelineNavLight3=u;return true}}.bind(this));if(t===c("ProfileTabConst").TIMELINE)c("requireWeak")("ScrollColumn.react",function(u){c("Arbiter").inform(u.EVENT_SHOULD_ADJUST)})};s.prototype.$TimelineNavLight5=function(){"use strict";__p&&__p();var t=this.$TimelineNavLight4.length-1,u=this.$TimelineNavLight4[t],v=void 0,w=void 0,x=void 0,y=0;c("queryThenMutateDOM")(function(){v=c("Parent").byClass(this.$TimelineNavLight2,p).offsetWidth;w=u.offsetLeft;x=u.offsetWidth;for(var z=t;z>1;z--){var A=this.$TimelineNavLight4[z];if(A.offsetLeft+A.offsetWidth>v)y++;else break}}.bind(this),function(){if(w+x>v)c("CSS").addClass(this.$TimelineNavLight2,n);for(var z=t;z>t-y;z--)c("DOM").remove(this.$TimelineNavLight4[z]);c("CSS").removeClass(c("Parent").byClass(this.$TimelineNavLight2,m),m)}.bind(this))};s.prototype.$TimelineNavLight10=function(t,u){"use strict";var v=c("Parent").byClass(t,u);if(v)return c("DataStore").get(v,"tab-key");return null};s.prototype.$TimelineNavLight7=function(event){"use strict";var t=this.$TimelineNavLight10(event.target,l);if(t)c("ProfileTimelineUILogger").logCoverNavItemClick(t)};s.prototype.$TimelineNavLight9=function(event){"use strict";var t=this.$TimelineNavLight10(event.target,o);if(t)c("ProfileTimelineUILogger").logCoverNavMoreItemClick(t)};f.exports=s}),null);
__d("VideoCallHelpler",["FBRTCCallabilityStore","FBRTCCore","TooltipData"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j,k){var l=k.calleeID,m=k.calleeName;j.forEachItem(function(n){if(n.getValue&&n.getValue()==="video_call"){if(c("FBRTCCallabilityStore").isCallable(k.calleeID))n.enable();else n.disable();c("TooltipData").set(n.getRoot(),c("FBRTCCallabilityStore").callButtonTooltip(l,m),"right")}})}var i={bindProfileVideoCallAction:function j(k,l){h(k,l);c("FBRTCCallabilityStore").addListener(function(){h(k,l)});k.subscribe("itemclick",function(m,n){if(n.item.getValue()==="video_call"&&!n.item.isDisabled())c("FBRTCCore").startOutgoingCall(l.calleeID,"timeline_profile",false)})}};f.exports=i}),null);
__d("TimelineSection",["Arbiter","CSS","DOM","Parent","ScrollingPager","TimelineConstants","TimelineLegacySections","TimelineScrubberKey","UIPagelet"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j,k,l,m){"use strict";__p&&__p();this.$TimelineSection1=i;this.$TimelineSection2=l;this.$TimelineSection3=j;this.$TimelineSection4=null;this.$TimelineSection5=null;this.$TimelineSection6=true;this.$TimelineSection7=true;this.$TimelineSection8=j!==c("TimelineScrubberKey").RECENT_ACTIVITY;this.$TimelineSection9=m;this.$TimelineSection10=k;this.$TimelineSection11={};this.$TimelineSection12=false;this.$TimelineSection13=[];this.$TimelineSection14=false}h.prototype.load=function(i,j){"use strict";__p&&__p();if(this.$TimelineSection2){this.activateContentScrollLoad();return}var k=this.$TimelineSection10;c("Arbiter").inform(c("TimelineConstants").SECTION_LOADING,{data:k,scrubberKey:this.$TimelineSection3});this.$TimelineSection2=true;c("CSS").removeClass(this.$TimelineSection1,"fbTimelineTimePeriodUnexpanded");c("CSS").removeClass(this.$TimelineSection1,"fbTimelineTimePeriodSuppressed");var l=c("TimelineLegacySections").shouldForceNoFriendActivity();k=babelHelpers["extends"]({},k,{highlight_unit_data:i,parent_key:this.$TimelineSection4,force_no_friend_activity:l});c("CSS").addClass(this.$TimelineSection1,"fbTimelineSectionLoading");this.$TimelineSection6=false;this.activateContentScrollLoad();if(j){this.$TimelineSection1.style.minHeight=window.innerHeight+"px";c("Arbiter").subscribeOnce(c("TimelineConstants").SECTION_FULLY_LOADED,function(m,k){if(k.scrubberKey===this.$TimelineSection3){this.$TimelineSection1.style.minHeight="";c("TimelineLegacySections").destroyOnVisible(this.$TimelineSection3)}}.bind(this))}c("TimelineLegacySections").addLoadPagelet(this.$TimelineSection3,c("UIPagelet").loadFromEndpoint("ProfileTimelineSectionPagelet",this.$TimelineSection1.id,k,{usePipe:true,jsNonblock:true,constHeight:true,append:false}));c("TimelineLegacySections").collapsePlaceHolderHeaders()};h.prototype.preload=function(){"use strict";c("CSS").addClass(this.$TimelineSection1,"fbTimelineTimePeriodSuppressed");c("CSS").removeClass(this.$TimelineSection1,"fbTimelineTimePeriodUnexpanded");var i=c("DOM").find(this.$TimelineSection1,"span.sectionLabel");if(i.getAttribute("data-original-label")){c("DOM").setContent(i,i.getAttribute("data-original-label"));i.removeAttribute("data-original-label")}};h.prototype.unload=function(){"use strict";__p&&__p();if(!this.$TimelineSection2||!this.$TimelineSection8)return;this.$TimelineSection2=false;c("TimelineLegacySections").cancelLoadPagelet(this.$TimelineSection3);c("CSS").addClass(this.$TimelineSection1,"fbTimelineTimePeriodUnexpanded");c("CSS").removeClass(this.$TimelineSection1,"fbTimelineTimePeriodSuppressed");if(this.$TimelineSection1.nextSibling instanceof Element&&c("CSS").hasClass(this.$TimelineSection1.nextSibling,"fbTimelineSection")){c("DOM").setContent(this.$TimelineSection1,this.$TimelineSection1.nextSibling);if(this.$TimelineSection1.firstChild instanceof Element)c("CSS").show(this.$TimelineSection1.firstChild)}else c("DOM").empty(this.$TimelineSection1);this.deactivateScrollLoad()};h.prototype.canScrollLoad=function(){"use strict";return this.$TimelineSection6};h.prototype.activateScrollLoad=function(){"use strict";this.$TimelineSection6=true;c("CSS").removeClass(this.$TimelineSection1,"fbTimelineTimePeriodSuppressed");c("CSS").addClass(this.$TimelineSection1,"fbTimelineTimePeriodUnexpanded");var i=c("TimelineLegacySections").getOnVisible(this.$TimelineSection3);if(i)i.reset();return this};h.prototype.deactivateScrollLoad=function(){"use strict";__p&&__p();if(!this.$TimelineSection2){this.$TimelineSection6=false;c("CSS").removeClass(this.$TimelineSection1,"fbTimelineTimePeriodUnexpanded");c("CSS").addClass(this.$TimelineSection1,"fbTimelineTimePeriodSuppressed");var i=c("TimelineLegacySections").getOnVisible(this.$TimelineSection3);if(i)i.remove()}c("DOM").scry(this.$TimelineSection1,".fbTimelineSectionExpandPager").forEach(function(j){var k=c("ScrollingPager").getInstance(j.id);k&&k.removeOnVisible();var l=c("Parent").byClass(j,"stat_elem");if(l)c("CSS").removeClass(l,"async_saving")});return this};h.prototype.canContentScrollLoad=function(){"use strict";return this.$TimelineSection7};h.prototype.activateContentScrollLoad=function(){"use strict";this.$TimelineSection7=true;return this};h.prototype.deactivateContentScrollLoad=function(){"use strict";this.$TimelineSection7=false;return this};h.prototype.getNode=function(){"use strict";return this.$TimelineSection1};h.prototype.getScrubberKey=function(){"use strict";return this.$TimelineSection3};h.prototype.getParentKey=function(){"use strict";return this.$TimelineSection4};h.prototype.setParentKey=function(i){"use strict";this.$TimelineSection4=i;return this};h.prototype.addSubSection=function(i,j){"use strict";if(!Array.isArray(this.$TimelineSection5))this.$TimelineSection5=[];if(Array.isArray(this.$TimelineSection5))this.$TimelineSection5[i]=j;return this};h.prototype.getSubSections=function(){"use strict";return this.$TimelineSection5};h.prototype.isLoaded=function(){"use strict";return this.$TimelineSection2};h.prototype.isRightColumnFinished=function(){"use strict";return this.$TimelineSection12};h.prototype.setRightColumnFinished=function(){"use strict";this.$TimelineSection12=true;return this};h.prototype.getHistoricUnitCount=function(){"use strict";return this.$TimelineSection9};h.prototype.expand=function(i){"use strict";__p&&__p();if(!this.$TimelineSection2)return this;var j=c("DOM").find(this.$TimelineSection1,".fbTimelineSectionExpander");c("CSS").addClass(j.firstChild,"async_saving");i&&c("CSS").addClass(i,"async_saving");c("Arbiter").inform(c("TimelineConstants").SECTION_EXPAND,this.$TimelineSection3);c("DOM").scry(this.$TimelineSection1,".fbTimelineCapsule").forEach(c("DOM").remove);this.$TimelineSection11.new_expand=true;c("TimelineLegacySections").cancelLoadPagelet(this.$TimelineSection3);c("TimelineLegacySections").addLoadPagelet(this.$TimelineSection3,c("UIPagelet").loadFromEndpoint("ProfileTimelineSectionPagelet",j.id,this.$TimelineSection11,{usePipe:true,jsNonblock:true,constHeight:true}));return this};h.prototype.isPermalinkPeriod=function(){"use strict";return!!this.$TimelineSection10.is_permalink_period};h.prototype.isHidden=function(){"use strict";return this.$TimelineSection14};h.prototype.hide=function(){"use strict";this.$TimelineSection14=true;c("CSS").hide(c("DOM").find(this.$TimelineSection1,".fbTimelineSection"));return this};h.prototype.isHiddenFromView=function(){"use strict";return!this.$TimelineSection2||this.$TimelineSection14||c("CSS").hasClass(this.$TimelineSection1,"fbTimelineTimePeriodUnexpanded")};h.prototype.hasPendingCallbacks=function(){"use strict";return this.$TimelineSection13.length>0};h.prototype.queueDisplayCallback=function(i,j){"use strict";this.$TimelineSection13[i]=j;return this};h.prototype.runPendingDisplayCallbacks=function(){"use strict";while(this.hasPendingCallbacks()){var i=this.$TimelineSection13.shift();if(i)i()}return this};f.exports=h}),null);
__d("TimelineContentLoader",["csx","Arbiter","CSS","DOM","DOMScroll","Event","OnVisible","Parent","ScrollingPager","TimelineComponentKeys","TimelineConstants","TimelineController","TimelineDOMID","TimelineLegacySections","TimelineScrubberKey","TimelineSection","TimelineSmartInsert","Vector","$","debounce","ge","gkx","queryThenMutateDOM"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=false,j=null,k={},l={},m=[],n={},o=null,p=null,q=80,r=250,s=500;function t(){if(i)return;c("TimelineController").register(c("TimelineComponentKeys").CONTENT,z);p=c("Arbiter").subscribe(c("TimelineConstants").SECTION_EXPAND,function(A,B){z.navigateToSection(B)});i=true}var u=c("debounce")(function(A,B,C){__p&&__p();var D=c("TimelineLegacySections").get(A),E=-1;if(c("gkx")("AT79u0gQBMK6FaSXGdZvZcuUj7NrTB22gecUTEyPMnPVLcYsL9sa9mLLjYtbPGTUYeLMN1oyKbw2-KZvENdV9_M4")){if(D)E=D.getHistoricUnitCount()}else E=D.getHistoricUnitCount();B-=E;C-=1;if(E==-1||C<=0||B<0)return;var F=z.getNextSectionKey(A);if(F){if(c("gkx")("AT79u0gQBMK6FaSXGdZvZcuUj7NrTB22gecUTEyPMnPVLcYsL9sa9mLLjYtbPGTUYeLMN1oyKbw2-KZvENdV9_M4")){var G=c("TimelineLegacySections").get(F);if(G)G.load()}else c("TimelineLegacySections").get(F).load();u(F,B,C)}},s);function v(A,B){if(!B)B=0;if(B<q&&!A())setTimeout(v.bind(null,A,B+1),r)}function w(A){v(function(){if(A===c("TimelineScrubberKey").WAY_BACK)return true;var B=z.getNextSectionKey(A);if(B){y(B);return true}return false})}function x(A,B,C){v(function(){if(B===c("TimelineScrubberKey").WAY_BACK)return true;var D=z.getNextSectionKey(B);if(D){c("TimelineLegacySections").addOnVisible(D,new(c("OnVisible"))(A,y.bind(null,D),false,C||1e3));return true}return false})}function y(A){var B=c("TimelineLegacySections").get(A);if(B&&B.canScrollLoad()){B.load();if(o)u(A,o.required_units,o.max_parallelism)}}var z={CURRENT_SECTION_OFFSET:150,registerTimePeriod:function A(B,C,D,E,F,G,H){__p&&__p();t();if(m.includes(C))return;if(l)Object.assign(D||{},l);var I=new(c("TimelineSection"))(B,C,D,E,H);if(!F){c("TimelineLegacySections").setMainSectionOrder(C,G);k[C]=true}else{I.setParentKey(F);var J=c("TimelineLegacySections").get(F);if(J)J.addSubSection(G,I)}c("TimelineLegacySections").set(C,I);z.checkCurrentSectionChange();c("Arbiter").inform(c("TimelineConstants").SECTION_REGISTERED,{scrubberKey:C,section:I})},reset:function A(){__p&&__p();c("TimelineLegacySections").removeAllOnVisibles();c("TimelineLegacySections").cancelLoadPagelets();for(var B in n){n[B].unsubscribe();delete n[B]}p&&p.unsubscribe();p=null;c("TimelineLegacySections").removeAll();j=null;k={};l={};m=[];i=false},checkCurrentSectionChange:function A(){__p&&__p();var B=null;c("queryThenMutateDOM")(function(){B=z.getCurrentSection()},function(){__p&&__p();var C=j&&j.getScrubberKey();if(B&&B.getScrubberKey()!==C&&!B.isPermalinkPeriod()){j=B;var D=B.getScrubberKey(),E=B.getParentKey();if(!E){E=D;D=null}c("TimelineController").sectionHasChanged(E,D)}})},setParallelLoadConfig:function A(B){o=B},getCurrentSection:function A(){__p&&__p();var B={},C=c("TimelineLegacySections").getAll();for(var D in C){var E=C[D];if(c("gkx")("AT79u0gQBMK6FaSXGdZvZcuUj7NrTB22gecUTEyPMnPVLcYsL9sa9mLLjYtbPGTUYeLMN1oyKbw2-KZvENdV9_M4")){if(!E||E.isHiddenFromView&&E.isHiddenFromView())continue}else if(!E||E.isHiddenFromView())continue;var F=c("Vector").getElementPosition(E.getNode(),"viewport").y;if(E.getScrubberKey()===c("TimelineScrubberKey").RECENT_ACTIVITY)F--;if(F<z.CURRENT_SECTION_OFFSET)B[F]=E}var G=Math.max.apply(null,Object.keys(B)),H=c("TimelineLegacySections").getMainSectionOrder(),I=G==-Infinity;if(!I)return B[G];else if(H[0])return c("TimelineLegacySections").get(H[0]);return null},getLastVisibleSection:function A(){var B=c("TimelineLegacySections").getMainSectionOrder();for(var C=B.length-1;C>=0;C--){var D=c("TimelineLegacySections").get(B[C]);if(D&&!D.isHiddenFromView())return D}return null},getRecentActivitySection:function A(){return c("TimelineLegacySections").get(c("TimelineScrubberKey").RECENT_ACTIVITY)},capsuleForCurrentSection:function A(){var B=z.getCurrentSection();return B&&c("DOM").scry(B.getNode(),".fbTimelineCapsule")[0]},enableScrollLoad:function A(B,C,D,E){B=c("$")(B);var F=c("Parent").byClass(B,"fbTimelineSection")||B.parentNode,G=F&&c("DOM").scry(F,".fbTimelineCapsule")[0];if(!G)return;if(D===null)x(B,C,E);else c("TimelineController").runOnceWhenSectionFullyLoaded(x.bind(null,B,C,E),C,D)},getNextSectionKey:function A(B){__p&&__p();var C=c("TimelineLegacySections").getMainSectionOrder();for(var D=0;D<C.length-1;D++)if(C[D]==B){while(D<C.length-1&&!C[D+1])D++;return C[D+1]}var E=c("TimelineLegacySections").get(B);if(!E||!E.getParentKey())return null;var F=c("TimelineLegacySections").get(E.getParentKey());if(!F)return null;var G=F.getSubSections(),H=G[G.length-1];if(E.getScrubberKey()===H.getScrubberKey())return z.getNextSectionKey(E.getParentKey());for(var I=0;I<G.length-1;I++)if(G[I].getScrubberKey()==B)return G[I+1].getScrubberKey();return null},hideSection:function A(B){__p&&__p();var C=c("TimelineLegacySections").get(B);if(C)C.hide();var D=c("TimelineController").getCurrentScrubber();if(D){var E=null;if(!k[B])E=c("TimelineController").getCurrentScrubber().getSubnav(C.getParentKey(),B);else E=c("TimelineController").getCurrentScrubber().getNav(B);E&&c("CSS").hide(E)}var F=c("TimelineController").getCurrentStickyHeaderNav();F&&F.removeTimePeriod(B)},loadSectionOnClick:function A(B,C){c("Event").listen(B,"click",function(D){D.prevent();c("TimelineLegacySections").get(C).load()})},removeSection:function A(B){c("TimelineLegacySections").removeOnVisible(B);c("TimelineLegacySections").remove(B);delete k[B];var C=c("TimelineController").getCurrentStickyHeaderNav();C&&C.removeTimePeriod(B);m.push(B)},navigateToSection:function A(B,C,D){__p&&__p();var E;C=!!C;var F=B,G=c("TimelineLegacySections").get(B);if(!G)return;if(!G.isLoaded()){c("TimelineSmartInsert").enable();c("DOM").scry(c("$")(c("TimelineDOMID").TAB_CONTENT),".fbTimelineShowOlderSections").forEach(c("DOM").remove)}if(!k[B])(function(){__p&&__p();if(!G.isLoaded())G.getNode().style.minHeight=c("Vector").getViewportDimensions().y+"px";var M=c("Arbiter").subscribe(c("TimelineConstants").SECTION_FULLY_LOADED,function(R,S){if(S.scrubberKey===B){G.getNode().style.minHeight="";M.unsubscribe()}});F=G.getParentKey();var N=c("TimelineLegacySections").get(F);if(N){var O=N.getNode();if(!c("CSS").hasClass(O,"fbTimelineSectionExpanded")){c("DOMScroll").scrollTo(O,0);c("CSS").addClass(O,"fbTimelineSectionExpanded");c("DOM").scry(O,".fbTimelineCapsule").forEach(c("DOM").remove);c("DOM").scry(O,"div.fbTimelineSectionExpandPager").forEach(c("DOM").remove);c("DOM").scry(O,"div.fbTimelineContentHeader").forEach(c("DOM").remove);c("DOM").scry(O,"._5vf").forEach(function(R){if(!R.getAttribute("data-subsection"))c("DOM").remove(R)})}}var P=z.getNextSectionKey(F),Q=c("TimelineLegacySections").getOnVisible(P);if(Q)Q.setBuffer(0)})();var H=c("TimelineLegacySections").getMainSectionOrder();for(var I=0;I<H.length;I++){var J=H[I];if(!J)continue;if(J==F)break;c("TimelineLegacySections").get(J).deactivateScrollLoad().deactivateContentScrollLoad()}G.load(D,true);c("TimelineLegacySections").collapsePlaceHolderHeaders();var K=c("Vector").getScrollPosition().x,L=c("Vector").getElementPosition(G.getNode()).y;if(!C)c("DOMScroll").scrollTo(new(c("Vector"))(K,L-c("TimelineConstants").SCROLL_TO_OFFSET,"document"),true,false,false,0,function(){var L=c("Vector").getElementPosition(G.getNode()).y;c("DOMScroll").scrollTo(new(c("Vector"))(K,L-c("TimelineConstants").SCROLL_TO_OFFSET,"document"),false);if(B!==c("TimelineScrubberKey").RECENT_ACTIVITY){var M=c("DOM").scry(G.getNode(),"h3.uiHeaderTitle")[0];if(M){M.tabIndex=0;M.focus()}}})},appendContentAfterLoad:function A(B,C,D){c("TimelineController").runOnceWhenSectionFullyLoaded(c("DOM").appendContent.bind(null,c("$")(B),C),D,"0")},markSectionAsLoaded:function A(B,C,D){c("TimelineController").runOnceWhenSectionFullyLoaded(function(){c("ge")(B)&&c("CSS").removeClass(c("$")(B).parentNode,"fbTimelineSectionLoading")},C,D)},suppressSectionsAbove:function A(B){__p&&__p();var C=void 0,D=void 0,E=c("TimelineLegacySections").getMainSectionOrder();for(var F=0;F<E.length;F++){var G=E[F];if(!G)continue;C=c("TimelineLegacySections").get(G).getNode();D=null;if(Array.from(B.parentNode.children).indexOf(B)<=Array.from(C.parentNode.children).indexOf(C)){D=G;break}c("TimelineLegacySections").get(G).deactivateScrollLoad()}if(D)z.navigateToSection(D,true)},removeDupes:function A(B){__p&&__p();var C=c("ge")(B);if(!C)return;var D=c("DOM").scry(C,"li.fbTimelineUnit"),E={};for(var F=0;F<D.length;F++){var G=D[F];if(G.id&&G.id.startsWith("tl_unit_")){var H=G.id.substring(8,G.id.length),I=c("DOM").scry(G,"div.timelineUnitContainer");if(I.length>0)H+=I[0].getAttribute("data-time");if(Object.prototype.hasOwnProperty.call(E,H)){G.id="dupe_unit_"+Math.random();G.className="hidden_elem"}else E[H]=1}}},removeLoadingState:function A(B){c("ge")(B)&&c("CSS").removeClass(c("$")(B),"fbTimelineSectionLoading")},updatePagerAfterLoad:function A(B,C,D,E){__p&&__p();var F=c("ScrollingPager").getInstance(B.firstChild.id);if(!F){n[B.firstChild.id]=c("Arbiter").subscribe(c("ScrollingPager").CONSTRUCTED,function(H,I){if(I.id===B.firstChild.id){n[B.firstChild.id].unsubscribe();delete n[B.firstChild.id];z.updatePagerAfterLoad(B,C,D,E)}});return}var G=F.getHandler();F.setHandler(function(H){c("CSS").addClass(B,"async_saving");G(H)});c("TimelineController").runOnceWhenSectionFullyLoaded(function(){c("CSS").removeClass(B,"fbTimelineHiddenPager");F.checkBuffer()},D,E)},repositionDialog:function A(B){c("Arbiter").subscribe(c("TimelineConstants").SECTION_LOADED,function(){B.updatePosition()})},rightColumnFinished:function A(B){var C=c("TimelineLegacySections").get(B);if(c("gkx")("AT79u0gQBMK6FaSXGdZvZcuUj7NrTB22gecUTEyPMnPVLcYsL9sa9mLLjYtbPGTUYeLMN1oyKbw2-KZvENdV9_M4")){if(C)C.setRightColumnFinished()}else C.setRightColumnFinished()},loadNextSection:function A(B){w(B)}};f.exports=z}),null);
__d("TimelineLogging",["TimelineComponentKeys","TimelineController","reportData"],(function a(b,c,d,e,f,g){__p&&__p();var h=false,i=0,j=null,k=null,l={init:function m(n){if(h)return;i=n;c("TimelineController").register(c("TimelineComponentKeys").LOGGING,this)},reset:function m(){h=false;i=0;j=null},log:function m(n,o){o.profile_id=i;c("reportData")(n,{gt:o})},logSectionChange:function m(n,o){__p&&__p();var p={timeline_section_change:1,key:n};if(j&&n==j){p.timeline_scrubber=1;j=null}if(k&&n==k){p.sticky_header_nav=1;k=null}l.log("timeline",p)},logScrubberClick:function m(n){j=n},logStickyHeaderNavClick:function m(n){k=n}};f.exports=l}),null);
__d("FeedProfilePhotoFooter",["SubscriptionsHandler","UFICentralUpdates","URI","destroyOnUnload"],(function a(b,c,d,e,f,g){function h(i,j){"use strict";var k=new(c("SubscriptionsHandler"))();k.addSubscriptions(c("UFICentralUpdates").subscribe("actor-changed",function(l,m){return i.setAttribute("href",new(c("URI"))(j).addQueryData("profile_id",m.actorID).toString())}));c("destroyOnUnload")(function(){return k.release()})}f.exports=h}),null);
__d("TimelineSeenStateConstants",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FT_TIMELINE_HASH_IDENTIFIER_KEY:"thid"})}),null);
__d("TimelineViewportTracking",["csx","Arbiter","Banzai","DataAttributeUtils","DOM","TimelineSeenStateConstants","TimelineViewportTrackingLogType","ViewportTracking","$","tidyEvent","viewportTrackingBuilder"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;function k(n,o){__p&&__p();return{_stream:null,_streamDOMID:o,getDataFromConfig:function p(n,q){q.isSeenStateLoggingEnabled=n.is_seen_state_logging_enabled;q.isTimetrackingEnabled=n.is_timetracking_enabled;q.vpvdDebug=!!n.vpvd_debug;q.trackingHooks=!!n.tracking_hooks;c("tidyEvent")(c("Arbiter").subscribe(["TimelineConstants/unitSegmentLoaded"],function(){q.invalidateAllStoriesCache();q.invalidateVisibleStoriesCache()}))},getAllStories:function p(){var q=c("DOM").scry(this.getStream(),"._5pat"),r=[];for(var s=0;s<q.length;s++)if(this.getStoryID(q[s]))r.push(q[s]);return r},getStream:function p(){if(!this._stream)this._stream=c("$")(this._streamDOMID);return this._stream},getStoryID:function p(q){var r=JSON.parse(c("DataAttributeUtils").getDataFt(q)||null);if(r){var s=c("TimelineSeenStateConstants").FT_TIMELINE_HASH_IDENTIFIER_KEY;return r[s]}return null},getDataToLog:function p(q){var r=JSON.parse(c("DataAttributeUtils").getDataFt(q));return{ft:r,log_type:c("TimelineViewportTrackingLogType").IMPRESSION}}}}i=babelHelpers.inherits(l,c("ViewportTracking"));j=i&&i.prototype;l.prototype.getTimetrackingDataToLog=function(n){var o=j.getTimetrackingDataToLog.call(this,n);o.log_type=c("TimelineViewportTrackingLogType").DURATION;return o};l.prototype.sendDataToLog=function(n,o,p,q){if(!o.ft)return;var r={};if(q)r.retry=q;if(p)r.delay=2e3;c("Banzai").post("timeline_feed_tracking",o,r)};l.prototype.cleanup=function(){m.clearSingleton();j.cleanup.call(this)};function l(){i.apply(this,arguments)}var m=c("viewportTrackingBuilder")(function(n,o){var p=new l(k(n,o));p.init(n);return p});m.init=m.singleton.bind(m);f.exports=m}),null);
__d("PhotoCreateButtonsVisibility",["csx","Arbiter","CSS","DOMQuery","Event","Parent","$"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(k){var l=c("Parent").bySelector(k,"._3cz");return c("DOMQuery").find(l,"._69l")}var j={addHideClickListener:function k(l){c("Event").listen(l,"click",function(){c("CSS").hide(i(l))})},addShowClickListener:function k(l){c("Event").listen(l,"click",function(){c("CSS").show(i(l))})},hideButtons:function k(l){var m=c("$")("pagelet_timeline_medley_photos");c("CSS").hide(c("DOMQuery").find(m,"._69l"))},showButtonOnTabChange:function k(l){c("Arbiter").subscribe("Medley/tab-change",function(m){c("CSS").show(l)})}};f.exports=j}),null);